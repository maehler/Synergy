
/* cytoscape.min.js */

/**
 * This file is part of cytoscape.js github-snapshot-2014.01.22-16.55.21.
 * 
 * Cytoscape.js is free software: you can redistribute it and/or modify it
 * under the terms of the GNU Lesser General Public License as published by the Free
 * Software Foundation, either version 3 of the License, or (at your option) any
 * later version.
 * 
 * Cytoscape.js is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more
 * details.
 * 
 * You should have received a copy of the GNU Lesser General Public License along with
 * cytoscape.js. If not, see <http://www.gnu.org/licenses/>.
 */
 
var cytoscape;!function(){var e=cytoscape=function(){return cytoscape.init.apply(cytoscape,arguments)};e.init=function(t){return void 0===t&&(t={}),e.is.plainObject(t)?new e.Core(t):e.is.string(t)?e.extension.apply(e.extension,arguments):void 0},e.fn={},"undefined"!=typeof exports&&(exports=module.exports=cytoscape),window.cytoscape=cytoscape}(),function(e){e.is={string:function(e){return null!=e&&"string"==typeof e},fn:function(e){return null!=e&&"function"==typeof e},array:function(e){return null!=e&&e instanceof Array},plainObject:function(t){return null!=t&&typeof t==typeof{}&&!e.is.array(t)&&t.constructor===Object},number:function(e){return null!=e&&"number"==typeof e&&!isNaN(e)},integer:function(t){return e.is.number(t)&&Math.floor(t)===t},color:function(e){return null!=e&&"string"==typeof e&&""!==$.Color(e).toString()},bool:function(e){return null!=e&&typeof e==typeof!0},elementOrCollection:function(t){return e.is.element(t)||e.is.collection(t)},element:function(t){return t instanceof e.Element&&t._private.single},collection:function(t){return t instanceof e.Collection&&!t._private.single},core:function(t){return t instanceof e.Core},style:function(t){return t instanceof e.Style},stylesheet:function(t){return t instanceof e.Stylesheet},event:function(t){return t instanceof e.Event},emptyString:function(t){return t?e.is.string(t)&&(""===t||t.match(/^\s+$/))?!0:!1:!0},nonemptyString:function(t){return t&&e.is.string(t)&&""!==t&&!t.match(/^\s+$/)?!0:!1},domElement:function(e){return"undefined"==typeof HTMLElement?!1:e instanceof HTMLElement}}}(cytoscape),function(e){e.util={extend:function(){var t,r,a,i,n,o,s=arguments[0]||{},l=1,c=arguments.length,p=!1;for("boolean"==typeof s&&(p=s,s=arguments[1]||{},l=2),"object"==typeof s||e.is.fn(s)||(s={}),c===l&&(s=this,--l);c>l;l++)if(null!=(t=arguments[l]))for(r in t)a=s[r],i=t[r],s!==i&&(p&&i&&(e.is.plainObject(i)||(n=e.is.array(i)))?(n?(n=!1,o=a&&e.is.array(a)?a:[]):o=a&&e.is.plainObject(a)?a:{},s[r]=e.util.extend(p,o,i)):void 0!==i&&(s[r]=i));return s},error:function(e){if(!console)throw e;if(console.error)console.error(e);else{if(!console.log)throw e;console.log(e)}},clone:function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t},copy:function(t){return null==t?t:e.is.array(t)?t.slice():e.is.plainObject(t)?e.util.clone(t):t},mapEmpty:function(e){var t=!0;if(null!=e)for(var r in e){t=!1;break}return t},pushMap:function(t){var r=e.util.getMap(t);null==r?e.util.setMap($.extend({},t,{value:[t.value]})):r.push(t.value)},setMap:function(t){for(var r,a=t.map,i=t.keys,n=i.length,o=0;n>o;o++){var r=i[o];e.is.plainObject(r)&&e.util.error("Tried to set map with object key"),o<i.length-1?(null==a[r]&&(a[r]={}),a=a[r]):a[r]=t.value}},getMap:function(t){for(var r=t.map,a=t.keys,i=a.length,n=0;i>n;n++){var o=a[n];if(e.is.plainObject(o)&&e.util.error("Tried to get map with object key"),r=r[o],null==r)return r}return r},deleteMap:function(t){for(var r=t.map,a=t.keys,i=a.length,n=t.keepChildren,o=0;i>o;o++){var s=a[o];e.is.plainObject(s)&&e.util.error("Tried to delete map with object key");var l=o===t.keys.length-1;if(l)if(n)for(var c in r)n[c]||delete r[c];else delete r[s];else r=r[s]}},capitalize:function(t){return e.is.emptyString(t)?t:t.charAt(0).toUpperCase()+t.substring(1)},camel2dash:function(e){for(var t=[],r=0;r<e.length;r++){var a=e[r],i=a.toLowerCase(),n=a!==i;n?(t.push("-"),t.push(i)):t.push(a)}var o=t.length===e.length;return o?e:t.join("")},dash2camel:function(e){for(var t=[],r=!1,a=0;a<e.length;a++){var i=e[a],n="-"===i;n?r=!0:(t.push(r?i.toUpperCase():i),r=!1)}return t.join("")},trim:function(e){var t,r;for(t=0;t<e.length&&" "===e[t];t++);for(r=e.length-1;r>t&&" "===e[r];r--);return e.substring(t,r+1)},hex2tuple:function(e){if((4===e.length||7===e.length)&&"#"===e[0]){var t,r,a,i=4===e.length,n=16;return i?(t=parseInt(e[1]+e[1],n),r=parseInt(e[2]+e[2],n),a=parseInt(e[3]+e[3],n)):(t=parseInt(e[1]+e[2],n),r=parseInt(e[3]+e[4],n),a=parseInt(e[5]+e[6],n)),[t,r,a]}},hsl2tuple:function(t){function r(e,t,r){return 0>r&&(r+=1),r>1&&(r-=1),1/6>r?e+6*(t-e)*r:.5>r?t:2/3>r?e+(t-e)*(2/3-r)*6:e}var a,i,n,o,s,l,c,p,d=(e.util.regex.number,new RegExp("^"+e.util.regex.hsla+"$").exec(t));if(d){if(i=parseInt(d[1]),0>i?i=(360- -1*i%360)%360:i>360&&(i%=360),i/=360,n=parseFloat(d[2]),0>n||n>100)return;if(n/=100,o=parseFloat(d[3]),0>o||o>100)return;if(o/=100,s=d[4],void 0!==s&&(s=parseFloat(s),0>s||s>1))return;if(0===n)l=c=p=Math.round(255*o);else{var u=.5>o?o*(1+n):o+n-o*n,h=2*o-u;l=Math.round(255*r(h,u,i+1/3)),c=Math.round(255*r(h,u,i)),p=Math.round(255*r(h,u,i-1/3))}a=[l,c,p,s]}return a},rgb2tuple:function(t){var r,a=(e.util.regex.number,new RegExp("^"+e.util.regex.rgba+"$").exec(t));if(a){r=[];for(var i=[],n=1;3>=n;n++){var o=a[n];if("%"===o[o.length-1]&&(i[n]=!0),o=parseFloat(o),i[n]&&(o=o/100*255),0>o||o>255)return;r.push(Math.floor(o))}var s=i[1]||i[2]||i[3],l=i[1]&&i[2]&&i[3];if(s&&!l)return;var c=a[4];if(void 0!==c){if(c=parseFloat(c),0>c||c>1)return;r.push(c)}}return r},colorname2tuple:function(t){return e.util.colors[t.toLowerCase()]},color2tuple:function(t){return e.util.colorname2tuple(t)||e.util.hex2tuple(t)||e.util.rgb2tuple(t)||e.util.hsl2tuple(t)},tuple2hex:function(e){function t(e){var t=e.toString(16);return 1===t.length&&(t="0"+t),t}var r=e[0],a=e[1],i=e[2];return"#"+t(r)+t(a)+t(i)},colors:{transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},e.util.regex={},e.util.regex.number="(?:[-]?\\d*\\.\\d+|[-]?\\d+|[-]?\\d*\\.\\d+[eE]\\d+)",e.util.regex.rgba="rgb[a]?\\(("+e.util.regex.number+"[%]?)\\s*,\\s*("+e.util.regex.number+"[%]?)\\s*,\\s*("+e.util.regex.number+"[%]?)(?:\\s*,\\s*("+e.util.regex.number+"))?\\)",e.util.regex.rgbaNoBackRefs="rgb[a]?\\((?:"+e.util.regex.number+"[%]?)\\s*,\\s*(?:"+e.util.regex.number+"[%]?)\\s*,\\s*(?:"+e.util.regex.number+"[%]?)(?:\\s*,\\s*(?:"+e.util.regex.number+"))?\\)",e.util.regex.hsla="hsl[a]?\\(("+e.util.regex.number+")\\s*,\\s*("+e.util.regex.number+"[%])\\s*,\\s*("+e.util.regex.number+"[%])(?:\\s*,\\s*("+e.util.regex.number+"))?\\)",e.util.regex.hslaNoBackRefs="hsl[a]?\\((?:"+e.util.regex.number+")\\s*,\\s*(?:"+e.util.regex.number+"[%])\\s*,\\s*(?:"+e.util.regex.number+"[%])(?:\\s*,\\s*(?:"+e.util.regex.number+"))?\\)",e.util.regex.hex3="\\#[0-9a-fA-F]{3}",e.util.regex.hex6="\\#[0-9a-fA-F]{6}"}(cytoscape),function(e){e.math={},e.math.roundRectangleIntersectLine=function(e,t,r,a,i,n,o){var s,l=this.getRoundRectangleRadius(i,n),c=i/2,p=n/2,d=r-c+l-o,u=a-p-o,h=r+c-l+o,v=u;if(s=this.finiteLinesIntersect(e,t,r,a,d,u,h,v,!1),s.length>0)return s;var g=r+c+o,f=a-p+l-o,y=g,m=a+p-l+o;if(s=this.finiteLinesIntersect(e,t,r,a,g,f,y,m,!1),s.length>0)return s;var b=r-c+l-o,w=a+p+o,x=r+c-l+o,_=w;if(s=this.finiteLinesIntersect(e,t,r,a,b,w,x,_,!1),s.length>0)return s;var E=r-c-o,S=a-p+l-o,P=E,M=a+p-l+o;if(s=this.finiteLinesIntersect(e,t,r,a,E,S,P,M,!1),s.length>0)return s;var k,D=r-c+l,N=a-p+l;if(k=this.intersectLineCircle(e,t,r,a,D,N,l+o),k.length>0&&k[0]<=D&&k[1]<=N)return[k[0],k[1]];var C=r+c-l,T=a-p+l;if(k=this.intersectLineCircle(e,t,r,a,C,T,l+o),k.length>0&&k[0]>=C&&k[1]<=T)return[k[0],k[1]];var I=r+c-l,z=a+p-l;if(k=this.intersectLineCircle(e,t,r,a,I,z,l+o),k.length>0&&k[0]>=I&&k[1]>=z)return[k[0],k[1]];var B=r-c+l,X=a+p-l;return k=this.intersectLineCircle(e,t,r,a,B,X,l+o),k.length>0&&k[0]<=B&&k[1]>=X?[k[0],k[1]]:[]},e.math.roundRectangleIntersectBox=function(e,t,r,a,i,n,o,s,l){var c=this.getRoundRectangleRadius(i,n),p=o-i/2-l,d=s-n/2+c-l,u=o+i/2+l,h=s+n/2-c+l,v=o-i/2+c-l,g=s-n/2-l,f=o+i/2-c+l,y=s+n/2+l,m=Math.min(e,r),b=Math.max(e,r),w=Math.min(t,a),x=Math.max(t,a);return p>b?!1:m>u?!1:g>x?!1:w>y?!1:p>=m&&b>=p&&d>=w&&x>=d?!0:u>=m&&b>=u&&d>=w&&x>=d?!0:u>=m&&b>=u&&h>=w&&x>=h?!0:p>=m&&b>=p&&h>=w&&x>=h?!0:m>=p&&u>=m&&w>=d&&h>=w?!0:b>=p&&u>=b&&w>=d&&h>=w?!0:b>=p&&u>=b&&x>=d&&h>=x?!0:m>=p&&u>=m&&x>=d&&h>=x?!0:v>=m&&b>=v&&g>=w&&x>=g?!0:f>=m&&b>=f&&g>=w&&x>=g?!0:f>=m&&b>=f&&y>=w&&x>=y?!0:v>=m&&b>=v&&y>=w&&x>=y?!0:m>=v&&f>=m&&w>=g&&y>=w?!0:b>=v&&f>=b&&w>=g&&y>=w?!0:b>=v&&f>=b&&x>=g&&y>=x?!0:m>=v&&f>=m&&x>=g&&y>=x?!0:this.boxIntersectEllipse(m,w,b,x,l,2*c,2*c,v+l,d+l)?!0:this.boxIntersectEllipse(m,w,b,x,l,2*c,2*c,f-l,d+l)?!0:this.boxIntersectEllipse(m,w,b,x,l,2*c,2*c,f-l,h-l)?!0:this.boxIntersectEllipse(m,w,b,x,l,2*c,2*c,v+l,h-l)?!0:!1},e.math.checkInBoundingCircle=function(e,t,r,a,i,n,o,s){return e=(e-o)/(i+a),t=(t-s)/(n+a),r>=e*e+t*t},e.math.checkInBoundingBox=function(e,t,r,a,i,n,o,s){for(var l=r[0],c=r[1],p=r[0],d=r[1],u=1;u<r.length/2;u++)r[2*u]<l?l=r[2*u]:r[2*u]>p&&(p=r[2*u]),r[2*u+1]<c?c=r[2*u+1]:r[2*u+1]>d&&(d=r[2*u+1]);return e-=o,t-=s,e/=i,t/=n,l>e?!1:e>p?!1:c>t?!1:t>d?!1:!0},e.math.boxInBezierVicinity=function(e,t,r,a,i,n,o,s,l,c,p){var d=.25*i+.5*o+.25*l,u=.25*n+.5*s+.25*c,h=Math.min(e,r)-p,v=Math.min(t,a)-p,g=Math.max(e,r)+p,f=Math.max(t,a)+p;if(i>=h&&g>=i&&n>=v&&f>=n)return 1;if(l>=h&&g>=l&&c>=v&&f>=c)return 1;if(d>=h&&g>=d&&u>=v&&f>=u)return 1;if(o>=h&&g>=o&&s>=v&&f>=s)return 1;var y=Math.min(i,d,l),m=Math.min(n,u,c),b=Math.max(i,d,l),w=Math.max(n,u,c);return y>g||h>b||m>f||v>w?0:1},e.math.checkBezierInBox=function(e,t,r,a,i,n,o,s,l,c){function p(e,t,r,a){return(1-a)*(1-a)*e+2*(1-a)*a*t+a*a*r}function d(d){var u=p(i,o,l,d),h=p(n,s,c,d);return u>=e&&r>=u&&h>=t&&a>=h}for(var u=0;1>=u;u+=.25)if(!d(u))return!1;return!0},e.math.checkStraightEdgeInBox=function(e,t,r,a,i,n,o,s){return i>=e&&r>=i&&o>=e&&r>=o&&n>=t&&a>=n&&s>=t&&a>=s},e.math.checkStraightEdgeCrossesBox=function(e,t,r,a,i,n,o,s,l){var c,p,d=Math.min(e,r)-l,u=Math.min(t,a)-l,h=Math.max(e,r)+l,v=Math.max(t,a)+l,g=o-i,f=i,y=s-n,m=n;if(Math.abs(g)<1e-4)return i>=d&&h>=i&&Math.min(n,s)<=u&&Math.max(n,s)>=v;var b=(d-f)/g;if(b>0&&1>=b&&(c=y*b+m,c>=u&&v>=c))return!0;var w=(h-f)/g;if(w>0&&1>=w&&(c=y*w+m,c>=u&&v>=c))return!0;var x=(u-m)/y;if(x>0&&1>=x&&(p=g*x+f,p>=d&&h>=p))return!0;var _=(v-m)/y;return _>0&&1>=_&&(p=g*_+f,p>=d&&h>=p)?!0:!1},e.math.checkBezierCrossesBox=function(e,t,r,a,i,n,o,s,l,c,p){var d=Math.min(e,r)-p,u=Math.min(t,a)-p,h=Math.max(e,r)+p,v=Math.max(t,a)+p;if(i>=d&&h>=i&&n>=u&&v>=n)return!0;if(l>=d&&h>=l&&c>=u&&v>=c)return!0;var g=i-2*o+l,f=-2*i+2*o,y=i,m=[];if(Math.abs(g)<1e-4){var b=(d-i)/f,w=(h-i)/f;m.push(b,w)}else{var x,_,E=f*f-4*g*(y-d);if(E>0){var S=Math.sqrt(E);x=(-f+S)/(2*g),_=(-f-S)/(2*g),m.push(x,_)}var P,M,k=f*f-4*g*(y-h);if(k>0){var S=Math.sqrt(k);P=(-f+S)/(2*g),M=(-f-S)/(2*g),m.push(P,M)}}m.sort(function(e,t){return e-t});var D=n-2*s+c,N=-2*n+2*s,C=n,T=[];if(Math.abs(D)<1e-4){var I=(u-n)/N,z=(v-n)/N;T.push(I,z)}else{var B,X,R=N*N-4*D*(C-u);if(R>0){var S=Math.sqrt(R);B=(-N+S)/(2*D),X=(-N-S)/(2*D),T.push(B,X)}var Y,L,A=N*N-4*D*(C-v);if(A>0){var S=Math.sqrt(A);Y=(-N+S)/(2*D),L=(-N-S)/(2*D),T.push(Y,L)}}T.sort(function(e,t){return e-t});for(var O=0;O<m.length;O+=2)for(var q=1;q<T.length;q+=2)if(m[O]<T[q]&&T[q]>=0&&m[O]<=1&&m[O+1]>T[q-1]&&T[q-1]<=1&&m[O+1]>=0)return!0;return!1},e.math.inLineVicinity=function(e,t,r,a,i,n,o){var s=o,l=Math.min(r,i),c=Math.max(r,i),p=Math.min(a,n),d=Math.max(a,n);return e>=l-s&&c+s>=e&&t>=p-s&&d+s>=t},e.math.inBezierVicinity=function(e,t,r,a,i,n,o,s,l){var c=.25*r+.5*i+.25*o,p=.25*a+.5*n+.25*s,d={x1:Math.min(r,o,c),x2:Math.max(r,o,c),y1:Math.min(a,s,p),y2:Math.max(a,s,p)};if(e<d.x1||e>d.x2||t<d.y1||t>d.y2)return!1;var u,h,v=function(e,t,r,a,i,n,o,s){if(u=(n-a)*(e-r)+(r-i)*(t-a),h=u*u,sideSquared=(n-a)*(n-a)+(r-i)*(r-i),s){if(u>0)return!1}else if(0>u)return!1;return h/sideSquared>o},g=(c+i)/2,f=(p+n)/2,y=!0;return v(g,f,r,a,i,n,0,y)&&(y=!y),!v(e,t,r,a,i,n,l,y)&&!v(e,t,i,n,o,s,l,y)&&!v(e,t,o,s,r,a,l,y)},e.math.solveCubic=function(e,t,r,a,i){t/=e,r/=e,a/=e;var n,o,s,l,c,p,d,u;return o=(3*r-t*t)/9,s=-(27*a)+t*(9*r-2*t*t),s/=54,n=o*o*o+s*s,i[1]=0,d=t/3,n>0?(c=s+Math.sqrt(n),c=0>c?-Math.pow(-c,1/3):Math.pow(c,1/3),p=s-Math.sqrt(n),p=0>p?-Math.pow(-p,1/3):Math.pow(p,1/3),i[0]=-d+c+p,d+=(c+p)/2,i[4]=i[2]=-d,d=Math.sqrt(3)*(-p+c)/2,i[3]=d,void(i[5]=-d)):(i[5]=i[3]=0,0==n?(u=0>s?-Math.pow(-s,1/3):Math.pow(s,1/3),i[0]=-d+2*u,void(i[4]=i[2]=-(u+d))):(o=-o,l=o*o*o,l=Math.acos(s/Math.sqrt(l)),u=2*Math.sqrt(o),i[0]=-d+u*Math.cos(l/3),i[2]=-d+u*Math.cos((l+2*Math.PI)/3),void(i[4]=-d+u*Math.cos((l+4*Math.PI)/3))))},e.math.sqDistanceToQuadraticBezier=function(e,t,r,a,i,n,o,s){var l=1*r*r-4*r*i+2*r*o+4*i*i-4*i*o+o*o+a*a-4*a*n+2*a*s+4*n*n-4*n*s+s*s,c=9*r*i-3*r*r-3*r*o-6*i*i+3*i*o+9*a*n-3*a*a-3*a*s-6*n*n+3*n*s,p=3*r*r-6*r*i+r*o-r*e+2*i*i+2*i*e-o*e+3*a*a-6*a*n+a*s-a*t+2*n*n+2*n*t-s*t,d=1*r*i-r*r+r*e-i*e+a*n-a*a+a*t-n*t,u=[];this.solveCubic(l,c,p,d,u);for(var h=1e-7,v=[],g=0;6>g;g+=2)Math.abs(u[g+1])<h&&u[g]>=0&&u[g]<=1&&v.push(u[g]);v.push(1),v.push(0);for(var f,y,m,b,w=-1,x=0;x<v.length;x++)y=Math.pow(1-v[x],2)*r+2*(1-v[x])*v[x]*i+v[x]*v[x]*o,m=Math.pow(1-v[x],2)*a+2*(1-v[x])*v[x]*n+v[x]*v[x]*s,b=Math.pow(y-e,2)+Math.pow(m-t,2),w>=0?w>b&&(w=b,f=v[x]):(w=b,f=v[x]);return w},e.math.sqDistanceToFiniteLine=function(e,t,r,a,i,n){var o=[e-r,t-a],s=[i-r,n-a],l=s[0]*s[0]+s[1]*s[1],c=o[0]*o[0]+o[1]*o[1],p=o[0]*s[0]+o[1]*s[1],d=p*p/l;return 0>p?c:d>l?(e-i)*(e-i)+(t-n)*(t-n):c-d},e.math.pointInsidePolygon=function(e,t,r,a,i,n,o,s,l){var c=new Array(r.length),p=Math.asin(s[1]/Math.sqrt(s[0]*s[0]+s[1]*s[1]));s[0]<0?p+=Math.PI/2:p=-p-Math.PI/2;for(var d=Math.cos(-p),u=Math.sin(-p),h=0;h<c.length/2;h++)c[2*h]=n/2*(r[2*h]*d-r[2*h+1]*u),c[2*h+1]=o/2*(r[2*h+1]*d+r[2*h]*u),c[2*h]+=a,c[2*h+1]+=i;var v;if(l>0){var g=this.expandPolygon(c,-l);v=this.joinLines(g)}else v=c;for(var f,y,m,b,w,x=0,_=0,h=0;h<v.length/2;h++)if(f=v[2*h],y=v[2*h+1],h+1<v.length/2?(m=v[2*(h+1)],b=v[2*(h+1)+1]):(m=v[2*(h+1-v.length/2)],b=v[2*(h+1-v.length/2)+1]),f==e&&m==e);else{if(!(f>=e&&e>=m||e>=f&&m>=e))continue;w=(e-f)/(m-f)*(b-y)+y,w>t&&x++,t>w&&_++}return x%2==0?!1:!0},e.math.joinLines=function(e){for(var t,r,a,i,n,o,s,l,c=new Array(e.length/2),p=0;p<e.length/4;p++){t=e[4*p],r=e[4*p+1],a=e[4*p+2],i=e[4*p+3],p<e.length/4-1?(n=e[4*(p+1)],o=e[4*(p+1)+1],s=e[4*(p+1)+2],l=e[4*(p+1)+3]):(n=e[0],o=e[1],s=e[2],l=e[3]);var d=this.finiteLinesIntersect(t,r,a,i,n,o,s,l,!0);c[2*p]=d[0],c[2*p+1]=d[1]}return c},e.math.expandPolygon=function(e,t){for(var r,a,i,n,o=new Array(2*e.length),s=0;s<e.length/2;s++){r=e[2*s],a=e[2*s+1],s<e.length/2-1?(i=e[2*(s+1)],n=e[2*(s+1)+1]):(i=e[0],n=e[1]);var l=n-a,c=-(i-r),p=Math.sqrt(l*l+c*c),d=l/p,u=c/p;o[4*s]=r+d*t,o[4*s+1]=a+u*t,o[4*s+2]=i+d*t,o[4*s+3]=n+u*t}return o},e.math.intersectLineEllipse=function(e,t,r,a,i,n){var o=r-e,s=a-t;o/=i,s/=n;var l=Math.sqrt(o*o+s*s),c=l-1;if(0>c)return[];var p=c/l;return[(r-e)*p+e,(a-t)*p+t]},e.math.dotProduct=function(e,t){if(2!=e.length||2!=t.length)throw"dot product: arguments are not vectors";return e[0]*t[0]+e[1]*t[1]},e.math.intersectLineCircle=function(e,t,r,a,i,n,o){var s=[r-e,a-t],l=[i,n],c=[e-i,t-n],p=s[0]*s[0]+s[1]*s[1],d=2*(c[0]*s[0]+c[1]*s[1]),l=c[0]*c[0]+c[1]*c[1]-o*o,u=d*d-4*p*l;if(0>u)return[];t1=(-d+Math.sqrt(u))/(2*p),t2=(-d-Math.sqrt(u))/(2*p);var h=Math.min(t1,t2),v=Math.max(t1,t2),g=[];if(h>=0&&1>=h&&g.push(h),v>=0&&1>=v&&g.push(v),0==g.length)return[];var f=g[0]*s[0]+e,y=g[0]*s[1]+t;if(g.length>1){if(g[0]==g[1])return[f,y];var m=g[1]*s[0]+e,b=g[1]*s[1]+t;return[f,y,m,b]}return[f,y]},e.math.findCircleNearPoint=function(e,t,r,a,i){var n=a-e,o=i-t,s=Math.sqrt(n*n+o*o),l=n/s,c=o/s;return[e+l*r,t+c*r]},e.math.findMaxSqDistanceToOrigin=function(e){for(var t,r=1e-6,a=0;a<e.length/2;a++)t=e[2*a]*e[2*a]+e[2*a+1]*e[2*a+1],t>r&&(r=t);return r},e.math.finiteLinesIntersect=function(e,t,r,a,i,n,o,s,l){var c=(o-i)*(t-n)-(s-n)*(e-i),p=(r-e)*(t-n)-(a-t)*(e-i),d=(s-n)*(r-e)-(o-i)*(a-t);if(0!=d){var u=c/d,h=p/d;return u>=0&&1>=u&&h>=0&&1>=h?[e+u*(r-e),t+u*(a-t)]:l?[e+u*(r-e),t+u*(a-t)]:[]}return 0==c||0==p?[e,r,o].sort()[1]==o?[o,s]:[e,r,i].sort()[1]==i?[i,n]:[i,o,r].sort()[1]==r?[r,a]:[]:[]},e.math.boxIntersectEllipse=function(e,t,r,a,i,n,o,s,l){if(e>r){var c=e;e=r,r=c}if(t>a){var p=t;t=a,a=p}var d=[s-n/2-i,l],u=[s+n/2+i,l],h=[s,l-o/2-i],v=[s,l+o/2+i];return r<d[0]?!1:e>u[0]?!1:t>v[1]?!1:a<h[1]?!1:e<=u[0]&&u[0]<=r&&t<=u[1]&&u[1]<=a?!0:e<=d[0]&&d[0]<=r&&t<=d[1]&&d[1]<=a?!0:e<=h[0]&&h[0]<=r&&t<=h[1]&&h[1]<=a?!0:e<=v[0]&&v[0]<=r&&t<=v[1]&&v[1]<=a?!0:(e=(e-s)/(n/2+i),r=(r-s)/(n/2+i),t=(t-l)/(o/2+i),a=(a-l)/(o/2+i),1>=e*e+t*t?!0:1>=r*r+t*t?!0:1>=r*r+a*a?!0:1>=e*e+a*a?!0:!1)},e.math.boxIntersectPolygon=function(t,r,a,i,n,o,s,l,c,p,d){if(t>a){var u=t;t=a,a=u}if(r>i){var h=r;r=i,i=h}var v=new Array(n.length),g=Math.asin(p[1]/Math.sqrt(p[0]*p[0]+p[1]*p[1]));p[0]<0?g+=Math.PI/2:g=-g-Math.PI/2;for(var f=Math.cos(-g),y=Math.sin(-g),m=0;m<v.length/2;m++)v[2*m]=o/2*(n[2*m]*f-n[2*m+1]*y),v[2*m+1]=s/2*(n[2*m+1]*f+n[2*m]*y),v[2*m]+=l,v[2*m+1]+=c;for(var b=v[0],w=v[0],x=v[1],_=v[1],m=1;m<v.length/2;m++)v[2*m]>w&&(w=v[2*m]),v[2*m]<b&&(b=v[2*m]),v[2*m+1]>_&&(_=v[2*m+1]),v[2*m+1]<x&&(x=v[2*m+1]);if(b-d>a)return!1;if(t>w+d)return!1;if(x-d>i)return!1;if(r>_+d)return!1;var E;if(d>0){var S=e.math.expandPolygon(v,-d);E=e.math.joinLines(S)}else E=v;for(var m=0;m<v.length/2;m++)if(t<=v[2*m]&&v[2*m]<=a&&r<=v[2*m+1]&&v[2*m+1]<=i)return!0;for(var m=0;m<E.length/2;m++){var P,M,k=E[2*m],D=E[2*m+1];if(m<E.length/2-1?(P=E[2*(m+1)],M=E[2*(m+1)+1]):(P=E[0],M=E[1]),e.math.finiteLinesIntersect(k,D,P,M,t,r,a,r,!1).length>0)return!0;if(e.math.finiteLinesIntersect(k,D,P,M,t,i,a,i,!1).length>0)return!0;if(e.math.finiteLinesIntersect(k,D,P,M,t,r,t,i,!1).length>0)return!0;if(e.math.finiteLinesIntersect(k,D,P,M,a,r,a,i,!1).length>0)return!0}return!1},e.math.polygonIntersectLine=function(t,r,a,i,n,o,s,l){for(var c,p=[],d=new Array(a.length),u=0;u<d.length/2;u++)d[2*u]=a[2*u]*o+i,d[2*u+1]=a[2*u+1]*s+n;var h;if(l>0){var v=e.math.expandPolygon(d,-l);h=e.math.joinLines(v)}else h=d;for(var g,f,y,m,u=0;u<h.length/2;u++)g=h[2*u],f=h[2*u+1],u<h.length/2-1?(y=h[2*(u+1)],m=h[2*(u+1)+1]):(y=h[0],m=h[1]),c=this.finiteLinesIntersect(t,r,i,n,g,f,y,m),0!=c.length&&p.push(c[0],c[1]);return p},e.math.shortenIntersection=function(e,t,r){var a=[e[0]-t[0],e[1]-t[1]],i=Math.sqrt(a[0]*a[0]+a[1]*a[1]),n=(i-r)/i;return 0>n?[]:[t[0]+n*a[0],t[1]+n*a[1]]},e.math.generateUnitNgonPoints=function(e,t){var r=1/e*2*Math.PI,a=e%2==0?Math.PI/2+r/2:Math.PI/2;a+=t;for(var i,n=new Array(2*e),o=0;e>o;o++)i=o*r+a,n[2*o]=Math.cos(i),n[2*o+1]=Math.sin(-i);for(var s=0,l=0,o=0;o<n.length/2;o++)Math.abs(n[2*o]>s)&&(s=Math.abs(n[2*o])),Math.abs(n[2*o+1]>l)&&(l=Math.abs(n[2*o+1]));for(var c=5e-4,p=Math.max(s,l),o=0;o<n.length/2;o++)p>c&&(n[2*o]*=1/p,n[2*o+1]*=1/p);return n},e.math.getRoundRectangleRadius=function(e,t){return Math.min(e/2,t/2,10)}}(cytoscape),function(e){e.instances=[],e.instanceCounter=0,e.lastInstanceTime,e.registerInstance=function(t,r){var a;e.is.core(t)?a=t:e.is.domElement(t)&&(r=t);var i=e.getRegistrationForInstance(t,r);if(i)return i.cy?e.util.error("Tried to register on a pre-existing registration"):(i.cy=t,i.domElement=r),i;var n,o=+new Date;e.lastInstanceTime&&e.lastInstanceTime!==o?++e.instanceCounter:e.instanceCounter=0,e.lastInstanceTime=o,n=e.instanceCounter;var s="cy-"+o+"-"+n,l={id:s,cy:a,domElement:r,readies:[]};return e.instances.push(l),e.instances[s]=l,l},e.removeRegistrationForInstance=function(t,r){var a;if(e.is.core(t)?a=t:e.is.domElement(t)&&(r=t),e.is.core(a)){var i=a._private.instanceId;delete e.instances[i],e.instances.splice(i,1)}else if(e.is.domElement(r))for(var n=0;n<e.instances.length;n++){var o=e.instances[n];o.domElement===r&&(delete e.instances[o.id],e.instances.splice(n,1),n--)}},e.getRegistrationForInstance=function(t,r){var a;if(e.is.core(t)?t.registered()&&(a=t):e.is.domElement(t)&&(r=t),e.is.core(a)){var i=a._private.instanceId;return e.instances[i]}if(e.is.domElement(r))for(var n=e.instances.length-1;n>=0;n--){var o=e.instances[n];if(o.domElement===r)return o}}}(cytoscape),function(e){function t(t,r,a){var i={};switch(i[r]=a,t){case"core":case"collection":e.fn[t](i)}return e.util.setMap({map:n,keys:[t,r],value:a})}function r(t,r){return e.util.getMap({map:n,keys:[t,r]})}function a(t,r,a,i,n){return e.util.setMap({map:o,keys:[t,r,a,i],value:n})}function i(t,r,a,i){return e.util.getMap({map:o,keys:[t,r,a,i]})}var n={};e.extensions=n;var o={};e.modules=o,e.extension=function(){return 2==arguments.length?r.apply(this,arguments):3==arguments.length?t.apply(this,arguments):4==arguments.length?i.apply(this,arguments):5==arguments.length?a.apply(this,arguments):void $.error("Invalid extension access syntax")}}(cytoscape),function(e,t){e&&(e.fn.cytoscape=function(r){var a=e(this);if("get"===r){var i=t.getRegistrationForInstance(a[0]);return i.cy}if(!t.is.fn(r)){if(t.is.plainObject(r))return a.each(function(){var t=e.extend({},r,{container:e(this)[0]});cytoscape(t)});for(var n=a[0],o=[],s=[],l=1;l<arguments.length;l++)s[l-1]=arguments[l];return a.each(function(){var e=t.getRegistrationForInstance(n),a=e.cy,i=r;if(a&&t.is.fn(a[i])){var l=a[i].apply(a,s);o.push(l)}}),1===o.length?o=o[0]:0==o.length&&(o=e(this)),o}var c=r,n=a[0],i=t.getRegistrationForInstance(n);i||(i=t.registerInstance(n)),i&&i.cy&&i.cy.ready()?i.cy.trigger("ready",[],c):i.readies.push(c)},e.cytoscape=cytoscape,null==e.fn.cy&&null==e.cy&&(e.fn.cy=e.fn.cytoscape,e.cy=e.cytoscape))}("undefined"!=typeof jQuery?jQuery:null,cytoscape),function(e){function t(){return!1}function r(){return!0}e.Event=function(a,i){return this instanceof e.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.getPreventDefault&&a.getPreventDefault()?r:t):this.type=a,i&&e.util.extend(this,i),void(this.timeStamp=a&&a.timeStamp||+new Date)):new e.Event(a,i)},e.Event.prototype={preventDefault:function(){this.isDefaultPrevented=r;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=r;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=r,this.stopPropagation()},isDefaultPrevented:t,isPropagationStopped:t,isImmediatePropagationStopped:t}}(cytoscape),function(e){e.define={data:function(t){var r={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateMappers:!1};return t=e.util.extend({},r,t),function(r,a){var i=t,n=this,o=void 0!==n.length,s=o?n:[n],l=o?n[0]:n;if(e.is.string(r)){if(i.allowGetting&&void 0===a){var c;return l&&(c=l._private[i.field][r]),c}if(i.allowSetting&&void 0!==a){var p=!i.immutableKeys[r];if(p){for(var d=0,u=s.length;u>d;d++)s[d]._private[i.field][r]=a;i.updateMappers&&n.updateMappers(),i.settingTriggersEvent&&n[i.triggerFnName](i.settingEvent)}}}else if(i.allowSetting&&e.is.plainObject(r)){var h,v,g=r;for(h in g){v=g[h];var p=!i.immutableKeys[h];if(p)for(var d=0,u=s.length;u>d;d++)s[d]._private[i.field][h]=v}i.updateMappers&&n.updateMappers(),i.settingTriggersEvent&&n[i.triggerFnName](i.settingEvent)}else if(i.allowBinding&&e.is.fn(r)){var f=r;n.bind(i.bindingEvent,f)}else if(i.allowGetting&&void 0===r){var c;return l&&(c=l._private[i.field]),c}return n}},batchData:function(t){var r={field:"data",event:"data",triggerFnName:"trigger",immutableKeys:{},updateMappers:!1},a=t=e.util.extend({},r,t);return function(t){var r=this,i=void 0!==r.length,n=i?r:r._private.elements;if(0===n.length)return r;for(var o=i?n[0]._private.cy:r,s=0;s<n.length;s++){var l=n[s],c=l._private.data.id,p=t[c];if(void 0!==p&&null!==p){var d,u,h=p;for(d in h){u=h[d];var v=!a.immutableKeys[d];v&&(l._private[a.field][d]=u)}}}var g=new e.Collection(o,n);return a.updateMappers&&g.updateMappers(),g[a.triggerFnName](a.event),r}},removeData:function(t){var r={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return t=e.util.extend({},r,t),function(r){{var a=t,i=this,n=void 0!==i.length,o=n?i:[i];n?i[0]:i}if(e.is.string(r)){for(var s=r.split(/\s+/),l=s.length,c=0;l>c;c++){var p=s[c];if(!e.is.emptyString(p)){var d=!a.immutableKeys[p];if(d)for(var u=0,h=o.length;h>u;u++)delete o[u]._private[a.field][p]}}a.triggerEvent&&i[a.triggerFnName](a.event)}else if(void 0===r){for(var u=0,h=o.length;h>u;u++){var v=o[u]._private[a.field];for(var p in v){var g=!a.immutableKeys[p];g&&delete v[p]}}a.triggerEvent&&i[a.triggerFnName](a.event)}return i}},event:{regex:/(\w+)(\.\w+)?/,optionalTypeRegex:/(\w+)?(\.\w+)?/,props:"altKey bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase metaKey offsetX offsetY originalTarget pageX pageY prevValue relatedTarget screenX screenY shiftKey target view which".split(/\s+/),aliases:"mousedown mouseup click mouseover mouseout mousemove touchstart touchmove touchend grab drag free".split(/\s+/),aliasesOn:function(t){for(var r=e.define.event.aliases,a=0;a<r.length;a++){var i=r[a];!function(r){t[r]=function(t,a){return e.is.fn(a)?this.on(r,t,a):e.is.fn(t)?(a=t,this.on(r,a)):this.trigger(r),this}}(i)}},falseCallback:function(){return!1}},on:function(t){var r={unbindSelfOnTrigger:!1,unbindAllBindersOnTrigger:!1};return t=e.util.extend({},r,t),function(r,a,i,n){var o=this,s=void 0!==o.length,l=s?o:[o],c=(s?o[0]:o,e.is.string(r)),p=t;if(e.is.plainObject(a)?(n=i,i=a,a=void 0):(e.is.fn(a)||a===!1)&&(n=a,i=void 0,a=void 0),(e.is.fn(i)||i===!1)&&(n=i,i=void 0),!e.is.fn(n)&&n!==!1&&c)return o;if(c){var d={};d[r]=n,r=d}for(var u in r)if(n=r[u],n===!1&&(n=e.define.event.falseCallback),e.is.fn(n)){u=u.split(/\s+/);for(var h=0;h<u.length;h++){var v=u[h];if(!e.is.emptyString(v)){var g=v.match(e.define.event.regex);if(g)for(var f=g[1],y=g[2]?g[2]:void 0,m={callback:n,data:i,delegated:a?!0:!1,selector:a,type:f,namespace:y,unbindSelfOnTrigger:p.unbindSelfOnTrigger,unbindAllBindersOnTrigger:p.unbindAllBindersOnTrigger,binders:l},b=0;b<l.length;b++)l[b]._private.listeners.push(m)}}}return o}},off:function(t){var r={};return t=e.util.extend({},r,t),function(t,r,a){var i=this,n=void 0!==i.length,o=n?i:[i],s=(n?i[0]:i,e.is.string(t));if(0===arguments.length){for(var l=0;l<o.length;l++)o[l]._private.listeners=[];return i}if((e.is.fn(r)||r===!1)&&(a=r,r=void 0),s){var c={};c[t]=a,t=c}for(var p in t){a=t[p],a===!1&&(a=e.define.event.falseCallback),p=p.split(/\s+/);for(var d=0;d<p.length;d++){var u=p[d];if(!e.is.emptyString(u)){var h=u.match(e.define.event.optionalTypeRegex);if(h)for(var v=h[1]?h[1]:void 0,g=h[2]?h[2]:void 0,l=0;l<o.length;l++)for(var f=o[l]._private.listeners,y=0;y<f.length;y++){var m=f[y],b=!g||g===m.namespace,w=!v||m.type===v,x=!a||a===m.callback,_=b&&w&&x;_&&(f.splice(y,1),y--)}}}}return i}},trigger:function(t){var r={};return t=e.util.extend({},r,t),function(t,r,a){var i=this,n=void 0!==i.length,o=n?i:[i],s=(n?i[0]:i,e.is.string(t)),l=e.is.plainObject(t),c=e.is.event(t),p=this._private.cy||this;if(s){var d=t.split(/\s+/);t=[];for(var u=0;u<d.length;u++){var h=d[u];if(!e.is.emptyString(h)){var v=h.match(e.define.event.regex),g=v[1],f=v[2]?v[2]:void 0;t.push({type:g,namespace:f})}}}else if(l){var y=t;t=[y]}r?e.is.array(r)||(r=[r]):r=[];for(var u=0;u<t.length;u++)for(var m=t[u],b=0;b<o.length;b++){var h,w=o[b],x=w._private.listeners,_=e.is.element(w),E=_;if(c?(h=m,h.cyTarget=h.cyTarget||w,h.cy=h.cy||p,h.namespace=h.namespace||m.namespace):h=new e.Event(m,{cyTarget:w,cy:p,namespace:m.namespace}),h.cyPosition){var S=h.cyPosition,P=p.zoom(),M=p.pan();h.cyRenderedPosition={x:S.x*P+M.x,y:S.y*P+M.y}}a&&(x=[{namespace:h.namespace,type:h.type,callback:a}]);for(var k=0;k<x.length;k++){var D=x[k],N=!D.namespace||D.namespace===h.namespace,C=D.type===h.type,T=D.delegated?w!==h.cyTarget&&e.is.element(h.cyTarget)&&h.cyTarget.is(D.selector):!0,I=N&&C&&T;if(I){var z=[h];if(z=z.concat(r),h.data=D.data?D.data:void 0,(D.unbindSelfOnTrigger||D.unbindAllBindersOnTrigger)&&(x.splice(k,1),k--),D.unbindAllBindersOnTrigger)for(var B=D.binders,X=0;X<B.length;X++){var R=B[X];if(R&&R!==w)for(var Y=R._private.listeners,L=0;L<Y.length;L++){var A=Y[L];A===D&&(Y.splice(L,1),L--)}}var O=D.delegated?h.cyTarget:w,q=D.callback.apply(O,z);(q===!1||h.isPropagationStopped())&&(E=!1,q===!1&&(h.stopPropagation(),h.preventDefault()))}}if(E){var V=w.parent(),F=0!==V.length;F?(V=V[0],V.trigger(h)):p.trigger(h)}}return i}}}}(cytoscape),function(e,t){var r="ontouchstart"in t||t.DocumentTouch&&document instanceof DocumentTouch;e.Style=function(t){return this instanceof e.Style?e.is.core(t)?(this._private={cy:t,coreStyle:{}},this.length=0,void this.addDefaultStylesheet()):void e.util.error("A style must have a core reference"):new e.Style(t)},e.style=e.Style,e.styfn=e.Style.prototype,e.fn.style=function(t){for(var r in t){var a=t[r];e.Style.prototype=a}},e.stylesheet=e.Stylesheet=function(){return this instanceof e.Stylesheet?void(this.length=0):new e.Stylesheet},e.Stylesheet.prototype.selector=function(e){var t=this.length++;return this[t]={selector:e,properties:[]},this},e.Stylesheet.prototype.css=function(t,r){var a=this.length-1;
if(e.is.string(t))this[a].properties.push({name:t,value:r});else if(e.is.plainObject(t)){map=t;for(var i=0;i<e.style.properties.length;i++){var n=e.style.properties[i],o=map[n.name];if(void 0===o&&(o=map[e.util.dash2camel(n.name)]),void 0!==o){var t=n.name,r=o;this[a].properties.push({name:t,value:r})}}}return this},e.style.applyFromString=function(t,r){function a(){l=l.length>n.length?l.substr(n.length):""}function i(){o=o.length>s.length?o.substr(s.length):""}var n,o,s,l=""+r;for(l=l.replace(/[/][*](\s|.)+?[*][/]/g,"");;){var c=l.match(/^\s*$/);if(c)break;var p=l.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!p){e.util.error("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+l);break}n=p[0];var d=p[1],u=new e.Selector(d);if(u._private.invalid)e.util.error("Skipping parsing of block: Invalid selector found in string stylesheet: "+d),a();else{var h=p[2],v=!1;o=h;for(var g=[];;){var c=o.match(/^\s*$/);if(c)break;var f=o.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/);if(!f){e.util.error("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+h),v=!0;break}s=f[0];var y=f[1],m=f[2],b=e.style.properties[y];if(b){var w=t.parse(y,m);w?(g.push({name:y,val:m}),i()):(e.util.error("Skipping property: Invalid property definition in: "+s),i())}else e.util.error("Skipping property: Invalid property name in: "+s),i()}if(v){a();break}t.selector(d);for(var x=0;x<g.length;x++){var b=g[x];t.css(b.name,b.val)}a()}}return t},e.style.fromString=function(t,r){var a=new e.Style(t);return e.style.applyFromString(a,r),a},e.styfn.fromString=function(t){var r=this;return r.resetToDefault(),e.style.applyFromString(r,t),r},e.style.applyFromJson=function(e,t){for(var r=0;r<t.length;r++){var a=t[r],i=a.selector,n=a.css;e.selector(i);for(var o in n){var s=n[o];e.css(o,s)}}return e},e.style.fromJson=function(t,r){var a=new e.Style(t);return e.style.applyFromJson(a,r),a},e.styfn.fromJson=function(t){var r=this;return r.resetToDefault(),e.style.applyFromJson(r,t),r},e.styfn.json=function(){for(var e=[],t=0;t<this.length;t++){for(var r=this[t],a=r.selector,i=r.properties,n={},o=0;o<i.length;o++){var s=i[o];n[s.name]=s.strValue}e.push({selector:a?a.toString():"core",css:n})}return e},e.Stylesheet.prototype.generateStyle=function(t){for(var r=new e.Style(t),a=0;a<this.length;a++){var i=this[a],n=i.selector,o=i.properties;r.selector(n);for(var s=0;s<o.length;s++){var l=o[s];r.css(l.name,l.value)}}return r},e.Stylesheet.prototype.assignToStyle=function(e,t){e.clear(),(t||void 0===t)&&e.addDefaultStylesheet();for(var r=0;r<this.length;r++){var a=this[r],i=a.selector,n=a.properties;e.selector(i);for(var o=0;o<n.length;o++){var s=n[o];e.css(s.name,s.value)}}},function(){var t=e.util.regex.number,r=e.util.regex.rgbaNoBackRefs,a=e.util.regex.hslaNoBackRefs,i=e.util.regex.hex3,n=e.util.regex.hex6,o=function(e){return"^"+e+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},s=function(e){return"^"+e+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+t+"|\\w+|"+r+"|"+a+"|"+i+"|"+n+")\\s*\\,\\s*("+t+"|\\w+|"+r+"|"+a+"|"+i+"|"+n+")\\)$"};e.style.types={percent:{number:!0,min:0,max:100,units:"%"},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},size:{number:!0,min:0,enums:["auto"]},bgSize:{number:!0,min:0,allowPercent:!0},color:{color:!0},lineStyle:{enums:["solid","dotted","dashed"]},curveStyle:{enums:["bundled","bezier"]},fontFamily:{regex:"^([\\w- ]+(?:\\s*,\\s*[\\w- ]+)*)$"},fontVariant:{enums:["small-caps","normal"]},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","capitalize","uppercase","lowercase"]},nodeShape:{enums:["rectangle","roundrectangle","ellipse","triangle","square","pentagon","hexagon","heptagon","octagon"]},arrowShape:{enums:["tee","triangle","square","circle","diamond","none"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},positionx:{enums:["left","center","right"],number:!0,allowPercent:!0},positiony:{enums:["top","center","bottom"],number:!0,allowPercent:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"]},cursor:{enums:["auto","crosshair","default","e-resize","n-resize","ne-resize","nw-resize","pointer","progress","s-resize","sw-resize","text","w-resize","wait","grab","grabbing"]},text:{string:!0},data:{mapping:!0,regex:o("data")},layoutData:{mapping:!0,regex:o("layoutData")},mapData:{mapping:!0,regex:s("mapData")},mapLayoutData:{mapping:!0,regex:s("mapLayoutData")},url:{regex:"^url\\s*\\(\\s*([^\\s]+)\\s*\\s*\\)|none|(.+)$"}};var l=e.style.types;e.style.properties=[{name:"cursor",type:l.cursor},{name:"text-valign",type:l.valign},{name:"text-halign",type:l.halign},{name:"color",type:l.color},{name:"content",type:l.text},{name:"text-outline-color",type:l.color},{name:"text-outline-width",type:l.size},{name:"text-outline-opacity",type:l.zeroOneNumber},{name:"text-opacity",type:l.zeroOneNumber},{name:"text-decoration",type:l.textDecoration},{name:"text-transform",type:l.textTransform},{name:"font-family",type:l.fontFamily},{name:"font-style",type:l.fontStyle},{name:"font-variant",type:l.fontVariant},{name:"font-weight",type:l.fontWeight},{name:"font-size",type:l.size},{name:"min-zoomed-font-size",type:l.size},{name:"display",type:l.display},{name:"visibility",type:l.visibility},{name:"opacity",type:l.zeroOneNumber},{name:"z-index",type:l.nonNegativeInt},{name:"overlay-padding",type:l.size},{name:"overlay-color",type:l.color},{name:"overlay-opacity",type:l.zeroOneNumber},{name:"background-color",type:l.color},{name:"background-opacity",type:l.zeroOneNumber},{name:"background-image",type:l.url},{name:"background-position-x",type:l.positionx},{name:"background-position-y",type:l.positiony},{name:"background-repeat",type:l.bgRepeat},{name:"background-size-x",type:l.bgSize},{name:"background-size-y",type:l.bgSize},{name:"pie-1-background-color",type:l.color},{name:"pie-2-background-color",type:l.color},{name:"pie-3-background-color",type:l.color},{name:"pie-4-background-color",type:l.color},{name:"pie-5-background-color",type:l.color},{name:"pie-6-background-color",type:l.color},{name:"pie-7-background-color",type:l.color},{name:"pie-8-background-color",type:l.color},{name:"pie-9-background-color",type:l.color},{name:"pie-10-background-color",type:l.color},{name:"pie-11-background-color",type:l.color},{name:"pie-12-background-color",type:l.color},{name:"pie-13-background-color",type:l.color},{name:"pie-14-background-color",type:l.color},{name:"pie-15-background-color",type:l.color},{name:"pie-16-background-color",type:l.color},{name:"pie-1-background-size",type:l.percent},{name:"pie-2-background-size",type:l.percent},{name:"pie-3-background-size",type:l.percent},{name:"pie-4-background-size",type:l.percent},{name:"pie-5-background-size",type:l.percent},{name:"pie-6-background-size",type:l.percent},{name:"pie-7-background-size",type:l.percent},{name:"pie-8-background-size",type:l.percent},{name:"pie-9-background-size",type:l.percent},{name:"pie-10-background-size",type:l.percent},{name:"pie-11-background-size",type:l.percent},{name:"pie-12-background-size",type:l.percent},{name:"pie-13-background-size",type:l.percent},{name:"pie-14-background-size",type:l.percent},{name:"pie-15-background-size",type:l.percent},{name:"pie-16-background-size",type:l.percent},{name:"border-color",type:l.color},{name:"border-opacity",type:l.zeroOneNumber},{name:"border-width",type:l.size},{name:"border-style",type:l.lineStyle},{name:"height",type:l.size},{name:"width",type:l.size},{name:"padding-left",type:l.size},{name:"padding-right",type:l.size},{name:"padding-top",type:l.size},{name:"padding-bottom",type:l.size},{name:"shape",type:l.nodeShape},{name:"source-arrow-shape",type:l.arrowShape},{name:"target-arrow-shape",type:l.arrowShape},{name:"source-arrow-color",type:l.color},{name:"target-arrow-color",type:l.color},{name:"line-style",type:l.lineStyle},{name:"line-color",type:l.color},{name:"control-point-step-size",type:l.size},{name:"curve-style",type:l.curveStyle},{name:"selection-box-color",type:l.color},{name:"selection-box-opacity",type:l.zeroOneNumber},{name:"selection-box-border-color",type:l.color},{name:"selection-box-border-width",type:l.size},{name:"panning-cursor",type:l.cursor},{name:"active-bg-color",type:l.color},{name:"active-bg-opacity",type:l.zeroOneNumber},{name:"active-bg-size",type:l.size}];for(var c=e.style.properties,p=0;p<c.length;p++){var d=c[p];c[d.name]=d}e.style.pieBackgroundN=16}(),e.styfn.addDefaultStylesheet=function(){var e="Helvetica",t="normal",a="normal",i="normal",n="#000",o="none",s=16;this.selector("node, edge").css({cursor:"default","text-valign":"top","text-halign":"center",color:n,content:void 0,"text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":o,"font-family":e,"font-style":t,"font-variant":a,"font-weight":i,"font-size":s,"min-zoomed-font-size":0,visibility:"visible",display:"element",opacity:1,"z-index":0,content:"","overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"background-color":"#888","background-opacity":1,"background-image":"none","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,"padding-top":0,"padding-bottom":0,"padding-left":0,"padding-right":0,shape:"ellipse","pie-1-background-color":"black","pie-1-background-size":"0%","pie-2-background-color":"black","pie-2-background-size":"0%","pie-3-background-color":"black","pie-3-background-size":"0%","pie-4-background-color":"black","pie-4-background-size":"0%","pie-5-background-color":"black","pie-5-background-size":"0%","pie-6-background-color":"black","pie-6-background-size":"0%","pie-7-background-color":"black","pie-7-background-size":"0%","pie-8-background-color":"black","pie-8-background-size":"0%","pie-9-background-color":"black","pie-9-background-size":"0%","pie-10-background-color":"black","pie-10-background-size":"0%","pie-11-background-color":"black","pie-11-background-size":"0%","pie-12-background-color":"black","pie-12-background-size":"0%","pie-13-background-color":"black","pie-13-background-size":"0%","pie-14-background-color":"black","pie-14-background-size":"0%","pie-15-background-color":"black","pie-15-background-size":"0%","pie-16-background-color":"black","pie-16-background-size":"0%","source-arrow-shape":"none","target-arrow-shape":"none","source-arrow-color":"#bbb","target-arrow-color":"#bbb","line-style":"solid","line-color":"#bbb","control-point-step-size":40,"curve-style":"bezier"}).selector("$node > node").css({width:"auto",height:"auto",shape:"rectangle","background-opacity":.5,"padding-top":10,"padding-right":10,"padding-left":10,"padding-bottom":10}).selector("edge").css({width:1}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}).selector("core").css({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"panning-cursor":"grabbing","active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":r?40:15})},e.styfn.clear=function(){this._private.newStyle=!0;for(var e=0;e<this.length;e++)delete this[e];return this.length=0,this},e.styfn.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},e.styfn.core=function(){return this._private.coreStyle},e.styfn.parse=function(t,r,a){t=e.util.camel2dash(t);var i=e.style.properties[t],n=r;if(!i)return null;if(void 0===r||null===r)return null;var o=e.is.string(r);o&&(r=e.util.trim(r));var s=i.type;if(!s)return null;if(a&&(""===r||null===r))return{name:t,value:r,bypass:!0,deleteBypass:!0};var l,c,p,d;if(o){if((l=new RegExp(e.style.types.data.regex).exec(r))||(p=new RegExp(e.style.types.layoutData.regex).exec(r))){var u=void 0!==p;return l=l||p,{name:t,value:l,strValue:r,mapped:u?e.style.types.layoutData:e.style.types.data,field:l[1],bypass:a}}if((c=new RegExp(e.style.types.mapData.regex).exec(r))||(d=new RegExp(e.style.types.mapLayoutData.regex).exec(r))){var u=void 0!==d;if(c=c||d,!s.color&&!s.number)return!1;var h=this.parse(t,c[4]);if(!h||h.mapped)return!1;var v=this.parse(t,c[5]);if(!v||v.mapped)return!1;if(h.value===v.value)return!1;if(s.color){var g=h.value,f=v.value,y=!(g[0]!==f[0]||g[1]!==f[1]||g[2]!==f[2]||g[3]!==f[3]&&(null!=g[3]&&1!==g[3]||null!=f[3]&&1!==f[3]));if(y)return!1}return{name:t,value:c,strValue:r,mapped:u?e.style.types.mapLayoutData:e.style.types.mapData,field:c[1],fieldMin:parseFloat(c[2]),fieldMax:parseFloat(c[3]),valueMin:h.value,valueMax:v.value,bypass:a}}}else;if(s.number){var m,b="px";if(s.units&&(m=s.units),!s.unitless)if(o){var w="px|em"+(s.allowPercent?"|\\%":"");m&&(w=m);var x=r.match("^("+e.util.regex.number+")("+w+")?$");x&&(r=x[1],m=x[2]||b)}else m||(m=b);if(r=parseFloat(r),isNaN(r)&&void 0===s.enums)return null;if(isNaN(r)&&void 0!==s.enums){r=n;for(var _=0;_<s.enums.length;_++){var E=s.enums[_];if(E===r)return{name:t,value:r,strValue:r,bypass:a}}return null}if(s.integer&&!e.is.integer(r))return null;if(void 0!==s.min&&r<s.min||void 0!==s.max&&r>s.max)return null;var S={name:t,value:r,strValue:""+r+(m?m:""),units:m,bypass:a,pxValue:s.unitless||"%"===m?void 0:"px"!==m&&m?this.getEmSizeInPixels()*r:r};return S}if(s.color){var P=e.util.color2tuple(r);return{name:t,value:P,strValue:r,bypass:a}}if(!s.enums){if(s.regex){var M=new RegExp(s.regex),k=M.exec(r);return k?{name:t,value:k,strValue:r,bypass:a}:null}return s.string?{name:t,value:r,strValue:r,bypass:a}:null}for(var _=0;_<s.enums.length;_++){var E=s.enums[_];if(E===r)return{name:t,value:r,strValue:r,bypass:a}}},e.styfn.getEmSizeInPixels=function(){var e=this._private.cy,r=e.container();if(t&&r&&t.getComputedStyle){var a=t.getComputedStyle(r).getPropertyValue("font-size"),i=parseFloat(a);return i}return 1},e.styfn.containerCss=function(e){var r=this._private.cy,a=r.container();return t&&a&&t.getComputedStyle?t.getComputedStyle(a).getPropertyValue(e):void 0},e.styfn.containerProperty=function(e){var t=this.containerCss(e),r=this.parse(e,t);return r},e.styfn.containerPropertyAsString=function(e){var t=this.containerProperty(e);return t?t.strValue:void 0},e.styfn.selector=function(t){var r="core"===t?null:new e.Selector(t),a=this.length++;return this[a]={selector:r,properties:[]},this},e.styfn.css=function(){var t=arguments;switch(t.length){case 1:for(var r=t[0],a=0;a<e.style.properties.length;a++){var i=e.style.properties[a],n=r[i.name];void 0===n&&(n=r[e.util.dash2camel(i.name)]),void 0!==n&&this.cssRule(i.name,n)}break;case 2:this.cssRule(t[0],t[1])}return this},e.styfn.cssRule=function(e,t){var r=this.parse(e,t);if(r){var a=this.length-1;this[a].properties.push(r);var i=!this[a].selector;i&&(this._private.coreStyle[r.name]=r)}return this},e.styfn.applyParsedProperty=function(t,r,a){r=e.util.clone(r);var i,n,o=r,s=t._private.style,l=e.style.properties[o.name].type,c=o.bypass,p=s[o.name],d=p&&p.bypass;if(("height"===r.name||"width"===r.name)&&"auto"===r.value&&t.isNode()&&!t.isParent())return!1;if(c&&o.deleteBypass){var u=s[o.name];return u?u.bypass&&u.bypassed?(s[o.name]=u.bypassed,!0):!1:!0}switch(o.mapped){case e.style.types.mapData:case e.style.types.mapLayoutData:for(var h=o.mapped===e.style.types.mapLayoutData,v=o.field.split("."),i=h?t._private.layoutData:t._private.data,g=0;g<v.length&&i;g++){var f=v[g];i=i[f]}if(!e.is.number(i))return!1;var y=(i-o.fieldMin)/(o.fieldMax-o.fieldMin);if(l.color){var m=o.valueMin[0],b=o.valueMax[0],w=o.valueMin[1],x=o.valueMax[1],_=o.valueMin[2],E=o.valueMax[2],S=null==o.valueMin[3]?1:o.valueMin[3],P=null==o.valueMax[3]?1:o.valueMax[3],M=[Math.round(m+(b-m)*y),Math.round(w+(x-w)*y),Math.round(_+(E-_)*y),Math.round(S+(P-S)*y)];n={bypass:o.bypass,name:o.name,value:M,strValue:["rgba(",M[0],", ",M[1],", ",M[2],", ",M[3],")"].join("")}}else{if(!l.number)return!1;var k=o.valueMin+(o.valueMax-o.valueMin)*y;n=this.parse(o.name,k,o.bypass)}n||(n=this.parse(o.name,p.strValue,o.bypass)),n.mapping=o,o=n;break;case e.style.types.data:case e.style.types.layoutData:for(var h=o.mapped===e.style.types.layoutData,v=o.field.split("."),i=h?t._private.layoutData:t._private.data,g=0;g<v.length&&i;g++){var f=v[g];i=i[f]}n=this.parse(o.name,i,o.bypass),n||(n=this.parse(o.name,p.strValue,o.bypass)),n.mapping=o,o=n;break;case void 0:break;default:return!1}if(c)o.bypassed=d?p.bypassed:p,s[o.name]=o;else{var D;d?(D=p.bypassed,p.bypassed=o):(D=s[o.name],s[o.name]=o),D&&D.mapping&&o.mapping&&D.context===a&&(D=D.prev),D&&D!==o&&(o.prev=D)}return o.context=a,!0},e.styfn.rollBackContext=function(e,t){for(var r=0;r<t.properties.length;r++){var a=t.properties[r],i=e._private.style[a.name];i.bypassed&&(i=i.bypassed);for(var n,o=!0,s=0;i.prev;){var l=i.prev;i.context===t&&(o?e._private.style[a.name]=l:n&&(n.prev=l)),n=i,i=l,o=!1,s++}}},e.styfn.apply=function(e){for(var t=this,r=0;r<e.length;r++){var a=e[r];t._private.newStyle&&(a._private.styleCxts=[],a._private.style={});for(var i=0;i<this.length;i++){var n=this[i],o=n.selector&&n.selector.filter(a).length>0,s=n.properties;if(o){for(var l=0;l<s.length;l++){var c=s[l];(!a._private.styleCxts[i]||c.mapped)&&this.applyParsedProperty(a,c,n)}a._private.styleCxts[i]=n}else a._private.styleCxts[i]&&this.rollBackContext(a,n),delete a._private.styleCxts[i]}}t._private.newStyle=!1},e.styfn.update=function(){var e=this._private.cy,t=e.elements();t.updateStyle()},e.styfn.getRenderedStyle=function(t){var t=t[0];if(t){for(var r={},a=t._private.style,i=this._private.cy,n=i.zoom(),o=0;o<e.style.properties.length;o++){var s=e.style.properties[o],l=a[s.name];if(l){var c=l.unitless?l.strValue:l.pxValue*n+"px";r[s.name]=c,r[e.util.dash2camel(s.name)]=c}}return r}},e.styfn.getRawStyle=function(t){var t=t[0];if(t){for(var r={},a=t._private.style,i=0;i<e.style.properties.length;i++){var n=e.style.properties[i],o=a[n.name];o&&(r[n.name]=o.strValue,r[e.util.dash2camel(n.name)]=o.strValue)}return r}},e.styfn.getValueStyle=function(t){var r,a;if(e.is.element(t)?(r={},a=t._private.style):(r={},a=t),a)for(var i=0;i<e.style.properties.length;i++){var n=e.style.properties[i],o=a[n.name]||a[e.util.dash2camel(n.name)];if(void 0===o||e.is.plainObject(o)||(o=this.parse(n.name,o)),o){var s=void 0===o.value?o:o.value;r[n.name]=s,r[e.util.dash2camel(n.name)]=s}}return r},e.styfn.updateMappers=function(t){for(var r=0;r<t.length;r++)for(var a=t[r],i=a._private.style,n=0;n<e.style.properties.length;n++){var o=e.style.properties[n],s=i[o.name];if(s&&s.mapping){var l=s.mapping;this.applyParsedProperty(a,l)}}},e.styfn.applyBypass=function(t,r,a){var i=[];if("*"===r||"**"===r){if(void 0!==a)for(var n=0;n<e.style.properties.length;n++){var o=e.style.properties[n],r=o.name,s=this.parse(r,a,!0);s&&i.push(s)}}else if(e.is.string(r)){var s=this.parse(r,a,!0);s&&i.push(s)}else{if(!e.is.plainObject(r))return!1;for(var l=r,n=0;n<e.style.properties.length;n++){var o=e.style.properties[n],r=o.name,a=l[r];if(void 0===a&&(a=l[e.util.dash2camel(r)]),void 0!==a){var s=this.parse(r,a,!0);s&&i.push(s)}}}if(0===i.length)return!1;for(var c=!1,n=0;n<t.length;n++)for(var p=t[n],d=0;d<i.length;d++){var o=i[d];c=this.applyParsedProperty(p,o)||c}return c},e.styfn.removeAllBypasses=function(t){for(var r=0;r<e.style.properties.length;r++)for(var a=e.style.properties[r],i=a.name,n="",o=this.parse(i,n,!0),s=0;s<t.length;s++){var l=t[s];this.applyParsedProperty(l,o)}}}(cytoscape,"undefined"==typeof window?null:window),function(e){var t=window&&"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,r={hideEdgesOnViewport:!1},a=e.util.copy(r);e.defaults=function(t){r=e.util.extend({},a,t)},e.fn.core=function(t){for(var r in t){var a=t[r];e.Core.prototype[r]=a}},e.Core=function(a){if(!(this instanceof e.Core))return new e.Core(a);var i=this;a=e.util.extend({},r,a);var n=a.container,o=e.getRegistrationForInstance(i,n);o&&o.cy&&(o.domElement.innerHTML="",o.cy.notify({type:"destroy"}),e.removeRegistrationForInstance(o.cy,o.domElement)),o=e.registerInstance(i,n);var s=o.readies,l=a;l.layout=e.util.extend({name:"undefined"==typeof window?"null":"grid"},l.layout),l.renderer=e.util.extend({name:"undefined"==typeof window?"null":"canvas"},l.renderer);var c=this._private={ready:!1,initrender:!1,instanceId:o.id,options:l,elements:[],id2index:{},listeners:[],aniEles:[],scratch:{},layout:null,renderer:null,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:void 0===l.zoomingEnabled?!0:l.zoomingEnabled,userZoomingEnabled:void 0===l.userZoomingEnabled?!0:l.userZoomingEnabled,panningEnabled:void 0===l.panningEnabled?!0:l.panningEnabled,userPanningEnabled:void 0===l.userPanningEnabled?!0:l.userPanningEnabled,boxSelectionEnabled:void 0===l.boxSelectionEnabled?!0:l.boxSelectionEnabled,zoom:e.is.number(l.zoom)?l.zoom:1,pan:{x:e.is.plainObject(l.pan)&&e.is.number(l.pan.x)?l.pan.x:0,y:e.is.plainObject(l.pan)&&e.is.number(l.pan.y)?l.pan.y:0},hasCompoundNodes:!1},p=l.selectionType;c.selectionType=void 0===p||"additive"!==p&&"single"!==p?t?"additive":"single":p,e.is.number(l.minZoom)&&e.is.number(l.maxZoom)&&l.minZoom<l.maxZoom?(c.minZoom=l.minZoom,c.maxZoom=l.maxZoom):e.is.number(l.minZoom)&&void 0===l.maxZoom?c.minZoom=l.minZoom:e.is.number(l.maxZoom)&&void 0===l.minZoom&&(c.maxZoom=l.maxZoom),c.style=e.is.stylesheet(l.style)?l.style.generateStyle(this):e.is.array(l.style)?e.style.fromJson(this,l.style):e.is.string(l.style)?e.style.fromString(this,l.style):new e.Style(i),i.initRenderer(e.util.extend({hideEdgesOnViewport:l.hideEdgesOnViewport},l.renderer)),l.initrender&&(i.on("initrender",l.initrender),i.on("initrender",function(){i._private.initrender=!0})),i.load(l.elements,function(){i.startAnimationLoop(),i._private.ready=!0,e.is.fn(l.ready)&&i.bind("ready",l.ready);for(var t=0;t<s.length;t++){var r=s[t];i.bind("ready",r)}o.readies=[],i.trigger("ready")},l.done)},e.corefn=e.Core.prototype,e.fn.core({ready:function(){return this._private.ready},initrender:function(){return this._private.initrender},registered:function(){return this._private&&null!=this._private.instanceId?!0:!1},registeredId:function(){return this._private.instanceId},getElementById:function(t){var r=this._private.id2index[t];return void 0!==r?this._private.elements[r]:new e.Collection(this)},selectionType:function(){return this._private.selectionType},hasCompoundNodes:function(){return this._private.hasCompoundNodes},addToPool:function(e){for(var t=this._private.elements,r=this._private.id2index,a=0;a<e.length;a++){var i=e[a],n=i._private.data.id,o=r[n],s=void 0!==o;s||(o=t.length,t.push(i),r[n]=o,i._private.index=o)}return this},removeFromPool:function(e){for(var t=this._private.elements,r=this._private.id2index,a=0;a<e.length;a++){var i=e[a],n=i._private.data.id,o=r[n],s=void 0!==o;if(s){delete this._private.id2index[n],t.splice(o,1);for(var l=o;l<t.length;l++){var c=t[l]._private.data.id;r[c]--}}}},container:function(){return this._private.options.container},options:function(){return e.util.copy(this._private.options)},json:function(){var e={},t=this;return e.elements={},t.elements().each(function(t,r){var a=r.group();e.elements[a]||(e.elements[a]=[]),e.elements[a].push(r.json())}),e.style=t.style().json(),e.scratch=t.scratch(),e.zoomingEnabled=t._private.zoomingEnabled,e.userZoomingEnabled=t._private.userZoomingEnabled,e.panningEnabled=t._private.panningEnabled,e.layout=t._private.options.layout,e.renderer=t._private.options.renderer,e.hideEdgesOnViewport=t._private.options.hideEdgesOnViewport,e}})}(cytoscape),function(e,t){e.fn.core({add:function(t){var r,a=this;if(e.is.elementOrCollection(t)){var i=t;if(i._private.cy===a)r=i.restore();else{for(var n=[],o=0;o<i.length;o++){var s=i[o];n.push(s.json())}r=new e.Collection(a,n)}}else if(e.is.array(t)){var n=t;r=new e.Collection(a,n)}else if(e.is.plainObject(t)&&(e.is.array(t.nodes)||e.is.array(t.edges))){for(var l=t,n=[],c=["nodes","edges"],o=0,p=c.length;p>o;o++){var d=c[o],u=l[d];if(e.is.array(u))for(var h=0,v=u.length;v>h;h++){var g=u[h],f=e.util.extend({},g,{group:d});n.push(f)}}r=new e.Collection(a,n)}else{var g=t;r=new e.Element(a,g).collection()}return r},remove:function(t){if(e.is.elementOrCollection(t))t=t;else if(e.is.string(t)){var r=t;t=this.$(r)}return t.remove()},load:function(r,a,i){function n(){s.one("layoutready",function(e){s.notifications(!0),s.trigger(e),s.notify({type:"load",collection:s.elements(),style:s._private.style}),s.one("load",a),s.trigger("load")}).one("layoutstop",function(){s.one("done",i),s.trigger("done")}),s.layout(s._private.options.layout)}function o(e){var t=!document||"interactive"!==document.readyState&&"complete"!==document.readyState?o:e;setTimeout(t,9,e)}var s=this,l=s.elements();l.length>0&&l.remove(),s.notifications(!1);return null!=r&&(e.is.plainObject(r)||e.is.array(r))&&s.add(r),t?o(n):n(),this}})}(cytoscape,"undefined"==typeof window?null:window),function(e){e.fn.core({addToAnimationPool:function(e){for(var t=this,r=t._private.aniEles,a=[],i=0;i<r.length;i++){var n=r[i]._private.data.id;a[n]=!0}for(var i=0;i<e.length;i++){var o=e[i],n=o._private.data.id;a[n]||r.push(o)}},startAnimationLoop:function(){function t(){function e(){p(function(e){r(e),t()},d)}l?setTimeout(function(){e()},s):e()}function r(t){t=+new Date;for(var r=o._private.aniEles,i=0;i<r.length;i++){var n=r[i],s=n._private.animation.current,l=n._private.animation.queue;if(0===s.length){var c=l,p=c.length>0?c.shift():null;null!=p&&(p.callTime=+new Date,s.push(p))}for(var d=[],u=0;u<s.length;u++){var h=s[u];a(n,h,t),s[u].done&&(d.push(h),s.splice(u,1),u--)}for(var u=0;u<d.length;u++){var h=d[u],v=h.params.complete;e.is.fn(v)&&v.apply(n,[t])}}r.length>0&&o.notify({type:"draw",collection:r});for(var u=0;u<r.length;u++){var n=r[u],l=n._private.animation.queue,s=n._private.animation.current,g=s.length>0||l.length>0;g||(r.splice(u,1),u--)}}function a(t,r,a){var s,l=o._private.style,c=r.properties,p=r.params,d=r.callTime;if(s=0===r.duration?1:Math.min(1,(a-d)/r.duration),0>s?s=0:s>1&&(s=1),null==c.delay){var u=r.startPosition,h=c.position,v=t._private.position;if(h&&(i(u.x,h.x)&&(v.x=n(u.x,h.x,s)),i(u.y,h.y)&&(v.y=n(u.y,h.y,s))),c.css)for(var g=e.style.properties,f=0;f<g.length;f++){var y=g[f].name,m=c.css[y];if(void 0!==m){var b=r.startStyle[y],w=n(b,m,s);l.applyBypass(t,y,w)}}}return e.is.fn(p.step)&&p.step.apply(t,[a]),s>=1&&(r.done=!0),s}function i(t,r){return null==t||null==r?!1:e.is.number(t)&&e.is.number(r)?!0:t&&r?!0:!1}function n(t,r,a){function i(e,t){var r=t-e,i=e;return Math.round(a*r+i)}if(0>a?a=0:a>1&&(a=1),e.is.number(t)&&e.is.number(r))return t+(r-t)*a;if(e.is.number(t[0])&&e.is.number(r[0])){var n=t,o=r,s=i(n[0],o[0]),l=i(n[1],o[1]),c=i(n[2],o[2]);return"rgb("+s+", "+l+", "+c+")"}return void 0}var o=this,s=1e3/60,l=!1,c=!0;o._private.aniEles=[];var p="undefined"==typeof window?function(){}:window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;null!=p&&c||(p=function(e){window.setTimeout(function(){e(+new Date)},s)});var d=o.container();t()}})}(cytoscape),function(e){e.fn.core({data:e.define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeData:e.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0}),batchData:e.define.batchData({field:"data",event:"data",triggerFnName:"trigger",immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateMappers:!0}),scratch:e.define.data({field:"scratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeScratch:e.define.removeData({field:"scratch",triggerEvent:!1})})}(cytoscape),function(e){e.fn.core({on:e.define.on(),one:e.define.on({unbindSelfOnTrigger:!0}),once:e.define.on({unbindAllBindersOnTrigger:!0}),off:e.define.off(),trigger:e.define.trigger()}),e.corefn.bind=e.corefn.on,e.corefn.unbind=e.corefn.off,e.define.event.aliasesOn(e.corefn)}(cytoscape),function(e){e.fn.core({png:function(e){var t=this._private.renderer;return e=e||{},t.png(e)}})}(cytoscape),function(e){e.fn.core({layout:function(e){var t=this;return this._private.layoutRunning?this:(null==e&&(e=this._private.options.layout),this.initLayout(e),t.trigger("layoutstart"),this._private.layoutRunning=!0,this.one("layoutstop",function(){this._private.layoutRunning=!1}),this._private.layout.run(),this)},initLayout:function(t){if(null==t)return void e.util.error("Layout options must be specified to run a layout");if(null==t.name)return void e.util.error("A `name` must be specified to run a layout");var r=t.name,a=e.extension("layout",r);return null==a?void e.util.error("Can not apply layout: No such layout `%s` found; did you include its JS file?",r):(this._private.layout=new a(e.util.extend({},t,{renderer:this._private.renderer,cy:this})),void(this._private.options.layout=t))}})}(cytoscape),function(e){e.fn.core({notify:function(t){if(this._private.notificationsEnabled){var r=this.renderer(),a=this;if(e.is.element(t.collection)){var i=t.collection;t.collection=new e.Collection(a,[i])}else if(e.is.array(t.collection)){var n=t.collection;t.collection=new e.Collection(a,n)}r.notify(t)}},notifications:function(e){var t=this._private;return void 0===e?t.notificationsEnabled:void(t.notificationsEnabled=e?!0:!1)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)}})}(cytoscape),function(e){e.fn.core({renderTo:function(e,t,r){var a=this._private.renderer;return a.renderTo(e,t,r),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify({type:"draw"}),this},initRenderer:function(t){var r=this,a=e.extension("renderer",t.name);return null==a?void e.util.error("Can not initialise: No such renderer `%s` found; did you include its JS file?",t.name):void(this._private.renderer=new a(e.util.extend({},t,{cy:r,style:r._private.style})))}})}(cytoscape),function(e){e.fn.core({collection:function(t){return e.is.string(t)?this.$(t):e.is.elementOrCollection(t)?t.collection():new e.Collection(this)},nodes:function(e){var t=this.$("node");return e?t.filter(e):t},edges:function(e){var t=this.$("edge");return e?t.filter(e):t},$:function(t){var r=new e.Collection(this,this._private.elements);return t?r.filter(t):r}}),e.corefn.elements=e.corefn.filter=e.corefn.$}(cytoscape),function(e){e.fn.core({style:function(){return this._private.style}})}(cytoscape),function(e){e.fn.core({panningEnabled:function(e){return void 0===e?this._private.panningEnabled:(this._private.panningEnabled=e?!0:!1,this)},userPanningEnabled:function(e){return void 0===e?this._private.userPanningEnabled:(this._private.userPanningEnabled=e?!0:!1,this)},zoomingEnabled:function(e){return void 0===e?this._private.zoomingEnabled:(this._private.zoomingEnabled=e?!0:!1,this)},userZoomingEnabled:function(e){return void 0===e?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=e?!0:!1,this)},boxSelectionEnabled:function(e){return void 0===e?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=e?!0:!1,this)},pan:function(){var t,r,a,i,n,o=arguments,s=this._private.pan;switch(o.length){case 0:return s;case 1:if(!this._private.panningEnabled)return this;if(e.is.string(o[0]))return t=o[0],s[t];e.is.plainObject(o[0])&&(a=o[0],i=a.x,n=a.y,e.is.number(i)&&(s.x=i),e.is.number(n)&&(s.y=n),this.trigger("pan"));break;case 2:if(!this._private.panningEnabled)return this;t=o[0],r=o[1],"x"!==t&&"y"!==t||!e.is.number(r)||(s[t]=r),this.trigger("pan")}return this.notify({type:"viewport"}),this},panBy:function(){var t,r,a,i,n,o=arguments,s=this._private.pan;if(!this._private.panningEnabled)return this;switch(o.length){case 1:e.is.plainObject(o[0])&&(a=o[0],i=a.x,n=a.y,e.is.number(i)&&(s.x+=i),e.is.number(n)&&(s.y+=n),this.trigger("pan"));
break;case 2:t=o[0],r=o[1],"x"!==t&&"y"!==t||!e.is.number(r)||(s[t]+=r),this.trigger("pan")}return this.notify({type:"viewport"}),this},fit:function(t,r){if(e.is.number(t)&&void 0===r&&(r=t,t=void 0),!this._private.panningEnabled||!this._private.zoomingEnabled)return this;if(e.is.string(t)){var a=t;t=this.$(a)}else e.is.elementOrCollection(t)||(t=this.elements());var i,n=t.boundingBox(),o=this.style(),s=parseFloat(o.containerCss("width")),l=parseFloat(o.containerCss("height"));return r=e.is.number(r)?r:0,!isNaN(s)&&!isNaN(l)&&t.length>0&&(i=this._private.zoom=Math.min((s-2*r)/n.w,(l-2*r)/n.h),i=i>this._private.maxZoom?this._private.maxZoom:i,i=i<this._private.minZoom?this._private.minZoom:i,this._private.pan={x:(s-i*(n.x1+n.x2))/2,y:(l-i*(n.y1+n.y2))/2},this.trigger("pan zoom"),this.notify({type:"viewport"})),this},minZoom:function(t){return void 0===t?this._private.minZoom:(e.is.number(t)&&(this._private.minZoom=t),this)},maxZoom:function(t){return void 0===t?this._private.maxZoom:(e.is.number(t)&&(this._private.maxZoom=t),this)},zoom:function(t){var r,a;if(void 0===t)return this._private.zoom;if(e.is.number(t))a=t;else if(e.is.plainObject(t)){if(a=t.level,t.position){var i=t.position,n=this._private.pan,o=this._private.zoom;r={x:i.x*o+n.x,y:i.y*o+n.y}}else t.renderedPosition&&(r=t.renderedPosition);if(r&&!this._private.panningEnabled)return this}if(!this._private.zoomingEnabled)return this;if(!e.is.number(a)||r&&(!e.is.number(r.x)||!e.is.number(r.y)))return this;if(a=a>this._private.maxZoom?this._private.maxZoom:a,a=a<this._private.minZoom?this._private.minZoom:a,r){var s=this._private.pan,l=this._private.zoom,c=a,p={x:-c/l*(r.x-s.x)+r.x,y:-c/l*(r.y-s.y)+r.y};this._private.zoom=a,this._private.pan=p;var d=s.x!==p.x||s.y!==p.y;this.trigger("zoom"+(d?" pan":""))}else this._private.zoom=a,this.trigger("zoom");return this.notify({type:"viewport"}),this},boundingBox:function(e){var t=this.$(e);return t.boundingBox()},center:function(t){if(!this._private.panningEnabled||!this._private.zoomingEnabled)return this;if(e.is.string(t)){var r=t;t=cy.elements(r)}else e.is.elementOrCollection(t)||(t=cy.elements());var a=t.boundingBox(),i=this.style(),n=parseFloat(i.containerCss("width")),o=parseFloat(i.containerCss("height")),s=this._private.zoom;return this.pan({x:(n-s*(a.x1+a.x2))/2,y:(o-s*(a.y1+a.y2))/2}),this.trigger("pan"),this.notify({type:"viewport"}),this},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.pan({x:0,y:0}),this._private.maxZoom>1&&this._private.minZoom<1&&this.zoom(1),this.notify({type:"viewport"}),this):this}})}(cytoscape),function(e){e.fn.collection=e.fn.eles=function(t){for(var r in t){var a=t[r];e.Collection.prototype[r]=a}};var t={prefix:{nodes:"n",edges:"e"},id:{nodes:0,edges:0},generate:function(t,r,a){var i=e.is.element(r)?r._private:r,n=i.group,o=null!=a?a:this.prefix[n]+this.id[n];if(t.getElementById(o).empty())this.id[n]++;else for(;!t.getElementById(o).empty();)o=this.prefix[n]+ ++this.id[n];return o}};e.Element=function(t,r,a){if(!(this instanceof e.Element))return new e.Element(t,r,a);var i=this;if(a=void 0===a||a?!0:!1,void 0===t||void 0===r||!e.is.core(t))return void e.util.error("An element must have a core reference and parameters set");if("nodes"!==r.group&&"edges"!==r.group)return void e.util.error("An element must be of type `nodes` or `edges`; you specified `"+r.group+"`");if(this.length=1,this[0]=this,this._private={cy:t,single:!0,data:r.data||{},layoutData:{},position:r.position||{},autoWidth:void 0,autoHeight:void 0,listeners:[],group:r.group,style:{},rstyle:{},styleCxts:[],removed:!0,selected:r.selected?!0:!1,selectable:void 0===r.selectable?!0:r.selectable?!0:!1,locked:r.locked?!0:!1,grabbed:!1,grabbable:void 0===r.grabbable?!0:r.grabbable?!0:!1,active:!1,classes:{},animation:{current:[],queue:[]},rscratch:{},scratch:{},edges:[],children:[]},r.renderedPosition){var n=r.renderedPosition,o=t.pan(),s=t.zoom();this._private.position={x:(n.x-o.x)/s,y:(n.y-o.y)/s}}if(e.is.string(r.classes))for(var l=r.classes.split(/\s+/),c=0,p=l.length;p>c;c++){var d=l[c];d&&""!==d&&(i._private.classes[d]=!0)}r.css&&t.style().applyBypass(this,r.css),(void 0===a||a)&&this.restore()},e.Collection=function(r,a){if(!(this instanceof e.Collection))return new e.Collection(r,a);if(void 0===r||!e.is.core(r))return void e.util.error("A collection must have a reference to the core");var i={},n=[],o=!1;if(a){if(a.length>0&&e.is.plainObject(a[0])&&!e.is.element(a[0])){o=!0;for(var s=[],l={},c=0,p=a.length;p>c;c++){var d=a[c];null==d.data&&(d.data={});var u=d.data;if(null==u.id)u.id=t.generate(r,d);else if(0!=r.getElementById(u.id).length||l[u.id])continue;var h=new e.Element(r,d,!1);s.push(h),l[u.id]=!0}a=s}}else a=[];for(var c=0,p=a.length;p>c;c++){var v=a[c];if(v){var g=v._private.data.id;i[g]||(i[g]=v,n.push(v))}}for(var c=0,p=n.length;p>c;c++)this[c]=n[c];this.length=n.length,this._private={cy:r,ids:i},o&&this.restore()},e.elefn=e.elesfn=e.Element.prototype=e.Collection.prototype,e.elesfn.cy=function(){return this._private.cy},e.elesfn.element=function(){return this[0]},e.elesfn.collection=function(){return e.is.collection(this)?this:new e.Collection(this._private.cy,[this])},e.elesfn.json=function(){var t=this.element();if(null==t)return void 0;var r=t._private,a=e.util.copy({data:r.data,position:r.position,group:r.group,bypass:r.bypass,removed:r.removed,selected:r.selected,selectable:r.selectable,locked:r.locked,grabbed:r.grabbed,grabbable:r.grabbable,classes:""}),i=[];for(var n in r.classes)i.push(n);for(var o=0;o<i.length;o++){var n=i[o];a.classes+=n+(o<i.length-1?" ":"")}return a},e.elesfn.jsons=function(){for(var e=[],t=0;t<this.length;t++){var r=this[t],a=r.json();e.push(a)}return e},e.elesfn.restore=function(r){var a=this,i=[],n=a.cy();void 0===r&&(r=!0);for(var o=[],s=[],l=[],c=0,p=0,d=0,u=a.length;u>d;d++){var h=a[d];h.isNode()?(s.push(h),c++):(l.push(h),p++)}o=s.concat(l);for(var d=0,u=o.length;u>d;d++){var h=o[d];if(h.removed()){var v=h._private,g=v.data;if(void 0===g.id)g.id=t.generate(n,h);else{if(e.is.emptyString(g.id)||!e.is.string(g.id))continue;if(0!=n.getElementById(g.id).length)continue}{g.id}if(h.isEdge()){for(var f=h,y=["source","target"],m=y.length,b=0;m>b;b++){var w=y[b],x=g[w];null!=x&&""!==x&&!n.getElementById(x).empty()}var _=n.getElementById(g.source),E=n.getElementById(g.target);_._private.edges.push(f),E._private.edges.push(f)}v.ids={},v.ids[g.id]=h,v.removed=!1,n.addToPool(h),i.push(h)}}for(var d=0;c>d;d++){var S=o[d],g=S._private.data,P=(g.id,S._private.data.parent),M=null!=P;if(M){var k=n.getElementById(P);if(k.empty())delete g.parent;else{for(var D=!1,N=k;!N.empty();){if(S.same(N)){D=!0,delete g.parent;break}N=N.parent()}D||(k[0]._private.children.push(S),n._private.hasCompoundNodes=!0)}}}if(i=new e.Collection(n,i),i.length>0){var C=i.add(i.connectedNodes()).add(i.parent());C.updateStyle(r),r?i.rtrigger("add"):i.trigger("add")}return a},e.elesfn.removed=function(){var e=this[0];return e&&e._private.removed},e.elesfn.inside=function(){var e=this[0];return e&&!e._private.removed},e.elesfn.remove=function(t){function r(e){for(var t=e._private.edges,r=0;r<t.length;r++)i(t[r])}function a(e){for(var t=e._private.children,r=0;r<t.length;r++)i(t[r])}function i(e){var t=p[e.id()];t||(p[e.id()]=!0,e.isNode()?(c.push(e),r(e),a(e)):c.unshift(e))}function n(e,t){for(var r=e._private.edges,a=0;a<r.length;a++){var i=r[a];if(t===i){r.splice(a,1);break}}}function o(e,t){t=t[0],e=e[0];for(var r=e._private.children,a=0;a<r.length;a++)if(r[a][0]===t[0]){r.splice(a,1);break}}var s=this,l=[],c=[],p={},d=s._private.cy;void 0===t&&(t=!0);for(var u=0,h=s.length;h>u;u++){var v=s[u];i(v)}for(var u=0;u<c.length;u++){var v=c[u];if(v._private.removed=!0,d.removeFromPool(v),l.push(v),v.isEdge()){var g=v.source()[0],f=v.target()[0];n(g,v),n(f,v)}else{var y=v.parent();0!==y.length&&o(y,v)}}var m=d._private.elements;d._private.hasCompoundNodes=!1;for(var u=0;u<m.length;u++){var v=m[u];if(v.isParent()){d._private.hasCompoundNodes=!0;break}}var b=new e.Collection(this.cy(),l);b.size()>0&&(t&&this.cy().notify({type:"remove",collection:b}),b.trigger("remove"));for(var w={},u=0;u<c.length;u++){var v=c[u],x="nodes"===v._private.group,_=v._private.data.parent;if(x&&void 0!==_&&!w[_]){w[_]=!0;var y=d.getElementById(_);y&&0!==y.length&&!y._private.removed&&0===y.children().length&&y.updateStyle()}}return this}}(cytoscape),function(e){e.fn.eles({animated:function(){var e=this[0];return e?e._private.animation.current.length>0:void 0},clearQueue:function(){for(var e=0;e<this.length;e++){var t=this[e];t._private.animation.queue=[]}return this},delay:function(e,t){return this.animate({delay:e},{duration:e,complete:t}),this},animate:function(e,t){var r,a=+new Date,i=this._private.cy,n=i.style();switch(void 0===t&&(t={}),void 0===t.duration&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200}if(null==e||null==e.position&&null==e.renderedPosition&&null==e.css&&null==e.delay)return this;if(e.css&&(e.css=n.getValueStyle(e.css)),e.renderedPosition){var o=e.renderedPosition,s=i.pan(),l=i.zoom();e.position={x:(o.x-s.x)/l,y:(o.y-s.y)/l}}for(var c=0;c<this.length;c++){var p=this[c],d=p._private.position,u={x:d.x,y:d.y},h=n.getValueStyle(p);r=p.animated()&&(void 0===t.queue||t.queue)?p._private.animation.queue:p._private.animation.current,r.push({properties:e,duration:t.duration,params:t,callTime:a,startPosition:u,startStyle:h})}return i.addToAnimationPool(this),this},stop:function(e,t){for(var r=0;r<this.length;r++){for(var a=this[r],i=a._private.animation.current,n=0;n<i.length;n++){var o=i[n];t&&(o.duration=0)}e&&(a._private.animation.queue=[])}return this.cy().notify({collection:this,type:"draw"}),this}})}(cytoscape),function(e){e.fn.eles({addClass:function(t){t=t.split(/\s+/);for(var r=this,a=[],i=0;i<t.length;i++){var n=t[i];if(!e.is.emptyString(n))for(var o=0;o<r.length;o++){var s=r[o],l=s._private.classes[n];s._private.classes[n]=!0,l||a.push(s)}}return a.length>0&&new e.Collection(this._private.cy,a).updateStyle(),r.trigger("class"),r},hasClass:function(e){var t=this[0];return null!=t&&t._private.classes[e]},toggleClass:function(t,r){for(var a=t.split(/\s+/),i=this,n=[],o=0,s=i.length;s>o;o++)for(var l=i[o],c=0;c<a.length;c++){var p=a[c];if(!e.is.emptyString(p)){var d=l._private.classes[p],u=r||void 0===r&&!d;u?(l._private.classes[p]=!0,d||n.push(l)):(l._private.classes[p]=!1,d&&n.push(l))}}return n.length>0&&new e.Collection(this._private.cy,n).updateStyle(),i.trigger("class"),i},removeClass:function(t){t=t.split(/\s+/);for(var r=this,a=[],i=0;i<r.length;i++)for(var n=r[i],o=0;o<t.length;o++){var s=t[o];if(s&&""!==s){var l=n._private.classes[s];delete n._private.classes[s],l&&a.push(n)}}return a.length>0&&new e.Collection(r._private.cy,a).updateStyle(),r.trigger("class"),r}})}(cytoscape),function(e){e.fn.eles({allAre:function(e){return this.filter(e).length===this.length},is:function(e){return this.filter(e).length>0},same:function(e){return e=this.cy().collection(e),this.length!==e.length?!1:this.intersect(e).length===this.length},anySame:function(e){return e=this.cy().collection(e),this.intersect(e).length>0},allAreNeighbors:function(e){return e=this.cy().collection(e),this.neighborhood().intersect(e).length===e.length}})}(cytoscape),function(e){var t=1.4,r=1;e.fn.eles({updateStyle:function(e){var t=this._private.cy,r=t.style();return e=e||void 0===e?!0:!1,r.apply(this),e?this.rtrigger("style"):this.trigger("style"),this},updateMappers:function(e){var t=this._private.cy,r=t.style();return e=e||void 0===e?!0:!1,r.updateMappers(this),e?this.rtrigger("style"):this.trigger("style"),this},data:e.define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateMappers:!0}),removeData:e.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateMappers:!0}),batchData:e.define.batchData({field:"data",event:"data",triggerFnName:"trigger",immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateMappers:!0}),scratch:e.define.data({field:"scratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeScratch:e.define.removeData({field:"scratch",triggerEvent:!1}),rscratch:e.define.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:e.define.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];return e?e._private.data.id:void 0},position:e.define.data({field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"rtrigger",allowGetting:!0,validKeys:["x","y"]}),positions:function(t){if(e.is.plainObject(t))this.position(t);else if(e.is.fn(t)){for(var r=t,a=0;a<this.length;a++){var i=this[a],t=r.apply(i,[a,i]);if(t&&!i.locked()){var n=i._private.position;n.x=t.x,n.y=t.y}}this.rtrigger("position")}return this},renderedPosition:function(t,r){var a=this[0],i=this.cy(),n=i.zoom(),o=i.pan(),s=e.is.plainObject(t)?t:void 0,l=void 0!==s||void 0!==r&&e.is.string(t);if(a&&a.isNode()){if(!l){var c=a._private.position;return s={x:c.x*n+o.x,y:c.y*n+o.y},void 0===t?s:s[t]}for(var p=0;p<this.length;p++){var a=this[p];void 0!==r?a._private.position[t]=(r-o[t])/n:void 0!==s&&(a._private.position={x:(s.x-o.x)/n,y:(s.y-o.y)/n})}this.rtrigger("position")}return this},renderedCss:function(e){var t=this[0];if(t){var r=t.cy().style().getRenderedStyle(t);return void 0===e?r:r[e]}},css:function(t,r){var a=this.cy().style();if(e.is.plainObject(t)){var i=t;a.applyBypass(this,i),this.rtrigger("style")}else if(e.is.string(t)){if(void 0===r){var n=this[0];return n?n._private.style[t].strValue:void 0}a.applyBypass(this,t,r),this.rtrigger("style")}else if(void 0===t){var n=this[0];return n?a.getRawStyle(n):void 0}return this},removeCss:function(){for(var e=this.cy().style(),t=this,r=0;r<t.length;r++){var a=t[r];e.removeAllBypasses(a)}this.rtrigger("style")},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},visible:function(){var e=this[0];if(e){if("visible"!==e.css("visibility")||"element"!==e.css("display"))return!1;if(e.isNode()){for(var t=e.parents(),r=0;r<t.length;r++){{var a=t[r],i=a.css("visibility"),n=a.css("display");parseFloat(a.css("opacity"))}if("visible"!==i||"element"!==n)return!1}return!0}if(e.isEdge()){var o=e.source(),s=e.target();return o.visible()&&s.visible()}}},hidden:function(){var e=this[0];return e?!this.visible():void 0},transparent:function(){var e=this[0];return e?0===parseFloat(this.css("opacity")):void 0},width:function(){var e=this[0];if(e){var t=this._private.style.width;return"auto"===t.strValue?e._private.autoWidth:t.pxValue}},outerWidth:function(){var e=this[0];if(e){var a=this._private.style,i="auto"===a.width.strValue?e._private.autoWidth:a.width.pxValue,n=a["border-width"]?a["border-width"].pxValue*t+r:0;return i+n}},renderedWidth:function(){var e=this[0];if(e){var t=this.width();return t*this.cy().zoom()}},renderedOuterWidth:function(){var e=this[0];if(e){var t=this.outerWidth();return t*this.cy().zoom()}},height:function(){var e=this[0];if(e&&e.isNode()){var t=this._private.style.height;return"auto"===t.strValue?e._private.autoHeight:t.pxValue}},outerHeight:function(){var e=this[0];if(e){var a=this._private.style,i="auto"===a.height.strValue?e._private.autoHeight:a.height.pxValue,n=a["border-width"]?a["border-width"].pxValue*t+r:0;return i+n}},renderedHeight:function(){var e=this[0];if(e){var t=this.height();return t*this.cy().zoom()}},renderedOuterHeight:function(){var e=this[0];if(e){var t=this.outerHeight();return t*this.cy().zoom()}},offset:function(){var e=this[0];if(e&&e.isNode()){for(var t={x:e._private.position.x,y:e._private.position.y},r=e.parents(),a=0;a<r.length;a++){var i=r[a],n=i._private.position;t.x+=n.x,t.y+=n.y}return t}},renderedOffset:function(){var e=this[0];if(e&&e.isNode()){var t=this.offset(),r=this.cy(),a=r.zoom(),i=r.pan();return{x:t.x*a+i.x,y:t.y*a+i.y}}},boundingBox:function(t){var r=this;!t||e.is.elementOrCollection(t)&&0===t.length?r=this:e.is.string(t)?r=this.filter(t):e.is.elementOrCollection(t)&&(r=t);for(var a=1/0,i=-1/0,n=1/0,o=-1/0,s=0;s<r.length;s++){var l,c,p,d,u,h,v=r[s];if(v.isNode()){var g=v._private.position;u=g.x,h=g.y;var f=v.outerWidth(),y=f/2,m=v.outerHeight(),b=m/2;l=u-y,c=u+y,p=h-b,d=h+b,a=a>l?l:a,i=c>i?c:i,n=n>p?p:n,o=d>o?d:o}else{var w=v.source()[0]._private.position,x=v.target()[0]._private.position,_=v._private.rstyle;if(u=_.labelX,h=_.labelY,l=w.x,c=x.x,p=w.y,d=x.y,l>c){var E=l;l=c,c=E}if(p>d){var E=p;p=d,d=E}a=a>l?l:a,i=c>i?c:i,n=n>p?p:n,o=d>o?d:o;for(var S=_.bezierPts||[],f=v._private.style.width.value,P=0;P<S.length;P++){var M=S[P];a=M.x-f<a?M.x-f:a,i=M.x+f>i?M.x+f:i,n=M.y-f<n?M.y-f:n,o=M.y+f>o?M.y+f:o}}var k=v._private.style,D=k.content.value,N=k["font-size"],C=k["text-halign"],T=k["text-valign"],I=v._private.rstyle.labelWidth;if(D&&N&&void 0!=I&&C&&T){var z,B,X,R,Y=N.value,L=I;switch(C.value){case"left":z=l-L,B=l;break;case"center":z=u-L/2,B=u+L/2;break;case"right":z=c,B=c+L}switch(v.isEdge()&&(z=u-L/2,B=u+L/2),T.value){case"top":X=p-Y,R=p;break;case"center":X=h-Y/2,R=h+Y/2;break;case"bottom":X=d,R=d+Y}v.isEdge()&&(X=h-Y/2,R=h+Y/2),a=a>z?z:a,i=B>i?B:i,n=n>X?X:n,o=R>o?R:o}}return{x1:a,x2:i,y1:n,y2:o,w:i-a,h:o-n}}})}(cytoscape),function(e){function t(e){return function(){var t=this;if(0!==t.length&&t.isNode()&&!t.removed()){for(var r=0,a=t[0],i=a._private.edges,n=0;n<i.length;n++){var o=i[n];r+=e(a,o)}return r}}}function r(e,t){return function(){for(var r=void 0,a=this.nodes(),i=0;i<a.length;i++){var n=a[i],o=n[e]();void 0===o||void 0!==r&&!t(o,r)||(r=o)}return r}}e.fn.eles({degree:t(function(e,t){return t.source().same(t.target())?2:1}),indegree:t(function(e,t){return t.target().same(e)?1:0}),outdegree:t(function(e,t){return t.source().same(e)?1:0})}),e.fn.eles({minDegree:r("degree",function(e,t){return t>e}),maxDegree:r("degree",function(e,t){return e>t}),minIndegree:r("indegree",function(e,t){return t>e}),maxIndegree:r("indegree",function(e,t){return e>t}),minOutdegree:r("outdegree",function(e,t){return t>e}),maxOutdegree:r("outdegree",function(e,t){return e>t})}),e.fn.eles({totalDegree:function(){for(var e=0,t=this.nodes(),r=0;r<t.length;r++)e+=t[r].degree();return e}})}(cytoscape),function(e){e.fn.eles({on:e.define.on(),one:e.define.on({unbindSelfOnTrigger:!0}),once:e.define.on({unbindAllBindersOnTrigger:!0}),off:e.define.off(),trigger:e.define.trigger(),rtrigger:function(e,t){return this.cy().notify({type:e,collection:this.filter(function(){return!this.removed()})}),this.trigger(e,t),this}}),e.elesfn.bind=e.elesfn.on,e.elesfn.unbind=e.elesfn.off,e.define.event.aliasesOn(e.elesfn)}(cytoscape),function(e){e.fn.eles({isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source().id()===this.target().id()},group:function(){var e=this[0];return e?e._private.group:void 0}})}(cytoscape),function(e){e.fn.eles({each:function(t){if(e.is.fn(t))for(var r=0;r<this.length;r++){var a=this[r],i=t.apply(a,[r,a]);if(i===!1)break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(t,r){var a=[],i=this.length;null==r&&(r=i),0>t&&(t=i+t);for(var n=t;n>=0&&r>n&&i>n;n++)a.push(this[n]);return new e.Collection(this.cy(),a)},size:function(){return this.length},eq:function(e){return this[e]},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()}})}(cytoscape),function(e){function t(e){return function(){var t=arguments;if(2===t.length){var r=t[0],a=t[1];this.bind(e.event,r,a)}else if(1===t.length){var a=t[0];this.bind(e.event,a)}else if(0===t.length){for(var i=0;i<this.length;i++){var n=this[i];(!e.ableField||n._private[e.ableField])&&(n._private[e.field]=e.value)}this.updateStyle(),this.trigger(e.event)}return this}}function r(r){e.elesfn[r.field]=function(){var e=this[0];return e?e._private[r.field]:void 0},e.elesfn[r.on]=t({event:r.on,field:r.field,ableField:r.ableField,value:!0}),e.elesfn[r.off]=t({event:r.off,field:r.field,ableField:r.ableField,value:!1})}r({field:"locked",on:"lock",off:"unlock"}),r({field:"grabbable",on:"grabify",off:"ungrabify"}),r({field:"selected",ableField:"selectable",on:"select",off:"unselect"}),r({field:"selectable",on:"selectify",off:"unselectify"}),e.elesfn.grabbed=function(){var e=this[0];return e?e._private.grabbed:void 0},r({field:"active",on:"activate",off:"unactivate"}),e.elesfn.inactive=function(){var e=this[0];return e?!e._private.active:void 0}}(cytoscape),function(e){function t(t){return function(r){for(var a=[],i=this.edges(),n=this._private.cy,o=0;o<i.length;o++){var s=i[o],l=s._private.data[t.attr],c=n.getElementById(l);c.length>0&&a.push(c)}return new e.Collection(n,a).filter(r)}}function r(t){return function(r){var a=[],i=this._private.cy,n=t||{};e.is.string(r)&&(r=i.$(r));for(var o=r.connectedEdges(),s=this._private.ids,l=0;l<o.length;l++){var c,p=o[l],d=p._private.data;if(n.thisIs){var u=d[n.thisIs];c=s[u]}else c=s[d.source]||s[d.target];c&&a.push(p)}return new e.Collection(i,a)}}function a(t){var r={codirected:!1};return t=e.util.extend({},r,t),function(r){for(var a=this._private.cy,i=[],n=this.edges(),o=t,s=0;s<n.length;s++)for(var l=n[s],c=l.source()[0],p=c.id(),d=l.target()[0],u=d.id(),h=c._private.edges,v=0;v<h.length;v++){var g=h[v],f=g._private.data,y=f.target,m=f.source,b=y===u&&m===p,w=p===y&&u===m;(o.codirected&&b||!o.codirected&&(b||w))&&i.push(g)}return new e.Collection(a,i).filter(r)}}e.fn.eles({nodes:function(e){return this.filter(function(e,t){return t.isNode()}).filter(e)},edges:function(e){return this.filter(function(e,t){return t.isEdge()}).filter(e)},filter:function(t){var r=this._private.cy;if(e.is.fn(t)){for(var a=[],i=0;i<this.length;i++){var n=this[i];t.apply(n,[i,n])&&a.push(n)}return new e.Collection(r,a)}return e.is.string(t)||e.is.elementOrCollection(t)?new e.Selector(t).filter(this):void 0===t?this:new e.Collection(r)},not:function(t){var r=this._private.cy;if(t){e.is.string(t)&&(t=this.filter(t));for(var a=[],i=0;i<this.length;i++){var n=this[i],o=t._private.ids[n.id()];o||a.push(n)}return new e.Collection(r,a)}return this},intersect:function(t){var r=this._private.cy;if(e.is.string(t)){var a=t;return this.filter(a)}var i=[],n=this,o=t,s=this.length<t.length,l=s?n._private.ids:o._private.ids,c=s?o._private.ids:n._private.ids;for(var p in l){var d=c[p];d&&i.push(d)}return new e.Collection(r,i)},add:function(t){function r(e){e&&(s[e.id()]||(o.push(e),s[e.id()]=!0))}var a=this,i=this._private.cy;if(!t)return this;if(e.is.string(t)){var n=t;t=i.elements(n)}for(var o=[],s={},l=0;l<a.length;l++){var c=a[l];r(c)}for(var l=0;l<t.length;l++){var c=t[l];r(c)}return new e.Collection(i,o)}}),e.fn.eles({breadthFirstSearch:function(t,r){t=t||function(){};for(var a=this._private.cy,i=this,n=[],o={},s={},l={},c=[],p=0;p<i.length;p++)i[p].isNode()&&(n.unshift(i[p]),o[i[p].id()]=!0,s[i[p].id()]=0,c.push(i[p]));for(p=0;0!==n.length;){for(var d=n.shift(),u=0,h=l[d.id()];h;)u++,h=l[h];s[d.id()]=u;var v=t.call(d,p,u);if(p++,v===!0)return new e.Collection(a,[d]);if(v===!1)break;for(var g=d.connectedEdges(r?'[source = "'+d.id()+'"]':void 0),f=0;f<g.length;f++){var y=g[f],m=y.connectedNodes('[id != "'+d.id()+'"]');0!==m.length&&(m=m[0],o[m.id()]||(o[m.id()]=!0,n.unshift(m),l[m.id()]=d.id(),c.push(m),c.push(y)))}}return new e.Collection(a,c)},depthFirstSearch:function(t,r){function a(e){var t=e.id();return l[t]||c[t]||p[t]||d[t]}t=t||function(){};for(var i=this._private.cy,n=this,o=[],s=[],l={},c={},p={},d={},u={},h=0;h<n.length;h++)n[h].isNode()&&(o.push(n[h]),s[n[h].id()]=!0);for(;0!==o.length;){var v=o[o.length-1],g=t.call(v),f=!1;if(g===!0)return new e.Collection(i,[v]);for(var y=v.connectedEdges(r?'[source = "'+v.id()+'"]':void 0),h=0;h<y.length;h++){var m=y[h];if(!a(m)){var b=m.connectedNodes('[id != "'+v.id()+'"]');if(0!==b.length){b=b[0];var w=b.id();if(!s[w]&&!u[w]){d[w]=!0,s[w]=!0,o.push(b),f=!0;break}s[w]?c[w]=!0:p[w]=!0}}}f||(u[v.id()]=!0,o.pop())}},roots:function(t){for(var r=this,a=[],i=0;i<r.length;i++){var n=r[i];if(n.isNode()){var o=n.connectedEdges('[target = "'+n.id()+'"][source != "'+n.id()+'"]').length>0;o||a.push(n)}}return new e.Collection(this._private.cy,a).filter(t)},kruskal:function(t){function r(e){for(var t=0;t<i.length;t++){var r=i[t];if(r.anySame(e))return{eles:r,index:t}}}t=t||function(){return 1};for(var a=new e.Collection(this._private.cy,[]),i=[],n=this.nodes(),o=0;o<n.length;o++)i.push(n[o].collection());for(var s=this.edges(),l=s.toArray().sort(function(e,r){var a=t.call(e),i=t.call(r);return a-i}),o=0;o<l.length;o++){var c=l[o],p=c.source()[0],d=c.target()[0],u=r(p),h=r(d);u.eles!==h.eles&&(a=a.add(c),i[u.index]=u.eles.add(h.eles),i.splice(h.index,1))}return n.add(a)},dijkstra:function(t,r,a){var i=this._private.cy;if(a=e.is.fn(r)?a:r,a=void 0===a||a,r=e.is.fn(r)?r:function(){return 1},0===this.length||!t||!e.is.elementOrCollection(t)||0===t.length)return new e.Collection(i,[]);var n=this[0];t=t[0];for(var o={},s={},l=i.nodes(),c=0;c<l.length;c++)o[l[c].id()]=1/0;o[n.id()]=0;for(var p=l,d=function(e){var t,r=1/0;for(var a in o)o[a]<r&&0!==e.$("#"+a).length&&(r=o[a],t=a);return t},u=function(e,t){for(var a,i=e.edgesWith(t),n=1/0,o=0;o<i.length;o++){var s=i[o],l=r.call(s);n>l&&(n=l,a=s)}return{edge:a,dist:n}};0!==p.length;){var h=d(p),v=p.filter("#"+h);if(0!==v.length){if(p=p.not(v),v.same(t))break;if(o[h]===Math.Infinite)break;for(var g=v.neighborhood().nodes(),c=0;c<g.length;c++){var f=g[c],y=f.id(),m=u(v,f),b=o[h]+m.dist;b<o[y]&&(o[y]=b,s[y]={node:f,edge:m.edge})}}}}}),e.elesfn.bfs=e.elesfn.breadthFirstSearch,e.elesfn.dfs=e.elesfn.depthFirstSearch,e.fn.eles({neighborhood:function(t){for(var r=[],a=this._private.cy,i=this.nodes(),n=0;n<i.length;n++)for(var o=i[n],s=o.connectedEdges(),l=0;l<s.length;l++){var c=s[l],p=c.connectedNodes().not(o);p.length>0&&r.push(p[0]),r.push(c[0])}return new e.Collection(a,r).filter(t)},closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}}),e.fn.eles({source:t({attr:"source"}),target:t({attr:"target"})}),e.fn.eles({edgesWith:r(),edgesTo:r({thisIs:"source"})}),e.fn.eles({connectedEdges:function(t){for(var r=[],a=this._private.cy,i=this.nodes(),n=0;n<i.length;n++)for(var o=i[n],s=o._private.edges,l=0;l<s.length;l++){var c=s[l];r.push(c)}return new e.Collection(a,r).filter(t)},connectedNodes:function(t){for(var r=[],a=this._private.cy,i=this.edges(),n=0;n<i.length;n++){var o=i[n];r.push(o.source()[0]),r.push(o.target()[0])}return new e.Collection(a,r).filter(t)},parallelEdges:a(),codirectedEdges:a({codirected:!0}),parallelIndex:function(){var e=this[0];if(e.isEdge())for(var t=e.source()[0],r=t._private.edges,a=0,i=0;i<r.length;i++){var n=r[i],o=n===e;if(o)return a;var s=e._private.data.source===n._private.data.source&&e._private.data.target===n._private.data.target,l=e._private.data.source===n._private.data.target&&e._private.data.target===n._private.data.source,c=s||l;c&&a++}},parallelSize:function(){var e=this[0];if(e.isEdge()){for(var t=e.source()[0],r=t._private.edges,a=0,i=0;i<r.length;i++){var n=r[i],o=e._private.data.source===n._private.data.source&&e._private.data.target===n._private.data.target,s=e._private.data.source===n._private.data.target&&e._private.data.target===n._private.data.source,l=o||s;l&&a++}return a}}}),e.fn.eles({parent:function(t){for(var r=[],a=this._private.cy,i=0;i<this.length;i++){var n=this[i],o=a.getElementById(n._private.data.parent);o.size()>0&&r.push(o)}return new e.Collection(a,r).filter(t)},parents:function(t){for(var r=[],a=this.parent();a.nonempty();){for(var i=0;i<a.length;i++){var n=a[i];r.push(n)}a=a.parent()}return new e.Collection(this.cy(),r).filter(t)},children:function(t){for(var r=[],a=0;a<this.length;a++){var i=this[a];r=r.concat(i._private.children)}return new e.Collection(this.cy(),r).filter(t)},siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];return e?0!==e._private.children.length:void 0},isChild:function(){var e=this[0];return e?void 0!==e._private.data.parent&&0!==e.parent().length:void 0},descendants:function(t){function r(e){for(var t=0;t<e.length;t++){var i=e[t];a.push(i),i.children().nonempty()&&r(i.children())}}var a=[];return r(this.children()),new e.Collection(this.cy(),a).filter(t)}})}(cytoscape),function($$){$$.fn.selector=function(e){for(var t in e){var r=e[t];$$.Selector.prototype[t]=r}},$$.Selector=function(e,t){function r(){return{classes:[],colonSelectors:[],data:[],group:null,ids:[],meta:[],collection:null,filter:null,parent:null,ancestor:null,subject:null,child:null,descendant:null}}function a(e){return e.replace(new RegExp("\\\\("+l+")","g"),"")}function i(e){for(var t,r,a,i=0;i<M.length;i++){var n=M[i],o=n.name;if(!$$.is.fn(e)||e(o,n)){var s=N.match(new RegExp("^"+n.regex));if(null!=s){r=s,t=n,a=o;var l=s[0];N=N.substring(l.length);break}}}return{expr:t,match:r,name:a}}function n(){var e=N.match(/^\s+/);if(e){var t=e[0];N=N.substring(t.length)}}if(!(this instanceof $$.Selector))return new $$.Selector(e,t);void 0===t&&void 0!==e&&(t=e,e=void 0);var o=this;if(o._private={selectorText:null,invalid:!0},!t||$$.is.string(t)&&t.match(/^\s*$/))null==e?o.length=0:(o[0]=r(),o[0].group=e,o.length=1);else if($$.is.element(t)){var s=new $$.Collection(o.cy(),[t]);o[0]=r(),o[0].collection=s,o.length=1}else if($$.is.collection(t))o[0]=r(),o[0].collection=t,o.length=1;else if($$.is.fn(t))o[0]=r(),o[0].filter=t,o.length=1;else{if(!$$.is.string(t))return void $$.util.error("A selector must be created from a string; found "+t);for(var l="[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",c="(?:[\\w-]|(?:\\\\"+l+"))+",p="=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",d="\\?|\\!|\\^",u='"(?:\\\\"|[^"])+"|'+"'(?:\\\\'|[^'])+'",h=$$.util.regex.number,v=u+"|"+h,g="degree|indegree|outdegree",f="\\s*,\\s*",y=c,m="\\s+",b="\\s+>\\s+",w="\\$",x=c,_=p.split("|"),E=0;E<_.length;E++){var S=_[E];p+="|@"+S}var P=null,M={group:{query:!0,regex:"(node|edge|\\*)",populate:function(e){this.group="*"==e?e:e+"s"}},state:{query:!0,regex:"(:selected|:unselected|:locked|:unlocked|:visible|:hidden|:transparent|:grabbed|:free|:removed|:inside|:grabbable|:ungrabbable|:animated|:unanimated|:selectable|:unselectable|:parent|:child|:active|:inactive|:touch)",populate:function(e){this.colonSelectors.push(e)}},id:{query:!0,regex:"\\#("+x+")",populate:function(e){this.ids.push(a(e))}},className:{query:!0,regex:"\\.("+y+")",populate:function(e){this.classes.push(a(e))}},dataExists:{query:!0,regex:"\\[\\s*("+c+")\\s*\\]",populate:function(e){this.data.push({field:a(e)})}},dataCompare:{query:!0,regex:"\\[\\s*("+c+")\\s*("+p+")\\s*("+v+")\\s*\\]",populate:function(e,t,r){this.data.push({field:a(e),operator:t,value:r})}},dataBool:{query:!0,regex:"\\[\\s*("+d+")\\s*("+c+")\\s*\\]",populate:function(e,t){this.data.push({field:a(t),operator:e})}},metaCompare:{query:!0,regex:"\\[\\[\\s*("+g+")\\s*("+p+")\\s*("+h+")\\s*\\]\\]",populate:function(e,t,r){this.meta.push({field:a(e),operator:t,value:r})}},nextQuery:{separator:!0,regex:f,populate:function(){o[++E]=r(),P=null}},child:{separator:!0,regex:b,populate:function(){var e=r();e.parent=this,e.subject=P,o[E]=e}},descendant:{separator:!0,regex:m,populate:function(){var e=r();e.ancestor=this,e.subject=P,o[E]=e}},subject:{modifier:!0,regex:w,populate:function(){return null!=P&&this.subject!=this?($$.util.error("Redefinition of subject in selector `"+t+"`"),!1):(P=this,void(this.subject=this))}}},k=0;for(var D in M)M[k]=M[D],M[k].name=D,k++;M.length=k,o._private.selectorText=t;var N=t,E=0;for(o[0]=r(),n();;){var C=i();
if(null==C.expr)return void $$.util.error("The selector `"+t+"`is invalid");for(var T=[],k=1;k<C.match.length;k++)T.push(C.match[k]);var I=C.expr.populate.apply(o[E],T);if(I===!1)return;if(N.match(/^\s*$/))break}for(o.length=E+1,k=0;k<o.length;k++){var z=o[k];if(null!=z.subject){for(;z.subject!=z;)if(null!=z.parent){var B=z.parent,b=z;b.parent=null,B.child=b,z=B}else{if(null==z.ancestor){$$.util.error("When adjusting references for the selector `"+z+"`, neither parent nor ancestor was found");break}var X=z.ancestor,m=z;m.ancestor=null,X.descendant=m,z=X}o[k]=z.subject}}if(null!=e)for(var k=0;k<o.length;k++){if(null!=o[k].group&&o[k].group!=e)return void $$.util.error("Group `"+o[k].group+"` conflicts with implicit group `"+e+"` in selector `"+t+"`");o[k].group=e}}o._private.invalid=!1},$$.selfn=$$.Selector.prototype,$$.selfn.size=function(){return this.length},$$.selfn.eq=function(e){return this[e]},$$.selfn.find=function(){},$$.selfn.filter=function(collection,addLiveFunction){var self=this,cy=collection.cy();if(self._private.invalid)return new $$.Collection(cy);var queryMatches=function(query,element){function operandsMatch(params){for(var allDataMatches=!0,k=0;k<query[params.name].length;k++){var data=query[params.name][k],operator=data.operator,value=data.value,field=data.field,matches;if(null!=operator&&null!=value){var fieldStr=""+params.fieldValue(field),valStr=""+eval(value),caseInsensitive=!1;switch("@"==operator.charAt(0)&&(fieldStr=fieldStr.toLowerCase(),valStr=valStr.toLowerCase(),operator=operator.substring(1),caseInsensitive=!0),"="==operator&&(operator="=="),operator){case"*=":matches=fieldStr.search(valStr)>=0;break;case"$=":matches=null!=new RegExp(valStr+"$").exec(fieldStr);break;case"^=":matches=null!=new RegExp("^"+valStr).exec(fieldStr);break;default:if(caseInsensitive){var expr="fieldStr "+operator+" valStr";matches=eval(expr)}else{var expr=params.fieldRef(field)+" "+operator+" "+value;matches=eval(expr)}}}else if(null!=operator)switch(operator){case"?":matches=params.fieldTruthy(field);break;case"!":matches=!params.fieldTruthy(field);break;case"^":matches=params.fieldUndefined(field)}else matches=!params.fieldUndefined(field);if(!matches){allDataMatches=!1;break}}return allDataMatches}function confirmRelations(e,t){if(null!=e){var r=!1;t=t();for(var a=0;a<t.size();a++)if(queryMatches(e,t.eq(a))){r=!0;break}return r}return!0}if(null!=query.group&&"*"!=query.group&&query.group!=element._private.group)return!1;for(var allColonSelectorsMatch=!0,k=0;k<query.colonSelectors.length;k++){var sel=query.colonSelectors[k],renderer=cy.renderer();switch(sel){case":selected":allColonSelectorsMatch=element.selected();break;case":unselected":allColonSelectorsMatch=!element.selected();break;case":selectable":allColonSelectorsMatch=element.selectable();break;case":unselectable":allColonSelectorsMatch=!element.selectable();break;case":locked":allColonSelectorsMatch=element.locked();break;case":unlocked":allColonSelectorsMatch=!element.locked();break;case":visible":allColonSelectorsMatch=element.visible();break;case":hidden":allColonSelectorsMatch=!element.visible();break;case":transparent":allColonSelectorsMatch=!element.transparent();break;case":grabbed":allColonSelectorsMatch=element.grabbed();break;case":free":allColonSelectorsMatch=!element.grabbed();break;case":removed":allColonSelectorsMatch=element.removed();break;case":inside":allColonSelectorsMatch=!element.removed();break;case":grabbable":allColonSelectorsMatch=element.grabbable();break;case":ungrabbable":allColonSelectorsMatch=!element.grabbable();break;case":animated":allColonSelectorsMatch=element.animated();break;case":unanimated":allColonSelectorsMatch=!element.animated();break;case":parent":allColonSelectorsMatch=element.children().nonempty();break;case":child":allColonSelectorsMatch=element.parent().nonempty();break;case":active":allColonSelectorsMatch=element.active();break;case":inactive":allColonSelectorsMatch=!element.active();break;case":touch":allColonSelectorsMatch=window&&document&&("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}if(!allColonSelectorsMatch)break}if(!allColonSelectorsMatch)return!1;for(var allIdsMatch=!0,k=0;k<query.ids.length;k++){var id=query.ids[k],actualId=element._private.data.id;if(allIdsMatch=allIdsMatch&&id==actualId,!allIdsMatch)break}if(!allIdsMatch)return!1;for(var allClassesMatch=!0,k=0;k<query.classes.length;k++){var cls=query.classes[k];if(allClassesMatch=allClassesMatch&&element.hasClass(cls),!allClassesMatch)break}if(!allClassesMatch)return!1;var allDataMatches=operandsMatch({name:"data",fieldValue:function(e){return element._private.data[e]},fieldRef:function(e){return"element._private.data."+e},fieldUndefined:function(e){return void 0===element._private.data[e]},fieldTruthy:function(e){return element._private.data[e]?!0:!1}});if(!allDataMatches)return!1;var allMetaMatches=operandsMatch({name:"meta",fieldValue:function(e){return element[e]()},fieldRef:function(e){return"element."+e+"()"},fieldUndefined:function(e){return void 0==element[e]()},fieldTruthy:function(e){return element[e]()?!0:!1}});if(!allMetaMatches)return!1;if(null!=query.collection){var matchesAny=null!=query.collection._private.ids[element.id()];if(!matchesAny)return!1}return null!=query.filter&&0==element.collection().filter(query.filter).size()?!1:confirmRelations(query.parent,function(){return element.parent()})?confirmRelations(query.ancestor,function(){return element.parents()})?confirmRelations(query.child,function(){return element.children()})?confirmRelations(query.descendant,function(){return element.descendants()})?!0:!1:!1:!1:!1},selectorFunction=function(e,t){for(var r=0;r<self.length;r++){var a=self[r];if(queryMatches(a,t))return!0}return!1};null==self._private.selectorText&&(selectorFunction=function(){return!0});var filteredCollection=collection.filter(selectorFunction);return filteredCollection},$$.selfn.toString=$$.selfn.selector=function(){function e(e){return $$.is.string(e)?e:""}function t(r){var i="",n=e(r.group);i+=n.substring(0,n.length-1);for(var o=0;o<r.data.length;o++){var s=r.data[o];i+="["+s.field+e(s.operator)+e(s.value)+"]"}for(var o=0;o<r.meta.length;o++){var l=r.meta[o];i+="{"+l.field+e(l.operator)+e(l.value)+"}"}for(var o=0;o<r.colonSelectors.length;o++){var c=r.colonSelectors[a];i+=c}for(var o=0;o<r.ids.length;o++){var c="#"+r.ids[a];i+=c}for(var o=0;o<r.classes.length;o++){var c="."+r.classes[a];i+=c}return null!=r.parent&&(i=t(r.parent)+" > "+i),null!=r.ancestor&&(i=t(r.ancestor)+" "+i),null!=r.child&&(i+=" > "+t(r.child)),null!=r.descendant&&(i+=" "+t(r.descendant)),i}for(var r="",a=0;a<this.length;a++){var i=this[a];r+=t(i),this.length>1&&a<this.length-1&&(r+=", ")}return r}}(cytoscape),function(e){function t(){}t.prototype.notify=function(){},e("renderer","null",t)}(cytoscape),function(e){function t(e){t.CANVAS_LAYERS=5,t.SELECT_BOX=0,t.DRAG=2,t.NODE=4,t.BUFFER_COUNT=2,this.options=e,this.data={select:[void 0,void 0,void 0,void 0,0],renderer:this,cy:e.cy,container:e.cy.container(),canvases:new Array(t.CANVAS_LAYERS),canvasNeedsRedraw:new Array(t.CANVAS_LAYERS),bufferCanvases:new Array(t.BUFFER_COUNT)},this.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},this.timeoutData={panTimeout:null},this.dragData={possibleDragElements:[]},this.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},this.zoomData={freeToZoom:!1,lastPointerX:null},this.redraws=0,this.bindings=[],this.data.canvasContainer=document.createElement("div");var r=this.data.canvasContainer.style;r.position="absolute",r.zIndex="0",this.data.container.appendChild(this.data.canvasContainer);for(var a=0;a<t.CANVAS_LAYERS;a++)this.data.canvases[a]=document.createElement("canvas"),this.data.canvases[a].style.position="absolute",this.data.canvases[a].setAttribute("data-id","layer"+a),this.data.canvases[a].style.zIndex=String(t.CANVAS_LAYERS-a),this.data.canvasContainer.appendChild(this.data.canvases[a]),this.data.canvasNeedsRedraw[a]=!1;this.data.canvases[t.NODE].setAttribute("data-id","layer"+t.NODE+"-node"),this.data.canvases[t.SELECT_BOX].setAttribute("data-id","layer"+t.SELECT_BOX+"-selectbox"),this.data.canvases[t.DRAG].setAttribute("data-id","layer"+t.DRAG+"-drag");for(var a=0;a<t.BUFFER_COUNT;a++)this.data.bufferCanvases[a]=document.createElement("canvas"),this.data.bufferCanvases[a].style.position="absolute",this.data.bufferCanvases[a].setAttribute("data-id","buffer"+a),this.data.bufferCanvases[a].style.zIndex=String(-a-1),this.data.bufferCanvases[a].style.visibility="hidden",this.data.canvasContainer.appendChild(this.data.bufferCanvases[a]);this.hideEdgesOnViewport=e.hideEdgesOnViewport,this.load()}t.panOrBoxSelectDelay=400,t.isTouch="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,t.prototype.notify=function(e){return"destroy"==e.type?void this.destroy():(("add"==e.type||"remove"==e.type||"load"==e.type)&&(this.updateNodesCache(),this.updateEdgesCache()),"viewport"==e.type&&(this.data.canvasNeedsRedraw[t.SELECT_BOX]=!0),this.data.canvasNeedsRedraw[t.DRAG]=!0,this.data.canvasNeedsRedraw[t.NODE]=!0,void this.redraw())},t.prototype.destroy=function(){this.destroyed=!0;for(var e=0;e<this.bindings.length;e++){var t=this.bindings[e],r=t;r.target.removeEventListener(r.event,r.handler,r.useCapture)}};for(var r in e.math)t.prototype[r]=e.math[r];e("renderer","canvas",t)}(cytoscape),function(e){var t=e("renderer","canvas"),r=t.prototype,a=t.arrowShapes={};a.arrow={_points:[-.15,-.3,0,0,.15,-.3],collide:function(t,r,i,n,o,s,l,c){var p=a.arrow._points;return e.math.pointInsidePolygon(t,r,p,i,n,o,s,l,c)},roughCollide:function(t,r,i,n,o,s){return"undefined"==typeof a.arrow._farthestPointSqDistance&&(a.arrow._farthestPointSqDistance=e.math.findMaxSqDistanceToOrigin(a.arrow._points)),e.math.checkInBoundingCircle(t,r,a.arrow._farthestPointSqDistance,0,o,s,i,n)},draw:function(e){for(var t=a.arrow._points,r=0;r<t.length/2;r++)e.lineTo(t[2*r],t[2*r+1])},spacing:function(){return 0},gap:function(e){return 2*e._private.style.width.value}},a.triangle=a.arrow,a.none={collide:function(){return!1},roughCollide:function(){return!1},draw:function(){},spacing:function(){return 0},gap:function(){return 0}},a.circle={_baseRadius:.15,collide:function(e,t,r,i,n,o,s,l){if(n!=o){var c=Math.asin(s[1]/Math.sqrt(s[0]*s[0]+s[1]*s[1])),p=(Math.cos(-c),Math.sin(-c),(o+l)/(n+l));return t/=p,i/=p,Math.pow(r-e,2)+Math.pow(i-t,2)<=Math.pow((n+l)*a.circle._baseRadius,2)}return Math.pow(r-e,2)+Math.pow(i-t,2)<=Math.pow((n+l)*a.circle._baseRadius,2)},roughCollide:function(){return!0},draw:function(e){e.arc(0,0,a.circle._baseRadius,0,2*Math.PI,!1)},spacing:function(e){return r.getArrowWidth(e._private.style.width.value)*a.circle._baseRadius},gap:function(e){return 2*e._private.style.width.value}},a.inhibitor={_points:[-.25,0,-.25,-.1,.25,-.1,.25,0],collide:function(t,r,i,n,o,s,l,c){var p=a.inhibitor._points;return e.math.pointInsidePolygon(t,r,p,i,n,o,s,l,c)},roughCollide:function(t,r,i,n,o,s){return"undefined"==typeof a.inhibitor._farthestPointSqDistance&&(a.inhibitor._farthestPointSqDistance=e.math.findMaxSqDistanceToOrigin(a.inhibitor._points)),e.math.checkInBoundingCircle(t,r,a.inhibitor._farthestPointSqDistance,0,o,s,i,n)},draw:function(e){for(var t=a.inhibitor._points,r=0;r<t.length/2;r++)e.lineTo(t[2*r],t[2*r+1])},spacing:function(){return 4},gap:function(){return 4}},a.square={_points:[-.12,0,.12,0,.12,-.24,-.12,-.24],collide:function(t,r,i,n,o,s,l,c){var p=a.square._points;return e.math.pointInsidePolygon(t,r,p,i,n,o,s,l,c)},roughCollide:function(t,r,i,n,o,s){return"undefined"==typeof a.square._farthestPointSqDistance&&(a.square._farthestPointSqDistance=e.math.findMaxSqDistanceToOrigin(a.square._points)),e.math.checkInBoundingCircle(t,r,a.square._farthestPointSqDistance,0,o,s,i,n)},draw:function(e){for(var t=a.square._points,r=0;r<t.length/2;r++)e.lineTo(t[2*r],t[2*r+1])},spacing:function(){return 0},gap:function(e){return 2*e._private.style.width.value}},a.diamond={_points:[-.14,-.14,0,-.28,.14,-.14,0,0],collide:function(t,r,i,n,o,s,l,c){var p=a.diamond._points;return e.math.pointInsidePolygon(t,r,p,i,n,o,s,l,c)},roughCollide:function(t,r,i,n,o,s){return"undefined"==typeof a.diamond._farthestPointSqDistance&&(a.diamond._farthestPointSqDistance=e.math.findMaxSqDistanceToOrigin(a.diamond._points)),e.math.checkInBoundingCircle(t,r,a.diamond._farthestPointSqDistance,0,o,s,i,n)},draw:function(e){e.lineTo(-.14,-.14),e.lineTo(0,-.28),e.lineTo(.14,-.14),e.lineTo(0,0)},spacing:function(){return 0},gap:function(e){return 2*e._private.style.width.value}},a.tee=a.inhibitor}(cytoscape),function(e){var t=e("renderer","canvas");t.prototype.getCachedNodes=function(){var e=this.data,t=this.data.cy;return void 0==e.cache&&(e.cache={}),void 0==e.cache.cachedNodes&&(e.cache.cachedNodes=t.nodes()),e.cache.cachedNodes},t.prototype.updateNodesCache=function(){var e=this.data,t=this.data.cy;void 0==e.cache&&(e.cache={}),e.cache.cachedNodes=t.nodes()},t.prototype.getCachedEdges=function(){var e=this.data,t=this.data.cy;return void 0==e.cache&&(e.cache={}),void 0==e.cache.cachedEdges&&(e.cache.cachedEdges=t.edges()),e.cache.cachedEdges},t.prototype.updateEdgesCache=function(){var e=this.data,t=this.data.cy;void 0==e.cache&&(e.cache={}),e.cache.cachedEdges=t.edges()}}(cytoscape),function(e){var t=e("renderer","canvas");t.prototype.projectIntoViewport=function(e,t){n=this.data.container;var r=this.findContainerPageCoords(),a=r[0],i=r[1];return x=e-a,y=t-i,x-=this.data.cy.pan().x,y-=this.data.cy.pan().y,x/=this.data.cy.zoom(),y/=this.data.cy.zoom(),[x,y]},t.prototype.findContainerPageCoords=function(){for(var e=0,t=0,r=this.data.container,a=r;null!=a;){var i=window.getComputedStyle(a);if("number"==typeof a.offsetLeft){var n=i.getPropertyValue("position").toLowerCase(),o=parseFloat(i.getPropertyValue("border-left-width")),s=parseFloat(i.getPropertyValue("border-top-width"));if(e+=a.offsetLeft,t+=a.offsetTop,("static"!==n||a===r)&&(e+=o,t+=s),"fixed"===n){e+=window.scrollX,t+=window.scrollY;break}if(a==document.body||a==document.header)break}a&&(a=a.offsetParent)}return[e,t]},t.prototype.findNearestElement=function(r,a,i){for(var n=this.data,o=this.getCachedNodes(),s=this.getCachedEdges(),l=[],c=t.isTouch,p=this.data.cy.zoom(),d=(c?256:32)/p,u=(c?16:0)/p,h=0;h<o.length;h++)t.nodeShapes[this.getNodeShape(o[h])].checkPointRough(r,a,o[h]._private.style["border-width"].value/2,this.getNodeWidth(o[h])+u,this.getNodeHeight(o[h])+u,o[h]._private.position.x,o[h]._private.position.y)&&t.nodeShapes[this.getNodeShape(o[h])].checkPoint(r,a,o[h]._private.style["border-width"].value/2,this.getNodeWidth(o[h])+u,this.getNodeHeight(o[h])+u,o[h]._private.position.x,o[h]._private.position.y)&&(i?0!=o[h]._private.style.opacity.value&&"visible"==o[h]._private.style.visibility.value&&"element"==o[h]._private.style.display.value&&l.push(o[h]):l.push(o[h]));for(var v,h=0;h<s.length;h++){var g=s[h],f=g._private.rscratch;if(v=!1,"self"==f.edgeType?(e.math.inBezierVicinity(r,a,f.startX,f.startY,f.cp2ax,f.cp2ay,f.selfEdgeMidX,f.selfEdgeMidY,Math.pow(g._private.style.width.value/2,2))&&Math.pow(s[h]._private.style.width.value/2,2)+d>e.math.sqDistanceToQuadraticBezier(r,a,f.startX,f.startY,f.cp2ax,f.cp2ay,f.selfEdgeMidX,f.selfEdgeMidY)||e.math.inBezierVicinity(r,a,f.selfEdgeMidX,f.selfEdgeMidY,f.cp2cx,f.cp2cy,f.endX,f.endY,Math.pow(s[h]._private.style.width.value/2,2))&&Math.pow(s[h]._private.style.width.value/2,2)+d>e.math.sqDistanceToQuadraticBezier(r,a,f.selfEdgeMidX,f.selfEdgeMidY,f.cp2cx,f.cp2cy,f.endX,f.endY))&&(v=!0):"straight"==f.edgeType?e.math.inLineVicinity(r,a,f.startX,f.startY,f.endX,f.endY,2*s[h]._private.style.width.value)&&Math.pow(s[h]._private.style.width.value/2,2)+d>e.math.sqDistanceToFiniteLine(r,a,f.startX,f.startY,f.endX,f.endY)&&(v=!0):"bezier"==f.edgeType&&e.math.inBezierVicinity(r,a,f.startX,f.startY,f.cp2x,f.cp2y,f.endX,f.endY,Math.pow(s[h]._private.style.width.value/2,2))&&Math.pow(s[h]._private.style.width.value/2,2)+d>e.math.sqDistanceToQuadraticBezier(r,a,f.startX,f.startY,f.cp2x,f.cp2y,f.endX,f.endY)&&(v=!0),l.length&&l[l.length-1]==s[h]||(t.arrowShapes[s[h]._private.style["source-arrow-shape"].value].roughCollide(r,a,s[h]._private.rscratch.arrowStartX,s[h]._private.rscratch.arrowStartY,this.getArrowWidth(s[h]._private.style.width.value),this.getArrowHeight(s[h]._private.style.width.value),[s[h]._private.rscratch.arrowStartX-s[h].source()[0]._private.position.x,s[h]._private.rscratch.arrowStartY-s[h].source()[0]._private.position.y],0)&&t.arrowShapes[s[h]._private.style["source-arrow-shape"].value].collide(r,a,s[h]._private.rscratch.arrowStartX,s[h]._private.rscratch.arrowStartY,this.getArrowWidth(s[h]._private.style.width.value),this.getArrowHeight(s[h]._private.style.width.value),[s[h]._private.rscratch.arrowStartX-s[h].source()[0]._private.position.x,s[h]._private.rscratch.arrowStartY-s[h].source()[0]._private.position.y],0)||t.arrowShapes[s[h]._private.style["target-arrow-shape"].value].roughCollide(r,a,s[h]._private.rscratch.arrowEndX,s[h]._private.rscratch.arrowEndY,this.getArrowWidth(s[h]._private.style.width.value),this.getArrowHeight(s[h]._private.style.width.value),[s[h]._private.rscratch.arrowEndX-s[h].target()[0]._private.position.x,s[h]._private.rscratch.arrowEndY-s[h].target()[0]._private.position.y],0)&&t.arrowShapes[s[h]._private.style["target-arrow-shape"].value].collide(r,a,s[h]._private.rscratch.arrowEndX,s[h]._private.rscratch.arrowEndY,this.getArrowWidth(s[h]._private.style.width.value),this.getArrowHeight(s[h]._private.style.width.value),[s[h]._private.rscratch.arrowEndX-s[h].target()[0]._private.position.x,s[h]._private.rscratch.arrowEndY-s[h].target()[0]._private.position.y],0))&&(v=!0),v)if(i){var y=n.cy.getElementById(s[h]._private.data.source),m=n.cy.getElementById(s[h]._private.data.target);0!=s[h]._private.style.opacity.value&&"visible"==s[h]._private.style.visibility.value&&"element"==s[h]._private.style.display.value&&0!=y._private.style.opacity.value&&"visible"==y._private.style.visibility.value&&"element"==y._private.style.display.value&&0!=m._private.style.opacity.value&&"visible"==m._private.style.visibility.value&&"element"==m._private.style.display.value&&l.push(s[h])}else l.push(s[h])}return l.sort(this.zOrderSort),l.length>0?l[l.length-1]:null},t.prototype.getAllInBox=function(r,a,i,n){var o=(this.data,this.getCachedNodes()),s=this.getCachedEdges(),l=[],c=Math.min(r,i),p=Math.max(r,i),d=Math.min(a,n),u=Math.max(a,n);r=c,i=p,a=d,n=u;for(var h,v=0;v<o.length;v++)t.nodeShapes[this.getNodeShape(o[v])].intersectBox(r,a,i,n,this.getNodeWidth(o[v]),this.getNodeHeight(o[v]),o[v]._private.position.x,o[v]._private.position.y,o[v]._private.style["border-width"].value/2)&&l.push(o[v]);for(var v=0;v<s.length;v++)"self"==s[v]._private.rscratch.edgeType&&((h=e.math.boxInBezierVicinity(r,a,i,n,s[v]._private.rscratch.startX,s[v]._private.rscratch.startY,s[v]._private.rscratch.cp2ax,s[v]._private.rscratch.cp2ay,s[v]._private.rscratch.endX,s[v]._private.rscratch.endY,s[v]._private.style.width.value))&&(2==h||1==h&&e.math.checkBezierInBox(r,a,i,n,s[v]._private.rscratch.startX,s[v]._private.rscratch.startY,s[v]._private.rscratch.cp2ax,s[v]._private.rscratch.cp2ay,s[v]._private.rscratch.endX,s[v]._private.rscratch.endY,s[v]._private.style.width.value))||(h=e.math.boxInBezierVicinity(r,a,i,n,s[v]._private.rscratch.startX,s[v]._private.rscratch.startY,s[v]._private.rscratch.cp2cx,s[v]._private.rscratch.cp2cy,s[v]._private.rscratch.endX,s[v]._private.rscratch.endY,s[v]._private.style.width.value))&&(2==h||1==h&&e.math.checkBezierInBox(r,a,i,n,s[v]._private.rscratch.startX,s[v]._private.rscratch.startY,s[v]._private.rscratch.cp2cx,s[v]._private.rscratch.cp2cy,s[v]._private.rscratch.endX,s[v]._private.rscratch.endY,s[v]._private.style.width.value)))&&l.push(s[v]),"bezier"==s[v]._private.rscratch.edgeType&&(h=e.math.boxInBezierVicinity(r,a,i,n,s[v]._private.rscratch.startX,s[v]._private.rscratch.startY,s[v]._private.rscratch.cp2x,s[v]._private.rscratch.cp2y,s[v]._private.rscratch.endX,s[v]._private.rscratch.endY,s[v]._private.style.width.value))&&(2==h||1==h&&e.math.checkBezierInBox(r,a,i,n,s[v]._private.rscratch.startX,s[v]._private.rscratch.startY,s[v]._private.rscratch.cp2x,s[v]._private.rscratch.cp2y,s[v]._private.rscratch.endX,s[v]._private.rscratch.endY,s[v]._private.style.width.value))&&l.push(s[v]),"straight"==s[v]._private.rscratch.edgeType&&(h=e.math.boxInBezierVicinity(r,a,i,n,s[v]._private.rscratch.startX,s[v]._private.rscratch.startY,.5*s[v]._private.rscratch.startX+.5*s[v]._private.rscratch.endX,.5*s[v]._private.rscratch.startY+.5*s[v]._private.rscratch.endY,s[v]._private.rscratch.endX,s[v]._private.rscratch.endY,s[v]._private.style.width.value))&&(2==h||1==h&&e.math.checkStraightEdgeInBox(r,a,i,n,s[v]._private.rscratch.startX,s[v]._private.rscratch.startY,s[v]._private.rscratch.endX,s[v]._private.rscratch.endY,s[v]._private.style.width.value))&&l.push(s[v]);return l},t.prototype.calcCompoundBounds=function(e){var t=e.descendants().not(":removed"),r={x:e._private.position.x,y:e._private.position.y,width:e._private.autoWidth,height:e._private.autoHeight};if("visible"!=e._private.style.visibility.value||"element"!=e._private.style.display.value)return r;for(var a=[],i=0;i<t.size();i++)"visible"==t[i]._private.style.visibility.value&&"element"==t[i]._private.style.display.value&&a.push(t[i]);if(0==a.length)return r;t=a;var n=this.borderValue(t,"left"),o=this.borderValue(t,"right"),s=this.borderValue(t,"top"),l=this.borderValue(t,"bottom"),c=this.getNodePadding(e),p=(n-c.left+o+c.right)/2,d=(s-c.top+l+c.bottom)/2,u=o-n+c.left+c.right,h=l-s+c.top+c.bottom;return r={x:p,y:d,width:u,height:h}},t.prototype.borderValue=function(e,t){var r,a,n=1/0,o=-1/0,s=this,l=function(e){var t={};return t.x=e._private.position.x,t.y=e._private.position.y,t.width=e.outerWidth(),t.height=e.outerHeight(),t},c=function(e){var t={},r=s.getNodeWidth(e),a=s.getNodeHeight(e);t.height=e._private.style["font-size"].value,t.width=t.height;var i=e._private.style["text-halign"].strValue;"left"==i?(t.x=e._private.position.x-r/2,t.left=t.x-t.width,t.right=t.x):"right"==i?(t.x=e._private.position.x+r/2,t.left=t.x,t.right=t.x+t.width):(t.x=e._private.position.x,t.left=t.x-t.width/2,t.right=t.x+t.width/2);var n=e._private.style["text-valign"].strValue;return"top"==n?(t.y=e._private.position.y-a/2,t.top=t.y-t.height,t.bottom=t.y):"bottom"==n?(t.y=e._private.position.y+a/2,t.top=t.y,t.bottom=t.y+t.height):(t.y=e._private.position.y,t.top=t.y-t.height/2,t.bottom=t.y+t.height/2),t};for(i=0;i<e.length;i++)if(r=l(e[i]),a=c(e[i]),"left"==t){var p=Math.min(r.x-r.width/2,a.left);n>p&&(n=p)}else if("right"==t){var d=Math.max(r.x+r.width/2,a.right);d>o&&(o=d)}else if("top"==t){var u=Math.min(r.y-r.height/2,a.top);n>u&&(n=u)}else if("bottom"==t){var h=Math.max(r.y+r.height/2,a.bottom);h>o&&(o=h)}return"left"==t||"top"==t?n:o},t.prototype.getNodeWidth=function(e){return"auto"==e._private.style.width.value||"auto"==e._private.style.height.value?e._private.autoWidth:e._private.style.width.pxValue},t.prototype.getNodeHeight=function(e){return"auto"==e._private.style.width.value||"auto"==e._private.style.height.value?e._private.autoHeight:e._private.style.height.pxValue},t.prototype.getNodeShape=function(e){var t=e._private.style.shape.value;return e.isParent()?"rectangle"===t||"roundrectangle"===t?t:"rectangle":t},t.prototype.updateAllCompounds=function(e){for(var t=e.length-1;t>=0;t--)if(e[t].isNode()&&("auto"==e[t]._private.style.width.value||"auto"==e[t]._private.style.height.value)&&e[t].children().length>0){var r=e[t],a=this.calcCompoundBounds(r);r._private.position.x=a.x,r._private.position.y=a.y,r._private.autoWidth=a.width,r._private.autoHeight=a.height}},t.prototype.getNodePadding=function(e){var t=e._private.style["padding-left"].pxValue,r=e._private.style["padding-right"].pxValue,a=e._private.style["padding-top"].pxValue,i=e._private.style["padding-bottom"].pxValue;return isNaN(t)&&(t=0),isNaN(r)&&(r=0),isNaN(a)&&(a=0),isNaN(i)&&(i=0),{left:t,right:r,top:a,bottom:i}},t.prototype.zOrderSort=function(e,t){var r=function(e){return"nodes"==e._private.group?e.parents().size():"edges"==e._private.group?Math.max(e.source()[0].parents().size(),e.target()[0].parents().size()):0},a=e._private.style["z-index"].value-t._private.style["z-index"].value,i=0,n=0;return e.cy().hasCompoundNodes()&&(i=r(e),n=r(t)),i-n===0?"nodes"===e._private.group&&"edges"===t._private.group?1:"edges"===e._private.group&&"nodes"===t._private.group?-1:0===a?e._private.index-t._private.index:a:i-n},t.prototype.getCachedZSortedEles=function(){var e=this.lastZOrderCachedNodes,t=this.lastZOrderCachedEdges,r=this.getCachedNodes(),a=this.getCachedEdges(),i=[];if(e&&t&&e===r&&t===a)i=this.cachedZSortedEles;else{for(var n=0;n<r.length;n++)i.push(r[n]);for(var n=0;n<a.length;n++)i.push(a[n]);i.sort(this.zOrderSort),this.cachedZSortedEles=i}return this.lastZOrderCachedNodes=r,this.lastZOrderCachedEdges=a,i},t.prototype.findEdgeControlPoints=function(e){for(var t,r={},a=this.data.cy,i=[],n=0;n<e.length;n++)"none"!==e[n]._private.style.display.value&&(t=e[n]._private.data.source>e[n]._private.data.target?e[n]._private.data.target+"-"+e[n]._private.data.source:e[n]._private.data.source+"-"+e[n]._private.data.target,void 0==r[t]&&(r[t]=[]),r[t].push(e[n]),i.push(t));for(var o,s,l=0;l<i.length;l++){t=i[l],o=a.getElementById(r[t][0]._private.data.source),s=a.getElementById(r[t][0]._private.data.target);var c,p,d=(o._private.position.x+s._private.position.x)/2,u=(o._private.position.y+s._private.position.y)/2;if(r[t].length>1){c=s._private.position.y-o._private.position.y,p=o._private.position.x-s._private.position.x;var h=Math.sqrt(c*c+p*p);c/=h,p/=h}for(var v,n=0;n<r[t].length;n++){v=r[t][n];var g=v._private.rscratch.lastEdgeIndex,f=n,y=v._private.rscratch.lastNumEdges,m=r[t].length,b=v._private.rscratch.lastSrcCtlPtX,w=o._private.position.x,x=v._private.rscratch.lastSrcCtlPtY,_=o._private.position.y,E=v._private.rscratch.lastSrcCtlPtW,S=o.outerWidth(),P=v._private.rscratch.lastSrcCtlPtH,M=o.outerHeight(),k=v._private.rscratch.lastTgtCtlPtX,D=s._private.position.x,N=v._private.rscratch.lastTgtCtlPtY,C=s._private.position.y,T=v._private.rscratch.lastTgtCtlPtW,I=s.outerWidth(),z=v._private.rscratch.lastTgtCtlPtH,B=s.outerHeight();if(b!==w||x!==_||E!==S||P!==M||k!==D||N!==C||T!==I||z!==B||g!==f||y!==m){var X=v._private.rscratch;if(X.lastSrcCtlPtX=w,X.lastSrcCtlPtY=_,X.lastSrcCtlPtW=S,X.lastSrcCtlPtH=M,X.lastTgtCtlPtX=D,X.lastTgtCtlPtY=C,X.lastTgtCtlPtW=I,X.lastTgtCtlPtH=B,X.lastEdgeIndex=f,X.lastNumEdges=m,o._private.data.id==s._private.data.id){var R=v._private.style["control-point-step-size"].pxValue;v._private.rscratch.edgeType="self",v._private.rscratch.cp2ax=o._private.position.x,v._private.rscratch.cp2ay=o._private.position.y-(1+Math.pow(this.getNodeHeight(o),1.12)/100)*R*(n/3+1),v._private.rscratch.cp2cx=o._private.position.x-(1+Math.pow(this.getNodeWidth(o),1.12)/100)*R*(n/3+1),v._private.rscratch.cp2cy=o._private.position.y,v._private.rscratch.selfEdgeMidX=(v._private.rscratch.cp2ax+v._private.rscratch.cp2cx)/2,v._private.rscratch.selfEdgeMidY=(v._private.rscratch.cp2ay+v._private.rscratch.cp2cy)/2}else if(r[t].length%2==1&&n==Math.floor(r[t].length/2))v._private.rscratch.edgeType="straight";else{var R=v._private.style["control-point-step-size"].value,Y=(.5-r[t].length/2+n)*R;v._private.rscratch.edgeType="bezier",v._private.rscratch.cp2x=d+c*Y,v._private.rscratch.cp2y=u+p*Y}}}}return r},t.prototype.findEndpoints=function(r){var a,i=r.source()[0],n=r.target()[0],o=Math.max(this.getNodeWidth(i),this.getNodeHeight(i)),s=Math.max(this.getNodeWidth(n),this.getNodeHeight(n));o=0,s/=2;var l=[r.source().position().x,r.source().position().y],c=[r.target().position().x,r.target().position().y];if("self"==r._private.rscratch.edgeType){var p=[r._private.rscratch.cp2cx,r._private.rscratch.cp2cy];a=t.nodeShapes[this.getNodeShape(n)].intersectLine(n._private.position.x,n._private.position.y,this.getNodeWidth(n),this.getNodeHeight(n),p[0],p[1],n._private.style["border-width"].value/2);var d=e.math.shortenIntersection(a,p,t.arrowShapes[r._private.style["target-arrow-shape"].value].spacing(r)),u=e.math.shortenIntersection(a,p,t.arrowShapes[r._private.style["target-arrow-shape"].value].gap(r));r._private.rscratch.endX=u[0],r._private.rscratch.endY=u[1],r._private.rscratch.arrowEndX=d[0],r._private.rscratch.arrowEndY=d[1];var p=[r._private.rscratch.cp2ax,r._private.rscratch.cp2ay];a=t.nodeShapes[this.getNodeShape(i)].intersectLine(i._private.position.x,i._private.position.y,this.getNodeWidth(i),this.getNodeHeight(i),p[0],p[1],i._private.style["border-width"].value/2);var h=e.math.shortenIntersection(a,p,t.arrowShapes[r._private.style["source-arrow-shape"].value].spacing(r)),v=e.math.shortenIntersection(a,p,t.arrowShapes[r._private.style["source-arrow-shape"].value].gap(r));r._private.rscratch.startX=v[0],r._private.rscratch.startY=v[1],r._private.rscratch.arrowStartX=h[0],r._private.rscratch.arrowStartY=h[1]}else if("straight"==r._private.rscratch.edgeType){a=t.nodeShapes[this.getNodeShape(n)].intersectLine(n._private.position.x,n._private.position.y,this.getNodeWidth(n),this.getNodeHeight(n),i.position().x,i.position().y,n._private.style["border-width"].value/2),r._private.rscratch.noArrowPlacement=0==a.length?!0:!1;var d=e.math.shortenIntersection(a,[i.position().x,i.position().y],t.arrowShapes[r._private.style["target-arrow-shape"].value].spacing(r)),u=e.math.shortenIntersection(a,[i.position().x,i.position().y],t.arrowShapes[r._private.style["target-arrow-shape"].value].gap(r));r._private.rscratch.endX=u[0],r._private.rscratch.endY=u[1],r._private.rscratch.arrowEndX=d[0],r._private.rscratch.arrowEndY=d[1],a=t.nodeShapes[this.getNodeShape(i)].intersectLine(i._private.position.x,i._private.position.y,this.getNodeWidth(i),this.getNodeHeight(i),n.position().x,n.position().y,i._private.style["border-width"].value/2),r._private.rscratch.noArrowPlacement=0==a.length?!0:!1;var h=e.math.shortenIntersection(a,[n.position().x,n.position().y],t.arrowShapes[r._private.style["source-arrow-shape"].value].spacing(r)),v=e.math.shortenIntersection(a,[n.position().x,n.position().y],t.arrowShapes[r._private.style["source-arrow-shape"].value].gap(r));r._private.rscratch.startX=v[0],r._private.rscratch.startY=v[1],r._private.rscratch.arrowStartX=h[0],r._private.rscratch.arrowStartY=h[1]}else if("bezier"==r._private.rscratch.edgeType){{var p=[r._private.rscratch.cp2x,r._private.rscratch.cp2y];.25*l[0]+.25*c[0]+.5*p[0],.25*l[1]+.25*c[1]+.5*p[1]}a=t.nodeShapes[this.getNodeShape(n)].intersectLine(n._private.position.x,n._private.position.y,this.getNodeWidth(n),this.getNodeHeight(n),p[0],p[1],n._private.style["border-width"].value/2);var d=e.math.shortenIntersection(a,p,t.arrowShapes[r._private.style["target-arrow-shape"].value].spacing(r)),u=e.math.shortenIntersection(a,p,t.arrowShapes[r._private.style["target-arrow-shape"].value].gap(r));r._private.rscratch.endX=u[0],r._private.rscratch.endY=u[1],r._private.rscratch.arrowEndX=d[0],r._private.rscratch.arrowEndY=d[1],a=t.nodeShapes[this.getNodeShape(i)].intersectLine(i._private.position.x,i._private.position.y,this.getNodeWidth(i),this.getNodeHeight(i),p[0],p[1],i._private.style["border-width"].value/2);var h=e.math.shortenIntersection(a,p,t.arrowShapes[r._private.style["source-arrow-shape"].value].spacing(r)),v=e.math.shortenIntersection(a,p,t.arrowShapes[r._private.style["source-arrow-shape"].value].gap(r));r._private.rscratch.startX=v[0],r._private.rscratch.startY=v[1],r._private.rscratch.arrowStartX=h[0],r._private.rscratch.arrowStartY=h[1]}else if(r._private.rscratch.isArcEdge)return},t.prototype.findEdges=function(e){for(var t=this.getCachedEdges(),r={},a=[],i=0;i<e.length;i++)r[e[i]._private.data.id]=e[i];
for(var i=0;i<t.length;i++)(r[t[i]._private.data.source]||r[t[i]._private.data.target])&&a.push(t[i]);return a},t.prototype.getArrowWidth=function(e){return Math.max(Math.pow(13.37*e,.9),29)},t.prototype.getArrowHeight=function(e){return Math.max(Math.pow(13.37*e,.9),29)}}(cytoscape),function(e){var t=e("renderer","canvas");t.prototype.drawEdge=function(e,t,r){if(t.visible()&&(!this.hideEdgesOnViewport||!(this.dragData.didDrag||this.pinching||this.hoverData.dragging||this.data.wheel||this.swipePanning))){var a,i;if(a=t.source()[0],i=t.target()[0],"visible"==t._private.style.visibility.value&&"element"==t._private.style.display.value&&"visible"==a._private.style.visibility.value&&"element"==a._private.style.display.value&&"visible"==i._private.style.visibility.value&&"element"==i._private.style.display.value){var n=t._private.style["overlay-padding"].pxValue,o=t._private.style["overlay-opacity"].value,s=t._private.style["overlay-color"].value;if(r?(e.strokeStyle="rgba( "+s[0]+", "+s[1]+", "+s[2]+", "+o+" )",e.lineCap="round","self"==t._private.rscratch.edgeType&&(e.lineCap="butt")):e.strokeStyle="rgba("+t._private.style["line-color"].value[0]+","+t._private.style["line-color"].value[1]+","+t._private.style["line-color"].value[2]+","+t._private.style.opacity.value+")",!(t._private.style.width.pxValue<=0)){var l=t._private.style.width.pxValue+(r?2*n:0),c=r?"solid":t._private.style["line-style"].value;if(e.lineWidth=l,this.findEndpoints(t),"self"==t._private.rscratch.edgeType){var p=t._private.rscratch;this.drawStyledEdge(t,e,[p.startX,p.startY,p.cp2ax,p.cp2ay,p.selfEdgeMidX,p.selfEdgeMidY],c,l),this.drawStyledEdge(t,e,[p.selfEdgeMidX,p.selfEdgeMidY,p.cp2cx,p.cp2cy,p.endX,p.endY],c,l)}else if("straight"==t._private.rscratch.edgeType){var d=i._private.position.x-a._private.position.x,u=i._private.position.y-a._private.position.y,h=t._private.rscratch.endX-t._private.rscratch.startX,v=t._private.rscratch.endY-t._private.rscratch.startY;if(0>d*h+u*v)t._private.rscratch.straightEdgeTooShort=!0;else{var p=t._private.rscratch;this.drawStyledEdge(t,e,[p.startX,p.startY,p.endX,p.endY],c,l),t._private.rscratch.straightEdgeTooShort=!1}}else{var p=t._private.rscratch;this.drawStyledEdge(t,e,[p.startX,p.startY,p.cp2x,p.cp2y,p.endX,p.endY],c,l)}t._private.rscratch.noArrowPlacement!==!0&&void 0!==t._private.rscratch.startX&&this.drawArrowheads(e,t,r)}}}};var r=function(e,t){var r=Math.sqrt(Math.pow(e[4]-e[0],2)+Math.pow(e[5]-e[1],2));r+=Math.sqrt(Math.pow((e[4]+e[0])/2-e[2],2)+Math.pow((e[5]+e[1])/2-e[3],2));var a,i=Math.ceil(r/t);if(!(i>0))return null;a=new Array(2*i);for(var n=0;i>n;n++){var o=n/i;a[2*n]=e[0]*(1-o)*(1-o)+2*e[2]*(1-o)*o+e[4]*o*o,a[2*n+1]=e[1]*(1-o)*(1-o)+2*e[3]*(1-o)*o+e[5]*o*o}return a},a=function(e,t){var r,a=Math.sqrt(Math.pow(e[2]-e[0],2)+Math.pow(e[3]-e[1],2)),i=Math.ceil(a/t);if(!(i>0))return null;r=new Array(2*i);for(var n=[e[2]-e[0],e[3]-e[1]],o=0;i>o;o++){var s=o/i;r[2*o]=n[0]*s+e[0],r[2*o+1]=n[1]*s+e[1]}return r};t.prototype.drawStyledEdge=function(e,t,i,n,o){function s(e,t,r,a){return(1-a)*(1-a)*e+2*(1-a)*a*t+a*a*r}var l=this.data.cy,c=l.zoom();void 0===e._private.rstyle.bezierPts&&(e._private.rstyle.bezierPts=[]);var p=e._private.rstyle.bezierPts.length;e.isLoop()?p>=12&&(e._private.rstyle.bezierPts=[]):e._private.rstyle.bezierPts=[];var d=e._private.rstyle.bezierPts;if(6===i.length&&(d.push({x:s(i[0],i[2],i[4],.05),y:s(i[1],i[3],i[5],.05)}),d.push({x:s(i[0],i[2],i[4],.25),y:s(i[1],i[3],i[5],.25)}),d.push({x:s(i[0],i[2],i[4],.35),y:s(i[1],i[3],i[5],.35)}),d.push({x:s(i[0],i[2],i[4],.65),y:s(i[1],i[3],i[5],.65)}),d.push({x:s(i[0],i[2],i[4],.75),y:s(i[1],i[3],i[5],.75)}),d.push({x:s(i[0],i[2],i[4],.95),y:s(i[1],i[3],i[5],.95)})),"solid"==n)t.beginPath(),t.moveTo(i[0],i[1]),6==i.length?t.quadraticCurveTo(i[2],i[3],i[4],i[5]):t.lineTo(i[2],i[3]),t.stroke();else if("dotted"==n){var u;if(u=6==i.length?r(i,16,!0):a(i,16,!0),!u)return;var h=Math.max(1.6*o,3.4)*c,v=2*h,g=2*h;v=Math.max(v,1),g=Math.max(g,1);var f=this.createBuffer(v,g),y=f[1];y.setTransform(1,0,0,1,0,0),y.clearRect(0,0,v,g),y.fillStyle=t.strokeStyle,y.beginPath(),y.arc(v/2,g/2,.5*h,0,2*Math.PI,!1),y.fill(),t.beginPath();for(var m=0;m<u.length/2;m++)t.drawImage(f[0],u[2*m]-v/2/c,u[2*m+1]-g/2/c,v/c,g/c)}else if("dashed"==n){var u;if(u=6==i.length?r(i,14,!0):a(i,14,!0),!u)return;var v=2*o*c,g=7.8*c;v=Math.max(v,1),g=Math.max(g,1);var f=this.createBuffer(v,g),y=f[1];y.setTransform(1,0,0,1,0,0),y.clearRect(0,0,v,g),t.strokeStyle&&(y.strokeStyle=t.strokeStyle),y.lineWidth=o*l.zoom(),y.beginPath(),y.moveTo(v/2,.2*g),y.lineTo(v/2,.8*g),y.stroke();var b,w,x=!1;4==i.length?(b=[i[2]-i[0],i[3]-u[1]],w=Math.acos((0*b[0]+-1*b[1])/Math.sqrt(b[0]*b[0]+b[1]*b[1])),b[0]<0&&(w=-w+2*Math.PI)):6==i.length&&(x=!0);for(var m=0;m<u.length/2;m++){var _=m/Math.max(u.length/2-1,1);x&&(b=[2*(1-_)*(i[2]-i[0])+2*_*(i[4]-i[2]),2*(1-_)*(i[3]-i[1])+2*_*(i[5]-i[3])],w=Math.acos((0*b[0]+-1*b[1])/Math.sqrt(b[0]*b[0]+b[1]*b[1])),b[0]<0&&(w=-w+2*Math.PI)),t.translate(u[2*m],u[2*m+1]),t.rotate(w),t.translate(-v/2/c,-g/2/c),t.drawImage(f[0],0,0,v/c,g/c),t.translate(v/2/c,g/2/c),t.rotate(-w),t.translate(-u[2*m],-u[2*m+1])}}else this.drawStyledEdge(e,t,i,"solid",o)},t.prototype.drawArrowheads=function(e,t,r){if(!r){var a,i,n=t._private.rscratch.arrowStartX,o=t._private.rscratch.arrowStartY;a=n-t.source().position().x,i=o-t.source().position().y,isNaN(n)||isNaN(o)||isNaN(a)||isNaN(i)||(e.fillStyle="rgba("+t._private.style["source-arrow-color"].value[0]+","+t._private.style["source-arrow-color"].value[1]+","+t._private.style["source-arrow-color"].value[2]+","+t._private.style.opacity.value+")",e.lineWidth=t._private.style.width.pxValue,this.drawArrowShape(e,t._private.style["source-arrow-shape"].value,n,o,a,i));var s=t._private.rscratch.arrowEndX,l=t._private.rscratch.arrowEndY;a=s-t.target().position().x,i=l-t.target().position().y,isNaN(s)||isNaN(l)||isNaN(a)||isNaN(i)||(e.fillStyle="rgba("+t._private.style["target-arrow-color"].value[0]+","+t._private.style["target-arrow-color"].value[1]+","+t._private.style["target-arrow-color"].value[2]+","+t._private.style.opacity.value+")",e.lineWidth=t._private.style.width.pxValue,this.drawArrowShape(e,t._private.style["target-arrow-shape"].value,s,l,a,i))}},t.prototype.drawArrowShape=function(e,r,a,i,n,o){var s=Math.asin(o/Math.sqrt(n*n+o*o));0>n?s+=Math.PI/2:s=-(Math.PI/2+s),e.translate(a,i),e.moveTo(0,0),e.rotate(-s);var l=this.getArrowWidth(e.lineWidth);e.scale(l,l),e.beginPath(),t.arrowShapes[r].draw(e),e.closePath(),e.fill(),e.scale(1/l,1/l),e.rotate(s),e.translate(-a,-i)}}(cytoscape),function(e){var t=e("renderer","canvas"),r={},a=9e3;t.prototype.getCachedImage=function(e,t){if(r[e]&&r[e].image)return r[e].keepTime=a,r[e].image;var i=r[e];return void 0==i&&(r[e]=new Object,r[e].image=new Image,r[e].image.onload=t,r[e].image.src=e,r[e].keepTime=a,i=r[e]),i.image},t.prototype.swapCachedImage=function(e){if(r[e]){if(r[e].image&&r[e].image.complete){var t=r[e].image,a=document.createElement("canvas");return a.width=t.width,a.height=t.height,a.getContext("2d").drawImage(t,0,0),r[e].image=a,r[e].swappedWithCanvas=!0,a}return null}return null},t.prototype.updateImageCaches=function(){for(var e in r)r[e].keepTime<=0?(void 0!=r[e].image&&(r[e].image.src=void 0,r[e].image=void 0),r[e]=void 0):r[e]-=1},t.prototype.drawImage=function(e,t,r,a,i,n,o){o.widthScale=.5,o.heightScale=.5,o.rotate=n;canvas.drawImage(o,t,r)},t.prototype.drawInscribedImage=function(e,r,a){var i=this,n=(this.data.cy._private.zoom,a._private.position.x),o=a._private.position.y,s=this.getNodeWidth(a),l=this.getNodeHeight(a);e.save(),t.nodeShapes[i.getNodeShape(a)].drawPath(e,n,o,s,l),e.clip();var c=[r.width,r.height];e.drawImage(r,n-c[0]/2,o-c[1]/2,c[0],c[1]),e.restore(),a._private.style["border-width"].value>0&&e.stroke()}}(cytoscape),function(e){var t=e("renderer","canvas");t.prototype.drawEdgeText=function(e,t){if(t.visible()&&(!this.hideEdgesOnViewport||!(this.dragData.didDrag||this.pinching||this.hoverData.dragging||this.data.wheel||this.swipePanning))){var r=t._private.style["font-size"].pxValue*t.cy().zoom(),a=t._private.style["min-zoomed-font-size"].pxValue;if(!(a>r)){e.textAlign="center",e.textBaseline="middle";var i,n,o,s;"self"==t._private.rscratch.edgeType?(o=t._private.rscratch.selfEdgeMidX,s=t._private.rscratch.selfEdgeMidY):"straight"==t._private.rscratch.edgeType?(o=(t._private.rscratch.startX+t._private.rscratch.endX)/2,s=(t._private.rscratch.startY+t._private.rscratch.endY)/2):"bezier"==t._private.rscratch.edgeType&&(o=.25*t._private.rscratch.startX+.5*t._private.rscratch.cp2x+.25*t._private.rscratch.endX,s=Math.pow(.5,2)*t._private.rscratch.startY+.5*t._private.rscratch.cp2y+.25*t._private.rscratch.endY),i=o,n=s;var l=t._private.rstyle;l.labelX=i,l.labelY=n,this.drawText(e,t,i,n)}}},t.prototype.drawNodeText=function(e,t){if(t.visible()){var r=t._private.style["font-size"].pxValue*t.cy().zoom(),a=t._private.style["min-zoomed-font-size"].pxValue;if(!(a>r)){var i,n,o=this.getNodeWidth(t),s=this.getNodeHeight(t),l=t._private.style["text-halign"].strValue;"left"==l?(e.textAlign="right",i=t._private.position.x-o/2):"right"==l?(e.textAlign="left",i=t._private.position.x+o/2):"center"==l?(e.textAlign="center",i=t._private.position.x):(e.textAlign="center",i=t._private.position.x);var c=t._private.style["text-valign"].strValue;"top"==c?(e.textBaseline="bottom",n=t._private.position.y-s/2):"bottom"==c?(e.textBaseline="top",n=t._private.position.y+s/2):"middle"==c||"center"==c?(e.textBaseline="middle",n=t._private.position.y):(e.textBaseline="middle",n=t._private.position.y),this.drawText(e,t,i,n)}}},t.prototype.drawText=function(e,t,r,a){for(var i=1,n=t.parents(),o=0;o<n.length;o++){var s=n[o],l=s._private.style.opacity.value;if(i=l*i,0===l)return}var c=t._private.style["font-style"].strValue,p=t._private.style["font-size"].pxValue+"px",d=t._private.style["font-family"].strValue,u=(t._private.style["font-variant"].strValue,t._private.style["font-weight"].strValue);e.font=c+" "+u+" "+p+" "+d;var h=String(t._private.style.content.value),v=t._private.style["text-transform"].value;if("none"==v||("uppercase"==v?h=h.toUpperCase():"lowercase"==v&&(h=h.toLowerCase())),e.lineJoin="round",e.fillStyle="rgba("+t._private.style.color.value[0]+","+t._private.style.color.value[1]+","+t._private.style.color.value[2]+","+t._private.style["text-opacity"].value*t._private.style.opacity.value*i+")",e.strokeStyle="rgba("+t._private.style["text-outline-color"].value[0]+","+t._private.style["text-outline-color"].value[1]+","+t._private.style["text-outline-color"].value[2]+","+t._private.style["text-opacity"].value*t._private.style.opacity.value*i+")",void 0!=h){var g=2*t._private.style["text-outline-width"].value;g>0&&(e.lineWidth=g,e.strokeText(h,r,a)),isNaN(r)&&(r=0),isNaN(a)&&(a=0),e.fillText(""+h,r,a),t._private.rstyle.labelWidth=e.measureText(h).width}}}(cytoscape),function(e){var t=e("renderer","canvas");t.prototype.drawNode=function(e,r,a){var i,n;if(r.visible()){for(var o=1,s=r.parents(),l=0;l<s.length;l++){var c=s[l],p=c._private.style.opacity.value;if(o=p*o,0===p)return}if(i=this.getNodeWidth(r),n=this.getNodeHeight(r),e.lineWidth=r._private.style["border-width"].pxValue,void 0!==a&&a){var d=r._private.style["overlay-padding"].pxValue,u=r._private.style["overlay-opacity"].value,h=r._private.style["overlay-color"].value;u>0&&(e.fillStyle="rgba( "+h[0]+", "+h[1]+", "+h[2]+", "+u+" )",t.nodeShapes[this.getNodeShape(r)].draw(e,r._private.position.x,r._private.position.y,i+2*d,n+2*d))}else{e.fillStyle="rgba("+r._private.style["background-color"].value[0]+","+r._private.style["background-color"].value[1]+","+r._private.style["background-color"].value[2]+","+r._private.style["background-opacity"].value*r._private.style.opacity.value*o+")",e.strokeStyle="rgba("+r._private.style["border-color"].value[0]+","+r._private.style["border-color"].value[1]+","+r._private.style["border-color"].value[2]+","+r._private.style["border-opacity"].value*r._private.style.opacity.value*o+")";var v=r._private.style["background-image"].value[2]||r._private.style["background-image"].value[1];if(void 0!=v){var g=this,f=this.getCachedImage(v,function(){g.data.canvasNeedsRedraw[t.NODE]=!0,g.data.canvasNeedsRedraw[t.DRAG]=!0,g.swapCachedImage(v),g.redraw()});0==f.complete?(t.nodeShapes[g.getNodeShape(r)].drawPath(e,r._private.position.x,r._private.position.y,i,n),e.stroke(),e.fillStyle="#555555",e.fill()):this.drawInscribedImage(e,f,r)}else t.nodeShapes[this.getNodeShape(r)].draw(e,r._private.position.x,r._private.position.y,i,n);this.drawPie(e,r),r._private.style["border-width"].pxValue>0&&(t.nodeShapes[this.getNodeShape(r)].drawPath(e,r._private.position.x,r._private.position.y,i,n),e.stroke())}}},t.prototype.hasPie=function(t){t=t[0];for(var r=1;r<=e.style.pieBackgroundN;r++){var a=t._private.style["pie-"+r+"-background-size"].value;if(a>0)return!0}return!1},t.prototype.drawPie=function(r,a){if(a=a[0],this.hasPie(a)){var i=this.getNodeWidth(a),n=this.getNodeHeight(a),o=a._private.position.x,s=a._private.position.y,l=Math.min(i,n)/2,c=0;r.save(),t.nodeShapes[this.getNodeShape(a)].drawPath(r,o,s,i,n),r.clip();for(var p=1;p<=e.style.pieBackgroundN;p++){{var d=a._private.style["pie-"+p+"-background-size"].value,u=a._private.style["pie-"+p+"-background-color"],h=d/100,v=1.5*Math.PI+2*Math.PI*c,g=2*Math.PI*h,f=v+g;o+l*Math.cos(v),s+l*Math.sin(v)}0===d||c>=1||c+h>1||(r.beginPath(),r.moveTo(o,s),r.arc(o,s,l,v,f),r.closePath(),r.fillStyle="rgb("+u.value[0]+","+u.value[1]+","+u.value[2]+")",r.fill(),c+=h)}r.restore()}}}(cytoscape),function(e){var t=e("renderer","canvas");t.prototype.getPixelRatio=function(){var e=this.data.canvases[0],t=e.getContext("2d"),r=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1,a="undefined"!=typeof InstallTrigger;return a?1:(window.devicePixelRatio||1)/r},t.prototype.matchCanvasSize=function(e){var r,a=this.data,i=e.clientWidth,n=e.clientHeight,o=i,s=n,l=this.getPixelRatio();o*=l,s*=l;var c=a.canvasContainer;c.style.width=i+"px",c.style.height=n+"px";for(var p=0;p<t.CANVAS_LAYERS;p++)r=a.canvases[p],(r.width!==o||r.height!==s)&&(r.width=o,r.height=s,r.style.width=i+"px",r.style.height=n+"px");for(var p=0;p<t.BUFFER_COUNT;p++)r=a.bufferCanvases[p],(r.width!==o||r.height!==s)&&(r.width=o,r.height=s)},t.prototype.renderTo=function(e,t,r){this.redraw({forcedContext:e,forcedZoom:t,forcedPan:r,drawAllLayers:!0})},t.prototype.redraw=function(e){function r(){function e(e){e.setTransform(1,0,0,1,0,0),!a&&e.clearRect(0,0,e.canvas.width,e.canvas.height),i||(e.translate(g.x,g.y),e.scale(h,h)),o&&e.translate(o.x,o.y),n&&e.scale(n,n)}var r=s.getCachedNodes(),d=s.getCachedEdges();a||s.matchCanvasSize(p.container);var u=c.zoom(),h=void 0!==n?n:u,v=c.pan(),g={x:v.x,y:v.y};o&&(g=o),h*=l,g.x*=l,g.y*=l;for(var f=[],m=0;m<r.length;m++)f.push(r[m]);for(var m=0;m<d.length;m++)f.push(d[m]);if(p.canvasNeedsRedraw[t.DRAG]||p.canvasNeedsRedraw[t.NODE]||i){s.hideEdgesOnViewport&&(s.pinching||s.hoverData.dragging||s.data.wheel||s.swipePanning)||s.findEdgeControlPoints(d);var f=s.getCachedZSortedEles();c.hasCompoundNodes()&&s.updateAllCompounds(f)}var b,w,x;if(p.canvasNeedsRedraw[t.NODE]||i){if(!b||!w){b=[],w=[];for(var _=0;_<f.length;_++)x=f[_],x._private.rscratch.inDragLayer?b.push(x):w.push(x)}var E=a||p.canvases[t.NODE].getContext("2d");e(E);for(var _=0;_<w.length;_++)x=w[_],"nodes"==x._private.group?s.drawNode(E,x):"edges"==x._private.group&&s.drawEdge(E,x);for(var _=0;_<w.length;_++)x=w[_],"nodes"==x._private.group?s.drawNodeText(E,x):"edges"==x._private.group&&s.drawEdgeText(E,x),"nodes"==x._private.group?s.drawNode(E,x,!0):"edges"==x._private.group&&s.drawEdge(E,x,!0);i||(p.canvasNeedsRedraw[t.NODE]=!1)}if(p.canvasNeedsRedraw[t.DRAG]||i){if(!b||!w){b=[],w=[];for(var _=0;_<f.length;_++)x=f[_],x._private.rscratch.inDragLayer?b.push(x):w.push(x)}var E=a||p.canvases[t.DRAG].getContext("2d");e(E);for(var x,_=0;_<b.length;_++)x=b[_],"nodes"==x._private.group?s.drawNode(E,x):"edges"==x._private.group&&s.drawEdge(E,x);for(var _=0;_<b.length;_++)x=b[_],"nodes"==x._private.group?s.drawNodeText(E,x):"edges"==x._private.group&&s.drawEdgeText(E,x),"nodes"==x._private.group?s.drawNode(E,x,!0):"edges"==x._private.group&&s.drawEdge(E,x,!0);i||(p.canvasNeedsRedraw[t.DRAG]=!1)}if(p.canvasNeedsRedraw[t.SELECT_BOX]&&!i){var E=a||p.canvases[t.SELECT_BOX].getContext("2d");e(E);var S=c.style()._private.coreStyle;if(1==p.select[4]){var u=p.cy.zoom(),P=S["selection-box-border-width"].value/u;E.lineWidth=P,E.fillStyle="rgba("+S["selection-box-color"].value[0]+","+S["selection-box-color"].value[1]+","+S["selection-box-color"].value[2]+","+S["selection-box-opacity"].value+")",E.fillRect(p.select[0],p.select[1],p.select[2]-p.select[0],p.select[3]-p.select[1]),P>0&&(E.strokeStyle="rgba("+S["selection-box-border-color"].value[0]+","+S["selection-box-border-color"].value[1]+","+S["selection-box-border-color"].value[2]+","+S["selection-box-opacity"].value+")",E.strokeRect(p.select[0],p.select[1],p.select[2]-p.select[0],p.select[3]-p.select[1]))}if(p.bgActivePosistion){var u=p.cy.zoom(),M=p.bgActivePosistion;E.fillStyle="rgba("+S["active-bg-color"].value[0]+","+S["active-bg-color"].value[1]+","+S["active-bg-color"].value[2]+","+S["active-bg-opacity"].value+")",E.beginPath(),E.arc(M.x,M.y,S["active-bg-size"].pxValue/u,0,2*Math.PI),E.fill()}i||(p.canvasNeedsRedraw[t.SELECT_BOX]=!1)}var k=+new Date;void 0===s.averageRedrawTime&&(s.averageRedrawTime=k-y),s.averageRedrawTime=s.averageRedrawTime/2+(k-y)/2}e=e||{};var a=e.forcedContext,i=e.drawAllLayers,n=e.forcedZoom,o=e.forcedPan,s=this,l=this.getPixelRatio(),c=s.data.cy,p=s.data;clearTimeout(this.redrawTimeout),void 0===this.averageRedrawTime&&(this.averageRedrawTime=0);var d=1e3/60,u=1e3,h=this.averageRedrawTime;h=Math.max(d,h),h=Math.min(h,u),void 0===this.lastDrawTime&&(this.lastDrawTime=0);var v=+new Date,g=v-this.lastDrawTime,f=g>=h;if(!a){if(!f)return clearTimeout(this.redrawTimeout),void(this.redrawTimeout=setTimeout(function(){s.redraw()},h));this.lastDrawTime=v}var y=v;a?r():setTimeout(r,0),a||s.initrender||(s.initrender=!0,c.trigger("initrender"))}}(cytoscape),function(e){var t=e("renderer","canvas");t.prototype.drawPolygonPath=function(e,t,r,a,i,n){e.translate(t,r),e.scale(a/2,i/2),e.beginPath(),e.moveTo(n[0],n[1]);for(var o=1;o<n.length/2;o++)e.lineTo(n[2*o],n[2*o+1]);e.closePath(),e.scale(2/a,2/i),e.translate(-t,-r)},t.prototype.drawPolygon=function(e,t,r,a,i,n){this.drawPolygonPath(e,t,r,a,i,n),e.fill()},t.prototype.drawRoundRectanglePath=function(t,r,a,i,n){var o=i/2,s=n/2,l=e.math.getRoundRectangleRadius(i,n);t.translate(r,a),t.beginPath(),t.moveTo(0,-s),t.arcTo(o,-s,o,0,l),t.arcTo(o,s,0,s,l),t.arcTo(-o,s,-o,0,l),t.arcTo(-o,-s,0,-s,l),t.lineTo(0,-s),t.closePath(),t.translate(-r,-a)},t.prototype.drawRoundRectangle=function(e,t,r,a,i,n){this.drawRoundRectanglePath(e,t,r,a,i,n),e.fill()}}(cytoscape),function(e){var t=e("renderer","canvas");t.prototype.createBuffer=function(e,t){var r=document.createElement("canvas");return r.width=e,r.height=t,[r,r.getContext("2d")]},t.prototype.png=function(e){var t=this.data,r=t.cy,a=r.boundingBox(),i=e.full?Math.ceil(a.w):this.data.container.clientWidth,n=e.full?Math.ceil(a.h):this.data.container.clientHeight,o=document.createElement("canvas");o.width=i,o.height=n,o.style.width=i+"px",o.style.height=n+"px";var s=o.getContext("2d");return i>0&&n>0&&(s.clearRect(0,0,i,n),e.bg&&(s.fillStyle=e.bg,s.rect(0,0,i,n),s.fill()),s.globalCompositeOperation="source-over",this.redraw(e.full?{forcedContext:s,drawAllLayers:!0,forcedZoom:1,forcedPan:{x:-a.x1,y:-a.y1}}:{forcedContext:s,drawAllLayers:!0})),o.toDataURL("image/png")}}(cytoscape),function(e){var t=e("renderer","canvas");t.prototype.registerBinding=function(e,t,r,a){this.bindings.push({target:e,event:t,handler:r,useCapture:a}),e.addEventListener(t,r,a)},t.prototype.load=function(){function r(){return 0!==i.data.select[4]}function a(e,t,r,a){return Math.sqrt((r-e)*(r-e)+(a-t)*(a-t))}var i=this,n=function(e,t,r){if(!t)for(var a=e.parents(),i=0;i<a.size();i++)if(a[i]._private.selected)return;for(var n=e.descendants(),i=0;i<n.size();i++)if(t||!n[i]._private.selected){n[i]._private.rscratch.inDragLayer=!0,r.push(n[i]);for(var o=0;o<n[i]._private.edges.length;o++)n[i]._private.edges[o]._private.rscratch.inDragLayer=!0}},o=function(e,t){e._private.grabbed=!0,e._private.rscratch.inDragLayer=!0,t.push(e);for(var r=0;r<e._private.edges.length;r++)e._private.edges[r]._private.rscratch.inDragLayer=!0},s=function(e,t){for(var r=e;r.parent().nonempty();)r=r.parent()[0];if(r!=e||!t)for(var a=r.descendants().add(r),i=0;i<a.size();i++){a[i]._private.rscratch.inDragLayer=t;for(var n=0;n<a[i]._private.edges.length;n++)a[i]._private.edges[n]._private.rscratch.inDragLayer=t}};t.prototype.nodeIsDraggable=function(e){return 0!=e._private.style.opacity.value&&"visible"==e._private.style.visibility.value&&"element"==e._private.style.display.value&&!e._private.locked&&e._private.grabbable?!0:!1},i.registerBinding(window,"resize",function(){i.data.canvasNeedsRedraw[t.NODE]=!0,i.matchCanvasSize(i.data.container),i.redraw()},!0),i.registerBinding(i.data.container,"contextmenu",function(e){e.preventDefault()}),i.registerBinding(i.data.container,"mousedown",function(r){r.preventDefault(),i.hoverData.capture=!0,i.hoverData.which=r.which;var a=i.data.cy,l=i.projectIntoViewport(r.pageX,r.pageY),c=i.data.select,p=i.findNearestElement(l[0],l[1],!0),d=(i.hoverData.down,i.dragData.possibleDragElements),u=new e.Event(r,{type:"grab"});if(3==r.which)i.hoverData.cxtStarted=!0,p&&(p.activate(),p.trigger(new e.Event(r,{type:"cxttapstart",cyPosition:{x:l[0],y:l[1]}})),i.hoverData.down=p),a.trigger(new e.Event(r,{type:"cxttapstart",cyPosition:{x:l[0],y:l[1]}})),i.hoverData.downTime=(new Date).getTime(),i.hoverData.cxtDragged=!1;else if(1==r.which){if(p&&p.activate(),null!=p&&i.nodeIsDraggable(p)){if("nodes"==p._private.group&&0==p._private.selected&&(d=i.dragData.possibleDragElements=[],o(p,d),p.trigger(u),("auto"==p._private.style.width.value||"auto"==p._private.style.height.value)&&n(p,!0,d),s(p,!0)),"nodes"==p._private.group&&1==p._private.selected){d=i.dragData.possibleDragElements=[];for(var h=!1,v=a.$("node:selected"),g=0;g<v.length;g++)i.nodeIsDraggable(v[g])&&(o(v[g],d),h||(p.trigger(u),h=!0),("auto"==v[g]._private.style.width.value||"auto"==v[g]._private.style.height.value)&&n(v[g],!1,d),s(v[g],!0))}p.trigger(new e.Event(r,{type:"mousedown",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(r,{type:"tapstart",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(r,{type:"vmousedown",cyPosition:{x:l[0],y:l[1]}}))}else null==p&&a.trigger(new e.Event(r,{type:"mousedown",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(r,{type:"tapstart",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(r,{type:"vmousedown",cyPosition:{x:l[0],y:l[1]}}));if(i.hoverData.down=p,i.hoverData.downTime=(new Date).getTime(),null==p||p.isEdge()){c[4]=1;var f=Math.max(0,t.panOrBoxSelectDelay-(+new Date-i.hoverData.downTime));clearTimeout(i.bgActiveTimeout),i.bgActiveTimeout=setTimeout(function(){p&&p.unactivate(),i.data.bgActivePosistion={x:l[0],y:l[1]},i.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,i.redraw()},f)}}c[0]=c[2]=l[0],c[1]=c[3]=l[1],i.redraw()},!1),i.registerBinding(window,"mousemove",function(r){var a=!1,n=i.hoverData.capture;if(!n){var o=i.findContainerPageCoords();if(!(r.pageX>o[0]&&r.pageX<o[0]+i.data.container.clientWidth&&r.pageY>o[1]&&r.pageY<o[1]+i.data.container.clientHeight))return}{var s=i.data.cy,l=i.projectIntoViewport(r.pageX,r.pageY),c=i.data.select,p=i.findNearestElement(l[0],l[1],!0),d=i.hoverData.last,u=i.hoverData.down,h=[l[0]-c[2],l[1]-c[3]],v=(i.getCachedNodes(),i.getCachedEdges(),i.dragData.possibleDragElements);r.shiftKey}if(a=!0,null!=p?p.trigger(new e.Event(r,{type:"mousemove",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(r,{type:"vmousemove",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(r,{type:"tapdrag",cyPosition:{x:l[0],y:l[1]}})):null==p&&s.trigger(new e.Event(r,{type:"mousemove",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(r,{type:"vmousemove",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(r,{type:"tapdrag",cyPosition:{x:l[0],y:l[1]}})),3===i.hoverData.which){var g=new e.Event(r,{type:"cxtdrag",cyPosition:{x:l[0],y:l[1]}});u?u.trigger(g):s.trigger(g),i.hoverData.cxtDragged=!0}else if(i.hoverData.dragging){if(a=!0,s.panningEnabled()&&s.userPanningEnabled()){var f={x:h[0]*s.zoom(),y:h[1]*s.zoom()};s.panBy(f)}l=i.projectIntoViewport(r.pageX,r.pageY)}else if(1==c[4]&&(null==u||u.isEdge())&&(!s.boxSelectionEnabled()||+new Date-i.hoverData.downTime>=t.panOrBoxSelectDelay)&&Math.abs(c[3]-c[1])+Math.abs(c[2]-c[0])<4&&s.panningEnabled()&&s.userPanningEnabled())i.hoverData.dragging=!0,c[4]=0;else{if(s.boxSelectionEnabled()&&Math.pow(c[2]-c[0],2)+Math.pow(c[3]-c[1],2)>7&&c[4]&&(clearTimeout(i.bgActiveTimeout),i.data.bgActivePosistion=void 0),u&&u.isEdge()&&u.active()&&u.unactivate(),p!=d&&(d&&d.trigger(new e.Event(r,{type:"mouseout",cyPosition:{x:l[0],y:l[1]}})),p&&p.trigger(new e.Event(r,{type:"mouseover",cyPosition:{x:l[0],y:l[1]}})),i.hoverData.last=p),u&&u.isNode()&&i.nodeIsDraggable(u)){i.dragData.didDrag=!0;for(var y=[],m=0;m<v.length;m++)"nodes"==v[m]._private.group&&i.nodeIsDraggable(v[m])&&(v[m]._private.position.x+=h[0],v[m]._private.position.y+=h[1],y.push(v[m]));new e.Collection(s,y).trigger("drag").trigger("position"),c[2]==c[0]&&c[3]==c[1]&&(i.data.canvasNeedsRedraw[t.NODE]=!0),i.data.canvasNeedsRedraw[t.DRAG]=!0}s.boxSelectionEnabled()&&(i.data.canvasNeedsRedraw[t.SELECT_BOX]=!0),a=!0}return c[2]=l[0],c[3]=l[1],i.redraw(),a?(r.stopPropagation&&r.stopPropagation(),r.preventDefault&&r.preventDefault(),!1):void 0},!1),i.registerBinding(window,"mouseup",function(r){var a=i.hoverData.capture;if(a){i.hoverData.capture=!1;var n=i.data.cy,o=i.projectIntoViewport(r.pageX,r.pageY),l=i.data.select,c=i.findNearestElement(o[0],o[1],!0),p=(i.getCachedNodes(),i.getCachedEdges(),i.dragData.possibleDragElements),d=i.hoverData.down,u=r.shiftKey;if(i.data.bgActivePosistion=void 0,clearTimeout(i.bgActiveTimeout),i.hoverData.cxtStarted=!1,d&&d.unactivate(),3===i.hoverData.which){var h=new e.Event(r,{type:"cxttapend",cyPosition:{x:o[0],y:o[1]}});if(d?d.trigger(h):n.trigger(h),!i.hoverData.cxtDragged){var v=new e.Event(r,{type:"cxttap",cyPosition:{x:o[0],y:o[1]}});d?d.trigger(v):n.trigger(v)}i.hoverData.cxtDragged=!1,i.hoverData.which=null}else{if(null!=d||i.dragData.didDrag||Math.pow(l[2]-l[0],2)+Math.pow(l[3]-l[1],2)>7&&l[4]||i.hoverData.dragging||(n.$(":selected").unselect(),p.length>0&&(i.data.canvasNeedsRedraw[t.NODE]=!0),i.dragData.possibleDragElements=p=[]),null!=c?c.trigger(new e.Event(r,{type:"mouseup",cyPosition:{x:o[0],y:o[1]}})).trigger(new e.Event(r,{type:"tapend",cyPosition:{x:o[0],y:o[1]}})).trigger(new e.Event(r,{type:"vmouseup",cyPosition:{x:o[0],y:o[1]}})):null==c&&n.trigger(new e.Event(r,{type:"mouseup",cyPosition:{x:o[0],y:o[1]}})).trigger(new e.Event(r,{type:"tapend",cyPosition:{x:o[0],y:o[1]}})).trigger(new e.Event(r,{type:"vmouseup",cyPosition:{x:o[0],y:o[1]}})),Math.pow(l[2]-l[0],2)+Math.pow(l[3]-l[1],2)==0&&(null!=c?c.trigger(new e.Event(r,{type:"click",cyPosition:{x:o[0],y:o[1]}})).trigger(new e.Event(r,{type:"tap",cyPosition:{x:o[0],y:o[1]}})).trigger(new e.Event(r,{type:"vclick",cyPosition:{x:o[0],y:o[1]}})):null==c&&n.trigger(new e.Event(r,{type:"click",cyPosition:{x:o[0],y:o[1]}})).trigger(new e.Event(r,{type:"tap",cyPosition:{x:o[0],y:o[1]}})).trigger(new e.Event(r,{type:"vclick",cyPosition:{x:o[0],y:o[1]}}))),c!=d||i.dragData.didDrag){if(c==d&&null!=c&&c._private.grabbed){for(var g=n.$(":grabbed"),f=0;f<g.length;f++){var y=g[f];y._private.grabbed=!1;for(var m=y._private.edges,b=0;b<m.length;b++)m[b]._private.rscratch.inDragLayer=!1;s(y,!1)}g.trigger("free")}}else null!=c&&c._private.selectable&&("additive"===n.selectionType()||u?c.selected()?c.unselect():c.select():u||(n.$(":selected").unselect(),c.select()),s(c,!1),i.data.canvasNeedsRedraw[t.NODE]=!0);if(n.boxSelectionEnabled()&&Math.pow(l[2]-l[0],2)+Math.pow(l[3]-l[1],2)>7&&l[4]){for(var w=[],x=i.getAllInBox(l[0],l[1],l[2],l[3]),f=(new e.Event(r,{type:"select"}),0);f<x.length;f++)x[f]._private.selectable&&(p.push(x[f]),w.push(x[f]));var _=new e.Collection(n,w);"additive"===n.selectionType()?_.select():(u||n.$(":selected").unselect(),_.select()),x.length>0&&(i.data.canvasNeedsRedraw[t.NODE]=!0)}if(i.hoverData.dragging=!1,!l[4]){for(var f=0;f<p.length;f++)if("nodes"==p[f]._private.group){p[f]._private.rscratch.inDragLayer=!1;for(var m=p[f]._private.edges,b=0;b<m.length;b++)m[b]._private.rscratch.inDragLayer=!1;s(p[f],!1)}else"edges"==p[f]._private.group&&(p[f]._private.rscratch.inDragLayer=!1);d&&d.trigger("free"),i.data.canvasNeedsRedraw[t.DRAG]=!0,i.data.canvasNeedsRedraw[t.NODE]=!0}}l[4]=0,i.hoverData.down=null,i.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,i.dragData.didDrag=!1,i.redraw()}},!1);var l=function(e){var t=i.data.cy,a=i.projectIntoViewport(e.pageX,e.pageY),n=[a[0]*t.zoom()+t.pan().x,a[1]*t.zoom()+t.pan().y];if(i.hoverData.dragging||i.hoverData.cxtStarted||r())return void e.preventDefault();if(t.panningEnabled()&&t.userPanningEnabled()&&t.zoomingEnabled()&&t.userZoomingEnabled()){e.preventDefault();var o=e.wheelDeltaY/1e3||e.wheelDelta/1e3||e.detail/-32||-e.deltaY/500;t.zoom({level:t.zoom()*Math.pow(10,o),renderedPosition:{x:n[0],y:n[1]}})}};i.registerBinding(i.data.container,"wheel",l,!0),i.registerBinding(i.data.container,"mousewheel",l,!0),i.registerBinding(i.data.container,"DOMMouseScroll",l,!0),i.registerBinding(i.data.container,"MozMousePixelScroll",function(){},!1),i.registerBinding(i.data.container,"mouseout",function(t){var r=i.projectIntoViewport(t.pageX,t.pageY);i.data.cy.trigger(new e.Event(t,{type:"mouseout",cyPosition:{x:r[0],y:r[1]}}))},!1),i.registerBinding(i.data.container,"mouseover",function(t){var r=i.projectIntoViewport(t.pageX,t.pageY);i.data.cy.trigger(new e.Event(t,{type:"mouseover",cyPosition:{x:r[0],y:r[1]}}))},!1);var c,p,d,u,h,v,g,f,y,m,b=i.data.container.clientWidth,w=i.data.container.clientHeight;i.registerBinding(i.data.container,"touchstart",function(r){function l(e){for(var t=0;t<e.length;t++)e[t]._private.grabbed=!1,e[t]._private.rscratch.inDragLayer=!1,e[t].active()&&e[t].unactivate()}clearTimeout(this.threeFingerSelectTimeout),r.target!==i.data.link&&r.preventDefault(),i.touchData.capture=!0,i.data.bgActivePosistion=void 0;var x=i.data.cy,_=i.getCachedNodes(),E=i.getCachedEdges(),S=i.touchData.now,P=i.touchData.earlier;if(r.touches[0]){var M=i.projectIntoViewport(r.touches[0].pageX,r.touches[0].pageY);S[0]=M[0],S[1]=M[1]}if(r.touches[1]){var M=i.projectIntoViewport(r.touches[1].pageX,r.touches[1].pageY);S[2]=M[0],S[3]=M[1]}if(r.touches[2]){var M=i.projectIntoViewport(r.touches[2].pageX,r.touches[2].pageY);S[4]=M[0],S[5]=M[1]}if(r.touches[1]){l(_),l(E);var k=i.findContainerPageCoords();y=k[1],f=k[0],c=r.touches[0].pageX-f,p=r.touches[0].pageY-y,d=r.touches[1].pageX-f,u=r.touches[1].pageY-y,m=c>=0&&b>=c&&d>=0&&b>=d&&p>=0&&w>=p&&u>=0&&w>=u;var D=x.pan(),N=x.zoom();if(h=a(c,p,d,u),v=[(c+d)/2,(p+u)/2],g=[(v[0]-D.x)/N,(v[1]-D.y)/N],100>h){var C=i.findNearestElement(S[0],S[1],!0),T=i.findNearestElement(S[2],S[3],!0);return C&&C.isNode()?(C.activate().trigger(new e.Event(r,{type:"cxttapstart",cyPosition:{x:S[0],y:S[1]}})),i.touchData.start=C):T&&T.isNode()?(T.activate().trigger(new e.Event(r,{type:"cxttapstart",cyPosition:{x:S[0],y:S[1]}})),i.touchData.start=T):(x.trigger(new e.Event(r,{type:"cxttapstart",cyPosition:{x:S[0],y:S[1]}})),i.touchData.start=null),i.touchData.start&&(i.touchData.start._private.grabbed=!1),i.touchData.cxt=!0,i.touchData.cxtDragged=!1,i.data.bgActivePosistion=void 0,void i.redraw()}}if(r.touches[2]);else if(r.touches[1]);else if(r.touches[0]){var I=i.findNearestElement(S[0],S[1],!0);if(null!=I){if(I.activate(),i.touchData.start=I,"nodes"==I._private.group&&i.nodeIsDraggable(I)){var z=i.dragData.touchDragEles=[];
if(o(I,z),I.trigger("grab"),I.selected()){z=i.dragData.touchDragEles=[];for(var B=x.$("node:selected"),X=0;X<B.length;X++){var R=B[X];if(i.nodeIsDraggable(R)){z.push(R),R._private.rscratch.inDragLayer=!0;for(var Y=R._private.edges,L=0;L<Y.length;L++)Y[L]._private.rscratch.inDragLayer=!0;("auto"==R._private.style.width.value||"auto"==R._private.style.height.value)&&n(R,!1,z),s(R,!0)}}}else("auto"==I._private.style.width.value||"auto"==I._private.style.height.value)&&n(I,!0,z),s(I,!0)}I.trigger(new e.Event(r,{type:"touchstart",cyPosition:{x:S[0],y:S[1]}})).trigger(new e.Event(r,{type:"tapstart",cyPosition:{x:S[0],y:S[1]}})).trigger(new e.Event(r,{type:"vmousdown",cyPosition:{x:S[0],y:S[1]}}))}null==I&&(x.trigger(new e.Event(r,{type:"touchstart",cyPosition:{x:S[0],y:S[1]}})).trigger(new e.Event(r,{type:"tapstart",cyPosition:{x:S[0],y:S[1]}})).trigger(new e.Event(r,{type:"vmousedown",cyPosition:{x:S[0],y:S[1]}})),i.data.bgActivePosistion={x:M[0],y:M[1]},i.data.canvasNeedsRedraw[t.SELECT_BOX]=!0);for(var A=0;A<S.length;A++)P[A]=S[A],i.touchData.startPosition[A]=S[A];i.touchData.singleTouchMoved=!1,i.touchData.singleTouchStartTime=+new Date;{setTimeout(function(){0==i.touchData.singleTouchMoved&&+new Date-i.touchData.singleTouchStartTime>250&&(i.touchData.start?i.touchData.start.trigger(new e.Event(r,{type:"taphold",cyPosition:{x:S[0],y:S[1]}})):(i.data.cy.trigger(new e.Event(r,{type:"taphold",cyPosition:{x:S[0],y:S[1]}})),x.$(":selected").unselect()))},1e3)}}i.redraw()},!1),i.registerBinding(window,"touchmove",function(r){var n=i.data.select,o=i.touchData.capture;o&&r.preventDefault();var s=i.data.cy,l=(i.getCachedNodes(),i.getCachedEdges(),i.touchData.now),v=i.touchData.earlier;if(r.touches[0]){var b=i.projectIntoViewport(r.touches[0].pageX,r.touches[0].pageY);l[0]=b[0],l[1]=b[1]}if(r.touches[1]){var b=i.projectIntoViewport(r.touches[1].pageX,r.touches[1].pageY);l[2]=b[0],l[3]=b[1]}if(r.touches[2]){var b=i.projectIntoViewport(r.touches[2].pageX,r.touches[2].pageY);l[4]=b[0],l[5]=b[1]}for(var w=[],x=0;x<l.length;x++)w[x]=l[x]-v[x];if(o&&i.touchData.cxt){var _=r.touches[0].pageX-f,E=r.touches[0].pageY-y,S=r.touches[1].pageX-f,P=r.touches[1].pageY-y,M=a(_,E,S,P),k=M/h;if(k>=1.5||M>=150){i.touchData.cxt=!1,i.touchData.start&&(i.touchData.start.unactivate(),i.touchData.start=null),i.data.bgActivePosistion=void 0,i.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;var D=new e.Event(r,{type:"cxttapend",cyPosition:{x:l[0],y:l[1]}});i.touchData.start?i.touchData.start.trigger(D):s.trigger(D)}}if(o&&i.touchData.cxt){var D=new e.Event(r,{type:"cxtdrag",cyPosition:{x:l[0],y:l[1]}});i.data.bgActivePosistion=void 0,i.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,i.touchData.start?i.touchData.start.trigger(D):s.trigger(D),i.touchData.start&&(i.touchData.start._private.grabbed=!1),i.touchData.cxtDragged=!0}else if(o&&r.touches[2]&&s.boxSelectionEnabled())i.data.bgActivePosistion=void 0,clearTimeout(this.threeFingerSelectTimeout),this.lastThreeTouch=+new Date,i.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,n&&0!==n.length&&void 0!==n[0]?(n[2]=(l[0]+l[2]+l[4])/3,n[3]=(l[1]+l[3]+l[5])/3):(n[0]=(l[0]+l[2]+l[4])/3,n[1]=(l[1]+l[3]+l[5])/3,n[2]=(l[0]+l[2]+l[4])/3+1,n[3]=(l[1]+l[3]+l[5])/3+1),n[4]=1;else if(o&&r.touches[1]&&s.zoomingEnabled()&&s.panningEnabled()&&s.userZoomingEnabled()&&s.userPanningEnabled()){i.data.bgActivePosistion=void 0,i.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;var _=r.touches[0].pageX-f,E=r.touches[0].pageY-y,S=r.touches[1].pageX-f,P=r.touches[1].pageY-y,M=a(_,E,S,P),k=M/h;if(1!=k&&m){var N=_-c,C=E-p,T=S-d,I=P-u,z=(N+T)/2,B=(C+I)/2,X=s.zoom(),R=X*k,Y=s.pan(),L=g[0]*X+Y.x,A=g[1]*X+Y.y,O={x:-R/X*(L-Y.x-z)+L,y:-R/X*(A-Y.y-B)+A};s._private.zoom=R,s._private.pan=O,s.trigger("pan zoom").notify("viewport"),h=M,c=_,p=E,d=S,u=P,i.pinching=!0}if(r.touches[0]){var b=i.projectIntoViewport(r.touches[0].pageX,r.touches[0].pageY);l[0]=b[0],l[1]=b[1]}if(r.touches[1]){var b=i.projectIntoViewport(r.touches[1].pageX,r.touches[1].pageY);l[2]=b[0],l[3]=b[1]}if(r.touches[2]){var b=i.projectIntoViewport(r.touches[2].pageX,r.touches[2].pageY);l[4]=b[0],l[5]=b[1]}}else if(r.touches[0]){{var q=i.touchData.start;i.touchData.last}if(null!=q&&"nodes"==q._private.group&&i.nodeIsDraggable(q)){for(var V=i.dragData.touchDragEles,F=0;F<V.length;F++){var $=V[F];i.nodeIsDraggable($)&&(i.dragData.didDrag=!0,$._private.position.x+=w[0],$._private.position.y+=w[1])}new e.Collection(s,V).trigger("drag").trigger("position"),i.data.canvasNeedsRedraw[t.DRAG]=!0,i.touchData.startPosition[0]==v[0]&&i.touchData.startPosition[1]==v[1]&&(i.data.canvasNeedsRedraw[t.NODE]=!0)}if(null!=q&&(q.trigger(new e.Event(r,{type:"touchmove",cyPosition:{x:l[0],y:l[1]}})),q.trigger(new e.Event(r,{type:"tapdrag",cyPosition:{x:l[0],y:l[1]}})),q.trigger(new e.Event(r,{type:"vmousemove",cyPosition:{x:l[0],y:l[1]}}))),null==q){var j=i.findNearestElement(l[0],l[1],!0);null!=j&&(j.trigger(new e.Event(r,{type:"touchmove",cyPosition:{x:l[0],y:l[1]}})),j.trigger(new e.Event(r,{type:"tapdrag",cyPosition:{x:l[0],y:l[1]}})),j.trigger(new e.Event(r,{type:"vmousemove",cyPosition:{x:l[0],y:l[1]}}))),null==j&&(s.trigger(new e.Event(r,{type:"touchmove",cyPosition:{x:l[0],y:l[1]}})),s.trigger(new e.Event(r,{type:"tapdrag",cyPosition:{x:l[0],y:l[1]}})),s.trigger(new e.Event(r,{type:"vmousemove",cyPosition:{x:l[0],y:l[1]}})))}i.touchData.last=j;for(var W=0;W<l.length;W++)l[W]&&i.touchData.startPosition[W]&&Math.abs(l[W]-i.touchData.startPosition[W])>4&&(i.touchData.singleTouchMoved=!0);if(o&&(null==q||q.isEdge())&&s.panningEnabled()&&s.userPanningEnabled()){q&&(q.unactivate(),i.data.bgActivePosistion||(i.data.bgActivePosistion={x:l[0],y:l[1]}),i.data.canvasNeedsRedraw[t.SELECT_BOX]=!0),s.panBy({x:w[0]*s.zoom(),y:w[1]*s.zoom()}),i.swipePanning=!0;var b=i.projectIntoViewport(r.touches[0].pageX,r.touches[0].pageY);l[0]=b[0],l[1]=b[1]}}for(var x=0;x<l.length;x++)v[x]=l[x];i.redraw()},!1),i.registerBinding(window,"touchend",function(r){var a=i.touchData.capture;if(a){i.touchData.capture=!1,r.preventDefault();var n=i.data.select;i.swipePanning=!1;var o=i.data.cy,l=(i.getCachedNodes(),i.getCachedEdges(),i.touchData.now),c=i.touchData.earlier,p=i.touchData.start;if(r.touches[0]){var d=i.projectIntoViewport(r.touches[0].pageX,r.touches[0].pageY);l[0]=d[0],l[1]=d[1]}if(r.touches[1]){var d=i.projectIntoViewport(r.touches[1].pageX,r.touches[1].pageY);l[2]=d[0],l[3]=d[1]}if(r.touches[2]){var d=i.projectIntoViewport(r.touches[2].pageX,r.touches[2].pageY);l[4]=d[0],l[5]=d[1]}if(i.touchData.cxt){if(ctxTapend=new e.Event(r,{type:"cxttapend",cyPosition:{x:l[0],y:l[1]}}),p?(p.unactivate(),p.trigger(ctxTapend)):o.trigger(ctxTapend),!i.touchData.cxtDragged){var u=new e.Event(r,{type:"cxttap",cyPosition:{x:l[0],y:l[1]}});p?p.trigger(u):o.trigger(u)}return i.touchData.start&&(i.touchData.start._private.grabbed=!1),i.touchData.cxt=!1,i.touchData.start=null,void i.redraw()}{+new Date}if(!r.touches[2]&&o.boxSelectionEnabled()){clearTimeout(this.threeFingerSelectTimeout);var h=[],v=i.getAllInBox(n[0],n[1],n[2],n[3]);n[0]=void 0,n[1]=void 0,n[2]=void 0,n[3]=void 0,n[4]=0,i.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;for(var g=(new e.Event("select"),0);g<v.length;g++)v[g]._private.selectable&&h.push(v[g]);var f=new e.Collection(o,h);"single"===o.selectionType()&&o.$(":selected").unselect(),f.select(),v.length>0&&(i.data.canvasNeedsRedraw[t.NODE]=!0)}r.touches[1]||(i.pinching=!1);var y=!1;if(null!=p&&(p._private.active=!1,y=!0,p.trigger("unactivate")),r.touches[2])i.data.bgActivePosistion=void 0,i.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;else if(r.touches[1]);else if(r.touches[0]);else if(!r.touches[0]){if(i.data.bgActivePosistion=void 0,i.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,null!=p){1==p._private.grabbed&&(p._private.grabbed=!1,p.trigger("free"),p._private.rscratch.inDragLayer=!1);for(var m=p._private.edges,b=0;b<m.length;b++)m[b]._private.rscratch.inDragLayer=!1;if(s(p,!1),p.selected())for(var w=o.$("node:selected"),x=0;x<w.length;x++){var _=w[x];_._private.rscratch.inDragLayer=!1;for(var m=_._private.edges,b=0;b<m.length;b++)m[b]._private.rscratch.inDragLayer=!1;s(_,!1)}i.data.canvasNeedsRedraw[t.DRAG]=!0,i.data.canvasNeedsRedraw[t.NODE]=!0,p.trigger(new e.Event(r,{type:"touchend",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(r,{type:"tapend",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(r,{type:"vmouseup",cyPosition:{x:l[0],y:l[1]}})),i.touchData.start=null}else{var E=i.findNearestElement(l[0],l[1],!0);null!=E&&E.trigger(new e.Event(r,{type:"touchend",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(r,{type:"tapend",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(r,{type:"vmouseup",cyPosition:{x:l[0],y:l[1]}})),null==E&&o.trigger(new e.Event(r,{type:"touchend",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(r,{type:"tapend",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(r,{type:"vmouseup",cyPosition:{x:l[0],y:l[1]}}))}null!=p&&!i.dragData.didDrag&&p._private.selectable&&Math.sqrt(Math.pow(i.touchData.startPosition[0]-l[0],2)+Math.pow(i.touchData.startPosition[1]-l[1],2))<6&&("single"===o.selectionType()?(o.$(":selected").unselect(),p.select()):p.selected()?p.unselect():p.select(),y=!0,i.data.canvasNeedsRedraw[t.NODE]=!0),0==i.touchData.singleTouchMoved&&(p?p.trigger(new e.Event(r,{type:"tap",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(r,{type:"vclick",cyPosition:{x:l[0],y:l[1]}})):o.trigger(new e.Event(r,{type:"tap",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(r,{type:"vclick",cyPosition:{x:l[0],y:l[1]}}))),i.touchData.singleTouchMoved=!0}for(var b=0;b<l.length;b++)c[b]=l[b];i.dragData.didDrag=!1,y&&p&&p.updateStyle(!1),i.redraw()}},!1)}}(cytoscape),function(e){var t=e("renderer","canvas"),r=t.prototype,a=t.nodeShapes={};a.ellipse={draw:function(e,t,r,i,n){a.ellipse.drawPath(e,t,r,i,n),e.fill()},drawPath:function(e,t,r,a,i){e.beginPath(),e.translate(t,r),e.scale(a/2,i/2),e.arc(0,0,1,0,2*Math.PI*.999,!1),e.closePath(),e.scale(2/a,2/i),e.translate(-t,-r)},intersectLine:function(t,r,a,i,n,o,s){var l=e.math.intersectLineEllipse(n,o,t,r,a/2+s,i/2+s);return l},intersectBox:function(t,r,a,i,n,o,s,l,c){return e.math.boxIntersectEllipse(t,r,a,i,c,n,o,s,l)},checkPointRough:function(){return!0},checkPoint:function(e,t,r,a,i,n,o){return e-=n,t-=o,e/=a/2+r,t/=i/2+r,Math.pow(e,2)+Math.pow(t,2)<=1}},a.triangle={points:e.math.generateUnitNgonPoints(3,0),draw:function(e,t,i,n,o){r.drawPolygon(e,t,i,n,o,a.triangle.points)},drawPath:function(e,t,i,n,o){r.drawPolygonPath(e,t,i,n,o,a.triangle.points)},intersectLine:function(t,r,i,n,o,s,l){return e.math.polygonIntersectLine(o,s,a.triangle.points,t,r,i/2,n/2,l)},intersectBox:function(t,r,i,n,o,s,l,c,p){var d=a.triangle.points;return e.math.boxIntersectPolygon(t,r,i,n,d,o,s,l,c,[0,-1],p)},checkPointRough:function(t,r,i,n,o,s,l){return e.math.checkInBoundingBox(t,r,a.triangle.points,i,n,o,s,l)},checkPoint:function(t,r,i,n,o,s,l){return e.math.pointInsidePolygon(t,r,a.triangle.points,s,l,n,o,[0,-1],i)}},a.square={points:e.math.generateUnitNgonPoints(4,0),draw:function(e,t,i,n,o){r.drawPolygon(e,t,i,n,o,a.square.points)},drawPath:function(e,t,i,n,o){r.drawPolygonPath(e,t,i,n,o,a.square.points)},intersectLine:function(t,r,i,n,o,s,l){return e.math.polygonIntersectLine(o,s,a.square.points,t,r,i/2,n/2,l)},intersectBox:function(t,r,i,n,o,s,l,c,p){var d=a.square.points;return e.math.boxIntersectPolygon(t,r,i,n,d,o,s,l,c,[0,-1],p)},checkPointRough:function(t,r,i,n,o,s,l){return e.math.checkInBoundingBox(t,r,a.square.points,i,n,o,s,l)},checkPoint:function(t,r,i,n,o,s,l){return e.math.pointInsidePolygon(t,r,a.square.points,s,l,n,o,[0,-1],i)}},a.rectangle=a.square,a.octogon={},a.roundrectangle={points:e.math.generateUnitNgonPoints(4,0),draw:function(e,t,a,i,n){r.drawRoundRectangle(e,t,a,i,n,10)},drawPath:function(e,t,a,i,n){r.drawRoundRectanglePath(e,t,a,i,n,10)},intersectLine:function(t,r,a,i,n,o,s){return e.math.roundRectangleIntersectLine(n,o,t,r,a,i,s)},intersectBox:function(t,r,a,i,n,o,s,l,c){return e.math.roundRectangleIntersectBox(t,r,a,i,n,o,s,l,c)},checkPointRough:function(t,r,i,n,o,s,l){return e.math.checkInBoundingBox(t,r,a.roundrectangle.points,i,n,o,s,l)},checkPoint:function(t,r,i,n,o,s,l){var c=e.math.getRoundRectangleRadius(n,o);if(e.math.pointInsidePolygon(t,r,a.roundrectangle.points,s,l,n,o-2*c,[0,-1],i))return!0;if(e.math.pointInsidePolygon(t,r,a.roundrectangle.points,s,l,n-2*c,o,[0,-1],i))return!0;var p=function(e,t,r,a,i,n,o){return e-=r,t-=a,e/=i/2+o,t/=n/2+o,Math.pow(e,2)+Math.pow(t,2)<=1};return p(t,r,s-n/2+c,l-o/2+c,2*c,2*c,i)?!0:p(t,r,s+n/2-c,l-o/2+c,2*c,2*c,i)?!0:p(t,r,s+n/2-c,l+o/2-c,2*c,2*c,i)?!0:p(t,r,s-n/2+c,l+o/2-c,2*c,2*c,i)?!0:!1}},a.roundrectangle2={roundness:4.99,draw:function(e,t,a){2*roundness>=t||r.drawPolygon(e._private.position.x,e._private.position.y,t,a,nodeSapes.roundrectangle2.points)},intersectLine:function(t,r,i,n,o){return e.math.findPolygonIntersection(t,r,i,n,o,a.square.points)},intersectBox:function(){a.square.points}},a.pentagon={points:e.math.generateUnitNgonPoints(5,0),draw:function(e,t,i,n,o){r.drawPolygon(e,t,i,n,o,a.pentagon.points)},drawPath:function(e,t,i,n,o){r.drawPolygonPath(e,t,i,n,o,a.pentagon.points)},intersectLine:function(e,t,i,n,o,s,l){return r.polygonIntersectLine(o,s,a.pentagon.points,e,t,i/2,n/2,l)},intersectBox:function(t,r,i,n,o,s,l,c,p){var d=a.pentagon.points;return e.math.boxIntersectPolygon(t,r,i,n,d,o,s,l,c,[0,-1],p)},checkPointRough:function(t,r,i,n,o,s,l){return e.math.checkInBoundingBox(t,r,a.pentagon.points,i,n,o,s,l)},checkPoint:function(t,r,i,n,o,s,l){return e.math.pointInsidePolygon(t,r,a.pentagon.points,s,l,n,o,[0,-1],i)}},a.hexagon={points:e.math.generateUnitNgonPoints(6,0),draw:function(e,t,i,n,o){r.drawPolygon(e,t,i,n,o,a.hexagon.points)},drawPath:function(e,t,i,n,o){r.drawPolygonPath(e,t,i,n,o,a.hexagon.points)},intersectLine:function(t,r,i,n,o,s,l){return e.math.polygonIntersectLine(o,s,a.hexagon.points,t,r,i/2,n/2,l)},intersectBox:function(t,r,i,n,o,s,l,c,p){var d=a.hexagon.points;return e.math.boxIntersectPolygon(t,r,i,n,d,o,s,l,c,[0,-1],p)},checkPointRough:function(t,r,i,n,o,s,l){return e.math.checkInBoundingBox(t,r,a.hexagon.points,i,n,o,s,l)},checkPoint:function(t,r,i,n,o,s,l){return e.math.pointInsidePolygon(t,r,a.hexagon.points,s,l,n,o,[0,-1],i)}},a.heptagon={points:e.math.generateUnitNgonPoints(7,0),draw:function(e,t,i,n,o){r.drawPolygon(e,t,i,n,o,a.heptagon.points)},drawPath:function(e,t,i,n,o){r.drawPolygonPath(e,t,i,n,o,a.heptagon.points)},intersectLine:function(e,t,i,n,o,s,l){return r.polygonIntersectLine(o,s,a.heptagon.points,e,t,i/2,n/2,l)},intersectBox:function(e,t,i,n,o,s,l,c,p){var d=a.heptagon.points;return r.boxIntersectPolygon(e,t,i,n,d,o,s,l,c,[0,-1],p)},checkPointRough:function(t,r,i,n,o,s,l){return e.math.checkInBoundingBox(t,r,a.heptagon.points,i,n,o,s,l)},checkPoint:function(t,r,i,n,o,s,l){return e.math.pointInsidePolygon(t,r,a.heptagon.points,s,l,n,o,[0,-1],i)}},a.octagon={points:e.math.generateUnitNgonPoints(8,0),draw:function(e,t,i,n,o){r.drawPolygon(e,t,i,n,o,a.octagon.points)},drawPath:function(e,t,i,n,o){r.drawPolygonPath(e,t,i,n,o,a.octagon.points)},intersectLine:function(e,t,i,n,o,s,l){return r.polygonIntersectLine(o,s,a.octagon.points,e,t,i/2,n/2,l)},intersectBox:function(e,t,i,n,o,s,l,c,p){var d=a.octagon.points;return r.boxIntersectPolygon(e,t,i,n,d,o,s,l,c,[0,-1],p)},checkPointRough:function(t,r,i,n,o,s,l){return e.math.checkInBoundingBox(t,r,a.octagon.points,i,n,o,s,l)},checkPoint:function(t,r,i,n,o,s,l){return e.math.pointInsidePolygon(t,r,a.octagon.points,s,l,n,o,[0,-1],i)}};var i=new Array(20),n=e.math.generateUnitNgonPoints(5,0),o=e.math.generateUnitNgonPoints(5,Math.PI/5),s=.5*(3-Math.sqrt(5));s*=1.57;for(var l=0;l<o.length/2;l++)o[2*l]*=s,o[2*l+1]*=s;for(var l=0;5>l;l++)i[4*l]=n[2*l],i[4*l+1]=n[2*l+1],i[4*l+2]=o[2*l],i[4*l+3]=o[2*l+1];a.star5={points:i,draw:function(e,t,i,n,o){r.drawPolygon(e,t,i,n,o,a.star5.points)},drawPath:function(e,t,i,n,o){r.drawPolygonPath(e,t,i,n,o,a.star5.points)},intersectLine:function(e,t,i,n,o,s,l){return r.polygonIntersectLine(o,s,a.star5.points,e,t,i/2,n/2,l)},intersectBox:function(e,t,i,n,o,s,l,c,p){var d=a.star5.points;return r.boxIntersectPolygon(e,t,i,n,d,o,s,l,c,[0,-1],p)},checkPointRough:function(t,r,i,n,o,s,l){return e.math.checkInBoundingBox(t,r,a.star5.points,i,n,o,s,l)},checkPoint:function(t,r,i,n,o,s,l){return e.math.pointInsidePolygon(t,r,a.star5.points,s,l,n,o,[0,-1],i)}}}(cytoscape),function(e){function t(t){this.options=e.util.extend(!0,{},r,t)}var r={ready:function(){},stop:function(){}};t.prototype.run=function(){var e=this.options,t=e.cy;t.nodes().positions(function(){return{x:0,y:0}}),t.one("layoutready",e.ready),t.trigger("layoutready"),t.one("layoutstop",e.stop),t.trigger("layoutstop")},t.prototype.stop=function(){var e=this.options;cy.one("layoutstop",e.stop),cy.trigger("layoutstop")},e("layout","null",t)}(cytoscape),function(e){function t(t){this.options=e.util.extend(!0,{},r,t)}var r={ready:void 0,stop:void 0,fit:!0,padding:30};t.prototype.run=function(){var e=this.options,t=e.cy,r=t.nodes(),a=(t.edges(),t.container()),i=a.clientWidth,n=a.clientHeight;r.positions(function(e,t){return t.locked()?!1:{x:Math.round(Math.random()*i),y:Math.round(Math.random()*n)}}),t.one("layoutready",e.ready),t.trigger("layoutready"),e.fit&&t.fit(e.padding),t.one("layoutstop",e.stop),t.trigger("layoutstop")},t.prototype.stop=function(){},e("layout","random",t)}(cytoscape),function(e){function t(t){this.options=e.util.extend({},r,t)}var r={fit:!0,padding:30,rows:void 0,columns:void 0,position:function(){},ready:void 0,stop:void 0};t.prototype.run=function(){function e(e){if(void 0==e)return Math.min(v,g);var t=Math.min(v,g);t==v?v=e:g=e}function t(e){if(void 0==e)return Math.max(v,g);var t=Math.max(v,g);t==v?v=e:g=e}function r(e,t){return w["c-"+e+"-"+t]?!0:!1}function a(e,t){w["c-"+e+"-"+t]=!0}function i(){_++,_>=g&&(_=0,x++)}var n=this.options,o=n,s=n.cy,l=s.nodes(),c=(s.edges(),s.container()),p=c.clientWidth,d=c.clientHeight;if(0==d||0==p)l.positions(function(){return{x:0,y:0}});else{var u=l.size(),h=Math.sqrt(u*d/p),v=Math.round(h),g=Math.round(p/d*h);if(null!=o.rows&&null!=o.columns)v=o.rows,g=o.columns;else if(null!=o.rows&&null==o.columns)v=o.rows,g=Math.ceil(u/v);else if(null==o.rows&&null!=o.columns)g=o.columns,v=Math.ceil(u/g);else if(g*v>u){var f=e(),y=t();(f-1)*y>=u?e(f-1):(y-1)*f>=u&&t(y-1)}else for(;u>g*v;){var f=e(),y=t();(y+1)*f>=u?t(y+1):e(f+1)}for(var m=p/g,b=d/v,w={},x=0,_=0,E={},S=0;S<l.length;S++){var P=l[S],M=o.position(P);if(M&&(void 0!==M.row||void 0!==M.col)){var k={row:M.row,col:M.col};if(void 0===k.col)for(k.col=0;r(k.row,k.col);)k.col++;else if(void 0===k.row)for(k.row=0;r(k.row,k.col);)k.row++;E[P.id()]=k,a(k.row,k.col)}}l.positions(function(e,t){var n,o;if(t.locked())return!1;var s=E[t.id()];if(s)n=s.col*m+m/2,o=s.row*b+b/2;else{for(;r(x,_);)i();n=_*m+m/2,o=x*b+b/2,a(x,_),i()}return{x:n,y:o}})}n.fit&&s.fit(o.padding),s.one("layoutready",n.ready),s.trigger("layoutready"),s.one("layoutstop",n.stop),s.trigger("layoutstop")},t.prototype.stop=function(){},e("layout","grid",t)}(cytoscape),function(e){function t(t){this.options=e.util.extend(!0,{},r,t)}var r={fit:!0,ready:void 0,stop:void 0,positions:void 0,zoom:void 0,pan:void 0,padding:30};t.prototype.run=function(){function e(e){return null==t.positions?null:null==t.positions[e._private.data.id]?null:t.positions[e._private.data.id]}{var t=this.options,r=t.cy,a=r.nodes();r.edges(),r.container()}a.positions(function(t,r){var a=e(r);return r.locked()||null==a?!1:a}),null!=t.pan&&r.pan(t.pan),null!=t.zoom&&r.zoom(t.zoom),r.one("layoutready",t.ready),r.trigger("layoutready"),t.fit&&r.fit(t.padding),r.one("layoutstop",t.stop),r.trigger("layoutstop")},e("layout","preset",t),e("core","presetLayout",function(){var e=this,t={},r={};return e.nodes().each(function(e,t){r[t.data("id")]=t.position()}),t.positions=r,t.name="preset",t.zoom=e.zoom(),t.pan=e.pan(),t})}(cytoscape),function(e){function t(t){this.options=e.util.extend({},r,t)}var r={liveUpdate:!0,ready:void 0,stop:void 0,maxSimulationTime:4e3,fit:!0,padding:[50,50,50,50],simulationBounds:void 0,ungrabifyWhileSimulating:!0,repulsion:void 0,stiffness:void 0,friction:void 0,gravity:!0,fps:void 0,precision:void 0,nodeMass:void 0,edgeLength:void 0,stepSize:1,stableEnergy:function(e){var t=e;return t.max<=.5||t.mean<=.3}};t.prototype.run=function(){function t(e,t){return null==t?void 0:"function"==typeof t?t.apply(e,[e._private.data,{nodes:o.length,edges:s.length,element:e}]):t}function r(e){var t=e.x,r=e.y,a=c,i=p,n=-2,o=2,s=4;return{x:t/a*s+n,y:r/i*s+o}}function a(e){i.fit&&n.fit(),e()}var i=this.options,n=i.cy,o=n.nodes(),s=n.edges(),l=n.container(),c=l.clientWidth,p=l.clientHeight,d=i.simulationBounds;i.simulationBounds?(c=d[2]-d[0],p=d[3]-d[1]):i.simulationBounds=[0,0,c,p];var u=i.simulationBounds;if(u.x1=u[0],u.y1=u[1],u.x2=u[2],u.y2=u[3],n.nodes().size()<=1)return i.fit&&n.reset(),n.nodes().position({x:Math.round((u.x1+u.x2)/2),y:Math.round((u.y1+u.y2)/2)}),n.one("layoutstop",i.stop),n.trigger("layoutstop"),n.one("layoutstop",i.stop),void n.trigger("layoutstop");var h=this.system=arbor.ParticleSystem(i.repulsion,i.stiffness,i.friction,i.gravity,i.fps,i.dt,i.precision);this.system=h,i.liveUpdate&&i.fit&&n.reset();var v,g=250,f=!1,y=+new Date,m={init:function(){},redraw:function(){var t=h.energy();if(null!=i.stableEnergy&&null!=t&&t.n>0&&i.stableEnergy(t))return void h.stop();clearTimeout(v),v=setTimeout(x,g);var r=[];h.eachNode(function(e,t){var a=(e.name,e.data),i=a.element;if(null!=i){var n=i._private.position;i.locked()||i.grabbed()||(n.x=u.x1+t.x,n.y=u.y1+t.y,r.push(i))}});var a=+new Date-y>=16;i.liveUpdate&&r.length>0&&a&&(new e.Collection(n,r).rtrigger("position"),y=+new Date),f||(f=!0,n.one("layoutready",i.ready),n.trigger("layoutready"))}};h.renderer=m,h.screenSize(c,p),h.screenPadding(i.padding[0],i.padding[1],i.padding[2],i.padding[3]),h.screenStep(i.stepSize);var b=function(e){grabbed=this;var t=h.fromScreen(this.position()),r=arbor.Point(t.x,t.y);switch(this.scratch().arbor.p=r,e.type){case"grab":this.scratch().arbor.fixed=!0;break;case"dragstop":this.scratch().arbor.fixed=!1,this.scratch().arbor.tempMass=1e3}};o.bind("grab drag dragstop",b),o.each(function(e,a){var n=this._private.data.id,o=t(this,i.nodeMass),s=this._private.locked,l=r({x:a.position().x,y:a.position().y});a.locked()||(this.scratch().arbor=h.addNode(n,{element:this,mass:o,fixed:s,x:s?l.x:void 0,y:s?l.y:void 0}))}),s.each(function(){var e=(this.id(),this.source().id()),r=this.target().id(),a=t(this,i.edgeLength);this.scratch().arbor=h.addEdge(e,r,{length:a})});var w=o.filter(":grabbable");i.ungrabifyWhileSimulating&&w.ungrabify();var x=function(){function e(){i.liveUpdate||(i.fit&&n.reset(),n.nodes().rtrigger("position")),o.unbind("grab drag dragstop",b),i.ungrabifyWhileSimulating&&w.grabify(),n.one("layoutstop",i.stop),n.trigger("layoutstop")}window.isIE?a(function(){e()}):e()};h.start(),setTimeout(function(){h.stop()},i.maxSimulationTime)},t.prototype.stop=function(){null!=this.system&&system.stop()},e("layout","arbor",t)}(cytoscape),function(e){function t(t){this.options=e.util.extend({},r,t)}var r={fit:!0,ready:void 0,stop:void 0,rStepSize:10,padding:30,startAngle:1.5*Math.PI,counterclockwise:!1};t.prototype.run=function(){function e(){var e=0,t=p,r={x:l.x+v*Math.cos(e),y:l.y+v*Math.sin(e)},a={x:l.x+v*Math.cos(t),y:l.y+v*Math.sin(t)},i=Math.sqrt((a.x-r.x)*(a.x-r.x)+(a.y-r.y)*(a.y-r.y));return i}for(var t=this.options,r=t,a=t.cy,i=a.nodes(),n=(a.edges(),a.container()),o=n.clientWidth,s=n.clientHeight,l={x:o/2,y:s/2},c=r.startAngle,p=2*Math.PI/i.length,d=0,u=0;u<i.length;u++){var h=i[u];d=Math.max(h.outerWidth(),h.outerHeight())}for(var v=o/2-d;e()<d&&!(i.length<2);)v+=r.rStepSize;var u=0;i.positions(function(){var e=v*Math.cos(c),t=v*Math.sin(c),a={x:l.x+e,y:l.y+t};return u++,c=r.counterclockwise?c-p:c+p,a}),t.fit&&a.fit(r.padding),a.one("layoutready",t.ready),a.trigger("layoutready"),a.one("layoutstop",t.stop),a.trigger("layoutstop")},t.prototype.stop=function(){},e("layout","circle",t)}(cytoscape),function(e){function t(t){this.options=e.util.extend({},r,t)}var r={fit:!0,ready:void 0,stop:void 0,directed:!0,padding:30,circle:!1,roots:void 0,maximalAdjustments:0};t.prototype.run=function(){function t(){for(var e=0;e<f.length;e++)for(var t=f[e],r=0;r<t.length;r++){var a=t[r];a._private.scratch.BreadthFirstLayout={depth:e,index:r}}}function r(e){for(var t,r=e.connectedEdges('[target = "'+e.id()+'"]'),a=e._private.scratch.BreadthFirstLayout,i=0,n=0;n<r.length;n++){var o=r[n],s=o.source()[0],l=s._private.scratch.BreadthFirstLayout;a.depth<l.depth&&i<l.depth&&(i=l.depth,t=s)}return t}function a(e){if(A[e.id()])return A[e.id()];for(var t=e._private.scratch.BreadthFirstLayout.depth,r=e.neighborhood().nodes(),a=0,i=0,n=0;n<r.length;n++){var o=r[n],s=(o.edgesWith(e),o._private.scratch.BreadthFirstLayout.index),l=o._private.scratch.BreadthFirstLayout.depth,c=f[l].length;(t>l||0===t)&&(a+=s/c,i++)}return i=Math.max(1,i),a/=i,0===i&&(a=void 0),A[e.id()]=a,a}var i,n=this.options,o=n,s=n.cy,l=s.nodes(),c=(s.edges(),s.container()),p=c.clientWidth,d=c.clientHeight;if(e.is.elementOrCollection(o.roots))i=o.roots;else if(e.is.array(o.roots)){for(var u=[],h=0;h<o.roots.length;h++){var v=o.roots[h],g=s.getElementById(v);i.push(g)}i=new e.Collection(s,u)}else i=l.roots();var f=[],y={},m={};i.bfs(function(e,t){var r=this[0];f[t]||(f[t]=[]),f[t].push(r),y[r.id()]=!0,m[r.id()]=t},o.directed);for(var b=[],h=0;h<l.length;h++){var g=l[h];y[g.id()]||b.push(g)}for(var w=3*b.length,x=0;0!==b.length&&w>x;){for(var _=b.shift(),E=_.neighborhood().nodes(),S=!1,h=0;h<E.length;h++){var P=m[E[h].id()];if(void 0!==P){f[P].push(_),S=!0;break}}S||b.push(_),x++}for(;0!==b.length;){for(var _=b.shift(),M=_.bfs(),S=!1,h=0;h<M.length;h++){var P=m[M[h].id()];if(void 0!==P){f[P].push(_),S=!0;break}}S||(0===f.length&&f.push([]),f[0].push(_))}t();for(var k=0;k<o.maximalAdjustments;k++){for(var D=f.length,N=[],h=0;D>h;h++)for(var P=f[h],C=P.length,T=0;C>T;T++){var g=P[T],I=g._private.scratch.BreadthFirstLayout,z=r(g);z&&(I.intEle=z,N.push(g))}for(var h=0;h<N.length;h++){var g=N[h],I=g._private.scratch.BreadthFirstLayout,z=I.intEle,B=z._private.scratch.BreadthFirstLayout;f[I.depth].splice(I.index,1);for(var X=B.depth+1;X>f.length-1;)f.push([]);f[X].push(g),I.depth=X,I.index=f[X].length-1}t()}for(var R=0,h=0;h<l.length;h++){var Y=l[h].outerWidth(),L=l[h].outerHeight();R=Math.max(R,Y,L)}R*=1.75;for(var A={},O=0;3>O;O++){for(var h=0;h<f.length;h++){var P=h;f[h]=f[h].sort(function(e,t){var r=a(e),i=a(t);return r-i})}t()}var q={x:p/2,y:d/2};l.positions(function(){var e=this[0],t=e._private.scratch.BreadthFirstLayout,r=t.depth,a=t.index,i=Math.max(p/(f[r].length+1),R),n=Math.max(d/(f.length+1),R),s=Math.min(p/2/f.length,d/2/f.length);if(s=Math.max(s,R),o.circle){var l=s*r+s-(f.length>0&&f[0].length<=3?s/2:0),c=2*Math.PI/f[r].length*a;return 0===r&&1===f[0].length&&(l=1),{x:q.x+l*Math.cos(c),y:q.y+l*Math.sin(c)}}return{x:(a+1)*i,y:(r+1)*n}}),n.fit&&s.fit(o.padding),s.one("layoutready",n.ready),s.trigger("layoutready"),s.one("layoutstop",n.stop),s.trigger("layoutstop")},t.prototype.stop=function(){},e("layout","breadthfirst",t)}(cytoscape),function(e){function t(t){this.options=e.util.extend({},w,t)}function r(e,t){for(var r={layoutNodes:[],idToIndex:{},nodeSize:e.nodes().size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:e.edges().size(),temperature:t.initialTemp},i=e.nodes(),n=0;n<r.nodeSize;n++){var o={};o.id=i[n].data("id"),o.parentId=i[n].data("parent"),o.children=[],o.positionX=i[n].position("x"),o.positionY=i[n].position("y"),o.offsetX=0,o.offsetY=0,o.height=i[n].height(),o.width=i[n].width(),o.maxX=o.positionX+o.width/2,o.minX=o.positionX-o.width/2,o.maxY=o.positionY+o.height/2,o.minY=o.positionY-o.height/2,o.padLeft=i[n]._private.style["padding-left"].pxValue,o.padRight=i[n]._private.style["padding-right"].pxValue,o.padTop=i[n]._private.style["padding-top"].pxValue,o.padBottom=i[n]._private.style["padding-bottom"].pxValue,r.layoutNodes.push(o),r.idToIndex[o.id]=n}for(var s=[],l=0,c=-1,p=[],n=0;n<r.nodeSize;n++){var d=r.layoutNodes[n],u=d.parentId;void 0!=u?r.layoutNodes[r.idToIndex[u]].children.push(d.id):(s[++c]=d.id,p.push(d.id))}for(r.graphSet.push(p);c>=l;){var h=s[l++],v=r.idToIndex[h],g=r.layoutNodes[v],f=g.children;if(f.length>0){r.graphSet.push(f);for(var n=0;n<f.length;n++)s[++c]=f[n]}}for(var n=0;n<r.graphSet.length;n++)for(var y=r.graphSet[n],m=0;m<y.length;m++){var w=r.idToIndex[y[m]];r.indexToGraph[w]=n}for(var x=e.edges(),n=0;n<r.edgeSize;n++){var _=x[n],E={};E.id=_.data("id"),E.sourceId=_.data("source"),E.targetId=_.data("target");var S=t.idealEdgeLength,P=r.idToIndex[E.sourceId],M=r.idToIndex[E.targetId],k=r.indexToGraph[P],D=r.indexToGraph[M];if(k!=D){for(var N=a(E.sourceId,E.targetId,r),C=r.graphSet[N],T=0,o=r.layoutNodes[P];-1==$.inArray(o.id,C);)o=r.layoutNodes[r.idToIndex[o.parentId]],T++;for(o=r.layoutNodes[M];-1==$.inArray(o.id,C);)o=r.layoutNodes[r.idToIndex[o.parentId]],T++;b("LCA of nodes "+E.sourceId+" and "+E.targetId+". Index: "+N+" Contents: "+C.toString()+". Depth: "+T),S*=T*t.nestingFactor}E.idealLength=S,r.layoutEdges.push(E)}return r}function a(e,t,r){var a=i(e,t,0,r);return 2>a.count?0:a.graph}function i(e,t,r,a){var n=a.graphSet[r];if(-1<$.inArray(e,n)&&-1<$.inArray(t,n))return{count:2,graph:r};for(var o=0,s=0;s<n.length;s++){var l=n[s],c=a.idToIndex[l],p=a.layoutNodes[c].children;if(0!=p.length){var d=a.indexToGraph[a.idToIndex[p[0]]],u=i(e,t,d,a);if(0!=u.count){if(1!=u.count)return u;if(o++,2==o)break}}}return{count:o,graph:r}}function n(e){if(DEBUG){console.debug("layoutNodes:");for(var t=0;t<e.nodeSize;t++){var r=e.layoutNodes[t],a="\nindex: "+t+"\nId: "+r.id+"\nChildren: "+r.children.toString()+"\nparentId: "+r.parentId+"\npositionX: "+r.positionX+"\npositionY: "+r.positionY+"\nOffsetX: "+r.offsetX+"\nOffsetY: "+r.offsetY+"\npadLeft: "+r.padLeft+"\npadRight: "+r.padRight+"\npadTop: "+r.padTop+"\npadBottom: "+r.padBottom;console.debug(a)}console.debug("idToIndex");for(var t in e.idToIndex)console.debug("Id: "+t+"\nIndex: "+e.idToIndex[t]);console.debug("Graph Set");for(var i=e.graphSet,t=0;t<i.length;t++)console.debug("Set : "+t+": "+i[t].toString());for(var a="IndexToGraph",t=0;t<e.indexToGraph.length;t++)a+="\nIndex : "+t+" Graph: "+e.indexToGraph[t];console.debug(a),a="Layout Edges";for(var t=0;t<e.layoutEdges.length;t++){var n=e.layoutEdges[t];a+="\nEdge Index: "+t+" ID: "+n.id+" SouceID: "+n.sourceId+" TargetId: "+n.targetId+" Ideal Length: "+n.idealLength}console.debug(a),a="nodeSize: "+e.nodeSize,a+="\nedgeSize: "+e.edgeSize,a+="\ntemperature: "+e.temperature,console.debug(a)}}function o(e,t){for(var r=t.container(),a=r.clientWidth,i=r.clientHeight,n=0;n<e.nodeSize;n++){var o=e.layoutNodes[n];0==o.children.length&&(o.positionX=Math.random()*a,o.positionY=Math.random()*i)}}function s(e,t,r){var a=t.container(),i=(a.clientWidth,a.clientHeight,"Refreshing positions");b(i),t.nodes().positions(function(t,r){return lnode=e.layoutNodes[e.idToIndex[r.data("id")]],i="Node: "+lnode.id+". Refreshed position: ("+lnode.positionX+", "+lnode.positionY+").",b(i),{x:lnode.positionX,y:lnode.positionY}}),1!=e.ready&&(i="Triggering layoutready",b(i),e.ready=!0,t.one("layoutready",r.ready),t.trigger("layoutready"))}function l(e,t,r,a){var i="\n\n###############################";i+="\nSTEP: "+a,i+="\n###############################\n",b(i),c(e,t,r),h(e,t,r),v(e,t,r),g(e,t,r),f(e,t,r)}function c(e,t,r){var a="calculateNodeForces";b(a);for(var i=0;i<e.graphSet.length;i++){var n=e.graphSet[i],o=n.length;a="Set: "+n.toString(),b(a);for(var s=0;o>s;s++)for(var l=e.layoutNodes[e.idToIndex[n[s]]],c=s+1;o>c;c++){var d=e.layoutNodes[e.idToIndex[n[c]]];p(l,d,e,t,r)}}}function p(e,t,r,a,i){var n="Node repulsion. Node1: "+e.id+" Node2: "+t.id,o=t.positionX-e.positionX,s=t.positionY-e.positionY;if(n+="\ndirectionX: "+o+", directionY: "+s,0==o&&0==s)return void(n+="\nNodes have the same position.");if(overlap=u(e,t,o,s),overlap>0){n+="\nNodes DO overlap.",n+="\nOverlap: "+overlap;
var l=i.nodeOverlap*overlap,c=Math.sqrt(o*o+s*s);n+="\nDistance: "+c;var p=l*o/c,h=l*s/c}else{n+="\nNodes do NOT overlap.";var v=d(e,o,s),g=d(t,-1*o,-1*s),f=g.x-v.x,y=g.y-v.y,m=f*f+y*y,c=Math.sqrt(m);n+="\nDistance: "+c;var l=i.nodeRepulsion/m,p=l*f/c,h=l*y/c}e.offsetX-=p,e.offsetY-=h,t.offsetX+=p,t.offsetY+=h,n+="\nForceX: "+p+" ForceY: "+h,b(n)}function d(e,t,r){var a=e.positionX,i=e.positionY,n=e.height,o=e.width,s=r/t,l=n/o,c="Computing clipping point of node "+e.id+" . Height:  "+n+", Width: "+o+"\nDirection "+t+", "+r,p={};do{if(0==t&&r>0){p.x=a,c+="\nUp direction",p.y=i+n/2;break}if(0==t&&0>r){p.x=a,p.y=i+n/2,c+="\nDown direction";break}if(t>0&&s>=-1*l&&l>=s){p.x=a+o/2,p.y=i+o*r/2/t,c+="\nRightborder";break}if(0>t&&s>=-1*l&&l>=s){p.x=a-o/2,p.y=i-o*r/2/t,c+="\nLeftborder";break}if(r>0&&(-1*l>=s||s>=l)){p.x=a+n*t/2/r,p.y=i+n/2,c+="\nTop border";break}if(0>r&&(-1*l>=s||s>=l)){p.x=a-n*t/2/r,p.y=i-n/2,c+="\nBottom border";break}}while(!1);return c+="\nClipping point found at "+p.x+", "+p.y,b(c),p}function u(e,t,r,a){if(r>0)var i=e.maxX-t.minX;else var i=t.maxX-e.minX;if(a>0)var n=e.maxY-t.minY;else var n=t.maxY-e.minY;return i>=0&&n>=0?Math.sqrt(i*i+n*n):0}function h(e,t,r){for(var a=0;a<e.edgeSize;a++){var i=e.layoutEdges[a],n=e.idToIndex[i.sourceId],o=e.layoutNodes[n],s=e.idToIndex[i.targetId],l=e.layoutNodes[s],c=l.positionX-o.positionX,p=l.positionY-o.positionY;if(0==c&&0==p)return;var u=d(o,c,p),h=d(l,-1*c,-1*p),v=h.x-u.x,g=h.y-u.y,f=Math.sqrt(v*v+g*g),y=Math.pow(i.idealLength-f,2)/r.edgeElasticity;if(0!=f)var m=y*v/f,w=y*g/f;else var m=0,w=0;o.offsetX+=m,o.offsetY+=w,l.offsetX-=m,l.offsetY-=w;var x="Edge force between nodes "+o.id+" and "+l.id;x+="\nDistance: "+f+" Force: ("+m+", "+w+")",b(x)}}function v(e,t,r){var a="calculateGravityForces";b(a);for(var i=0;i<e.graphSet.length;i++){var n=e.graphSet[i],o=n.length;if(a="Set: "+n.toString(),b(a),0==i)var s=t.container(),l=s.clientHeight/2,c=s.clientWidth/2;else var p=e.layoutNodes[e.idToIndex[n[0]]],d=e.layoutNodes[e.idToIndex[p.parentId]],l=d.positionX,c=d.positionY;a="Center found at: "+l+", "+c,b(a);for(var u=0;o>u;u++){var h=e.layoutNodes[e.idToIndex[n[u]]];a="Node: "+h.id;var v=l-h.positionX,g=c-h.positionY,f=Math.sqrt(v*v+g*g);if(f>1){var y=r.gravity*v/f,m=r.gravity*g/f;h.offsetX+=y,h.offsetY+=m,a+=": Applied force: "+y+", "+m}else a+=": skypped since it's too close to center";b(a)}}}function g(e){var t=[],r=0,a=-1;for(b("propagateForces"),t.push.apply(t,e.graphSet[0]),a+=e.graphSet[0].length;a>=r;){var i=t[r++],n=e.idToIndex[i],o=e.layoutNodes[n],s=o.children;if(0<s.length){var l=o.offsetX,c=o.offsetY,p="Propagating offset from parent node : "+o.id+". OffsetX: "+l+". OffsetY: "+c;p+="\n Children: "+s.toString(),b(p);for(var d=0;d<s.length;d++){var u=e.layoutNodes[e.idToIndex[s[d]]];u.offsetX+=l,u.offsetY+=c,t[++a]=s[d]}o.offsetX=0,o.offsetY=0}}}function f(e){var t="Updating positions";b(t);for(var r=0;r<e.nodeSize;r++){var a=e.layoutNodes[r];0<a.children.length&&(b("Resetting boundaries of compound node: "+a.id),a.maxX=void 0,a.minX=void 0,a.maxY=void 0,a.minY=void 0)}for(var r=0;r<e.nodeSize;r++){var a=e.layoutNodes[r];if(0<a.children.length)b("Skipping position update of node: "+a.id);else{t="Node: "+a.id+" Previous position: ("+a.positionX+", "+a.positionY+").";var i=y(a.offsetX,a.offsetY,e.temperature);a.positionX+=i.x,a.positionY+=i.y,a.offsetX=0,a.offsetY=0,a.minX=a.positionX-a.width,a.maxX=a.positionX+a.width,a.minY=a.positionY-a.height,a.maxY=a.positionY+a.height,t+=" New Position: ("+a.positionX+", "+a.positionY+").",b(t),m(a,e)}}for(var r=0;r<e.nodeSize;r++){var a=e.layoutNodes[r];0<a.children.length&&(a.positionX=(a.maxX+a.minX)/2,a.positionY=(a.maxY+a.minY)/2,a.width=a.maxX-a.minX,a.height=a.maxY-a.minY,t="Updating position, size of compound node "+a.id,t+="\nPositionX: "+a.positionX+", PositionY: "+a.positionY,t+="\nWidth: "+a.width+", Height: "+a.height,b(t))}}function y(e,t,r){var a="Limiting force: ("+e+", "+t+"). Max: "+r,i=Math.sqrt(e*e+t*t);if(i>r)var n={x:r*e/i,y:r*t/i};else var n={x:e,y:t};return a+=".\nResult: ("+n.x+", "+n.y+")",b(a),n}function m(e,t){var r="Propagating new position/size of node "+e.id,a=e.parentId;if(void 0==a)return r+=". No parent node.",void b(r);var i=t.layoutNodes[t.idToIndex[a]],n=!1;return(void 0==i.maxX||e.maxX+i.padRight>i.maxX)&&(i.maxX=e.maxX+i.padRight,n=!0,r+="\nNew maxX for parent node "+i.id+": "+i.maxX),(void 0==i.minX||e.minX-i.padLeft<i.minX)&&(i.minX=e.minX-i.padLeft,n=!0,r+="\nNew minX for parent node "+i.id+": "+i.minX),(void 0==i.maxY||e.maxY+i.padBottom>i.maxY)&&(i.maxY=e.maxY+i.padBottom,n=!0,r+="\nNew maxY for parent node "+i.id+": "+i.maxY),(void 0==i.minY||e.minY-i.padTop<i.minY)&&(i.minY=e.minY-i.padTop,n=!0,r+="\nNew minY for parent node "+i.id+": "+i.minY),n?(b(r),m(i,t)):(r+=". No changes in boundaries/position of parent node "+i.id,void b(r))}function b(e){DEBUG&&console.debug(e)}var w={ready:function(){},stop:function(){},refresh:0,fit:!0,randomize:!0,debug:!1,nodeRepulsion:1e4,nodeOverlap:10,idealEdgeLength:10,edgeElasticity:100,nestingFactor:5,gravity:250,numIter:100,initialTemp:200,coolingFactor:.95,minTemp:1};t.prototype.run=function(){var e=this.options,t=e.cy;DEBUG=1==e.debug?!0:!1;var a=new Date,i=r(t,e);DEBUG&&n(i),1==e.randomize&&(o(i,t),0<e.refresh&&s(i,t,e));for(var c=0;c<e.numIter;c++)if(l(i,t,e,c),0<e.refresh&&0==c%e.refresh&&s(i,t,e),i.temperature=i.temperature*e.coolingFactor,b("New temperature: "+i.temperature),i.temperature<e.minTemp){b("Temperature drop below minimum threshold. Stopping computation in step "+c);break}s(i,t,e),1==e.fit&&t.fit();var p=new Date;console.info("Layout took "+(p-a)+" ms"),t.one("layoutstop",e.stop),t.trigger("layoutstop")},t.prototype.stop=function(){var e=this.options;cy.one("layoutstop",e.stop),cy.trigger("layoutstop")},e("layout","cose",t)}(cytoscape);